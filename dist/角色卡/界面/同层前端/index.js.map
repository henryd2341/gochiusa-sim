{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/external var \"_\"","src://tavern_helper_template/external var \"z\"","src://tavern_helper_template/src/角色卡/schema.ts","src://tavern_helper_template/src/角色卡/界面/同层前端/stores/characterStore.ts","src://tavern_helper_template/src/角色卡/界面/同层前端/stores/gameStore.ts","src://tavern_helper_template/src/角色卡/界面/同层前端/stores/settingsStore.ts","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/CharacterDetail.vue?e42f","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/CharacterDetail.vue?4a89","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/CharacterAvatar.vue?ef71","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/CharacterAvatar.vue?b508","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/CharacterBar.vue?d29f","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/CharacterBar.vue?e5fb","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/MessageDisplay.vue?4809","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/MessageDisplay.vue?acba","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/OptionCard.vue?80fd","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/OptionCard.vue?2544","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/CustomOptionInput.vue?939d","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/CustomOptionInput.vue?eef6","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/OptionsPanel.vue?0a20","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/OptionsPanel.vue?92dd","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/TopNavBar.vue?ffc0","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/TopNavBar.vue?416f","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/GameMain.vue?fc65","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/GameMain.vue?c24f","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/HistoryMessages.vue?e673","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/HistoryMessages.vue?927d","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/SettingsPage.vue?ecab","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/SettingsPage.vue?3136","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/StartScreen.vue?d0e6","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/StartScreen.vue?2b8e","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/WorldbookManager.vue?f2e9","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/WorldbookManager.vue?7ac2","src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/external module \"https://testingcf.jsdelivr.net/npm/pinia/+esm\"","src://tavern_helper_template/external var \"Vue\"","src://tavern_helper_template/external var \"VueRouter\"","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/webpack/runtime/compat get default export","src://tavern_helper_template/webpack/runtime/define property getters","src://tavern_helper_template/webpack/runtime/hasOwnProperty shorthand","src://tavern_helper_template/webpack/runtime/make namespace object","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/components/BackgroundLayer.vue?22a8","webpack://tavern_helper_template/src/角色卡/界面/同层前端/components/BackgroundLayer.vue?5beb","webpack://tavern_helper_template/./src/角色卡/界面/同层前端/App.vue?3a2a","webpack://tavern_helper_template/src/角色卡/界面/同层前端/App.vue?f2cb","src://tavern_helper_template/src/角色卡/界面/同层前端/index.ts"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = _;","const __WEBPACK_NAMESPACE_OBJECT__ = z;","import { registerMvuSchema } from 'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';\nexport const Schema = z.object({\n    世界: z.object({\n        当前时间: z.string().describe('%M-%d %H:%i'),\n        当前地点: z.string(),\n        当前季节: z.enum(['春', '夏', '秋', '冬']),\n        当前天气: z.string(),\n        近期事务: z.record(z.string().describe('事务名'), z.string().describe('事务描述')),\n    }),\n    _主视角: z.enum(['无', '保登心爱', '香风智乃', '天天座理世', '宇治松千夜', '桐间纱路']),\n    当前场景角色: z.array(z.string()),\n    保登心爱: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    香风智乃: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    天天座理世: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    宇治松千夜: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    桐间纱路: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    条河麻耶: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    奈津惠: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    风衣叶冬优: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    神沙夏明: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    神沙映月: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    狩手结良: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    青山蓝山: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    真手凛: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    保登摩卡: z.object({\n        当前位置: z.string(),\n        心情状态: z.string(),\n        着装: z.string(),\n        关键物品: z\n            .record(z.string().describe('物品名'), z.object({\n            描述: z.string(),\n            数量: z.coerce.number(),\n        }))\n            .transform(data => _.pickBy(data, ({ 数量 }) => 数量 > 0)),\n    }),\n    店铺人气: z.object({\n        'Rabbit House': z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        甘兔庵: z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        'Fleur de Lapin': z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n        'Bright Bunny': z.coerce.number().transform(v => _.clamp(v, 0, 100)),\n    }),\n});\n$(() => {\n    registerMvuSchema(Schema);\n});\n","import waitUntil from 'async-wait-until';\nimport _ from 'lodash';\nimport { defineStore } from 'pinia';\nimport { Schema } from '../../../schema';\n// 角色名称映射（中文名 -> 英文文件名）\nexport const CHARACTER_NAME_MAP = {\n    保登心爱: 'qjltca',\n    香风智乃: '6t09pw',\n    天天座理世: 'n9szhx',\n    宇治松千夜: 'v4spnt',\n    桐间纱路: 'b982xz',\n    条河麻耶: 'bmw44n',\n    奈津惠: 'koovsy',\n    风衣叶冬优: 'lckv74',\n    神沙夏明: 'usclrp',\n    神沙映月: 'r10sh1',\n    狩手结良: 'a3uv0i',\n    青山蓝山: 'x18i00',\n    真手凛: 'kk59ir',\n    保登摩卡: 'hi872c',\n};\n// 角色颜色映射\nexport const CHARACTER_COLOR_MAP = {\n    保登心爱: 'var(--clr-cocoa)',\n    香风智乃: 'var(--clr-chino)',\n    天天座理世: 'var(--clr-rize)',\n    宇治松千夜: 'var(--clr-chiya)',\n    桐间纱路: 'var(--clr-syaro)',\n    条河麻耶: 'var(--clr-maya)',\n    奈津惠: 'var(--clr-megu)',\n    风衣叶冬优: 'var(--clr-fuyu)',\n    神沙夏明: 'var(--clr-natsume)',\n    神沙映月: 'var(--clr-eru)',\n    狩手结良: 'var(--clr-yura)',\n    青山蓝山: 'var(--clr-aoyama)',\n    真手凛: 'var(--clr-mate)',\n    保登摩卡: 'var(--clr-mocha)',\n};\n// 获取角色立绘路径\nexport function getCharacterPortrait(name) {\n    const fileName = CHARACTER_NAME_MAP[name];\n    if (fileName) {\n        // 使用相对路径指向 assets/portraits\n        return `https://files.catbox.moe/${fileName}.png`;\n    }\n    return '';\n}\n// 获取角色颜色\nexport function getCharacterColor(name) {\n    return CHARACTER_COLOR_MAP[name] || 'var(--text-primary)';\n}\nexport const useCharacterStore = defineStore('character', () => {\n    // MVU 数据\n    const mvuData = ref(null);\n    const isInitialized = ref(false);\n    let stopMessageListener = null;\n    // 初始化 MVU 数据\n    async function initialize() {\n        if (isInitialized.value)\n            return;\n        try {\n            // 等待 MVU 框架初始化\n            await waitGlobalInitialized('Mvu');\n            // 等待消息楼层变量被正确设置\n            await waitUntil(() => {\n                const data = Mvu.getMvuData({ type: 'message', message_id: getCurrentMessageId() });\n                return _.has(data, 'stat_data');\n            });\n            // 获取数据\n            await refreshData();\n            isInitialized.value = true;\n            console.info('[角色数据] 初始化成功');\n        }\n        catch (e) {\n            console.error('[角色数据] 初始化失败:', e);\n        }\n    }\n    // 刷新数据\n    async function refreshData() {\n        try {\n            const data = Mvu.getMvuData({ type: 'message', message_id: getCurrentMessageId() });\n            const statData = _.get(data, 'stat_data');\n            if (statData) {\n                mvuData.value = Schema.parse(statData);\n            }\n        }\n        catch (e) {\n            console.warn('[角色数据] 刷新失败:', e);\n        }\n    }\n    // 获取角色数据\n    function getCharacterData(name) {\n        if (!mvuData.value)\n            return null;\n        return mvuData.value[name];\n    }\n    // 获取当前场景角色列表\n    function getCurrentSceneCharacters() {\n        if (!mvuData.value)\n            return [];\n        return mvuData.value.当前场景角色 || [];\n    }\n    // 获取世界信息\n    function getWorldInfo() {\n        if (!mvuData.value)\n            return null;\n        return mvuData.value.世界;\n    }\n    // 获取主视角角色\n    function getMainPOV() {\n        if (!mvuData.value)\n            return '无';\n        return mvuData.value._主视角 || '无';\n    }\n    // 监听消息变化刷新数据\n    function setupMessageListener() {\n        if (stopMessageListener)\n            return;\n        stopMessageListener = eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, async () => {\n            await refreshData();\n        });\n    }\n    function cleanupMessageListener() {\n        stopMessageListener?.stop();\n        stopMessageListener = null;\n    }\n    return {\n        mvuData,\n        isInitialized,\n        initialize,\n        refreshData,\n        getCharacterData,\n        getCurrentSceneCharacters,\n        getWorldInfo,\n        getMainPOV,\n        setupMessageListener,\n        cleanupMessageListener,\n    };\n});\n","import { defineStore } from 'pinia';\nexport const useGameStore = defineStore('game', () => {\n    // 页面状态\n    const currentPage = ref('start');\n    // 消息状态\n    const currentMessage = ref('');\n    const currentMessageId = ref(0);\n    // 选项状态\n    const options = ref([]);\n    // 角色状态\n    const currentCharacters = ref([]);\n    // UI 状态\n    const isCharacterBarCollapsed = ref(false);\n    const isFullscreen = ref(false);\n    const isLoading = ref(false);\n    const isGenerating = ref(false);\n    // 选中的角色（用于详情页）\n    const selectedCharacter = ref(null);\n    // 页面导航\n    function navigateTo(page) {\n        currentPage.value = page;\n    }\n    // 更新消息\n    function updateMessage(message, messageId) {\n        currentMessage.value = message;\n        currentMessageId.value = messageId;\n    }\n    // 更新选项\n    function updateOptions(newOptions) {\n        options.value = newOptions;\n    }\n    // 添加自定义选项\n    function addCustomOption(title, content) {\n        const newOption = {\n            id: `custom-${Date.now()}`,\n            title: title || '自定义行动',\n            content,\n            isCustom: true,\n        };\n        options.value.push(newOption);\n    }\n    // 移除选项\n    function removeOption(optionId) {\n        const index = options.value.findIndex(opt => opt.id === optionId);\n        if (index !== -1) {\n            options.value.splice(index, 1);\n        }\n    }\n    // 更新当前场景角色\n    function updateCurrentCharacters(characters) {\n        currentCharacters.value = characters;\n    }\n    // 切换角色栏折叠状态\n    function toggleCharacterBar() {\n        isCharacterBarCollapsed.value = !isCharacterBarCollapsed.value;\n    }\n    // 切换全屏\n    function toggleFullscreen() {\n        isFullscreen.value = !isFullscreen.value;\n        if (isFullscreen.value) {\n            document.documentElement.requestFullscreen?.();\n        }\n        else {\n            document.exitFullscreen?.();\n        }\n    }\n    // 选择角色\n    function selectCharacter(name) {\n        selectedCharacter.value = name;\n    }\n    // 设置加载状态\n    function setLoading(loading) {\n        isLoading.value = loading;\n    }\n    // 设置生成状态\n    function setGenerating(generating) {\n        isGenerating.value = generating;\n    }\n    return {\n        // State\n        currentPage,\n        currentMessage,\n        currentMessageId,\n        options,\n        currentCharacters,\n        isCharacterBarCollapsed,\n        isFullscreen,\n        isLoading,\n        isGenerating,\n        selectedCharacter,\n        // Actions\n        navigateTo,\n        updateMessage,\n        updateOptions,\n        addCustomOption,\n        removeOption,\n        updateCurrentCharacters,\n        toggleCharacterBar,\n        toggleFullscreen,\n        selectCharacter,\n        setLoading,\n        setGenerating,\n    };\n});\n","import { defineStore } from 'pinia';\n// 默认设置\nconst defaultSettings = {\n    messageDisplayMode: 'instant',\n    theme: 'warm',\n    fontScheme: 'default',\n    fontSize: 'medium',\n    enableAnimations: true,\n    typewriterEffect: true,\n    autoScroll: true,\n    showCharacterBar: true,\n    backgroundBlur: 8,\n    allowCustomOptions: true,\n};\nconst DISPLAY_MODE_MAP = {\n    instant: 'instant',\n    typewriter: 'typewriter',\n    segment: 'segment',\n    card: 'instant',\n    bubble: 'segment',\n    classic: 'instant',\n};\nconst THEME_MAP = {\n    warm: 'warm',\n    cool: 'cool',\n    'high-contrast': 'high-contrast',\n    'eye-care': 'eye-care',\n    light: 'warm',\n    dark: 'high-contrast',\n    sakura: 'warm',\n    ocean: 'cool',\n};\nconst FONT_SCHEME_MAP = {\n    default: 'default',\n    reading: 'reading',\n    artistic: 'artistic',\n    elegant: 'reading',\n    modern: 'default',\n    classic: 'artistic',\n};\nfunction normalizeDisplayMode(value) {\n    if (typeof value === 'string' && DISPLAY_MODE_MAP[value]) {\n        return DISPLAY_MODE_MAP[value];\n    }\n    return defaultSettings.messageDisplayMode;\n}\nfunction normalizeTheme(value) {\n    if (typeof value === 'string' && THEME_MAP[value]) {\n        return THEME_MAP[value];\n    }\n    return defaultSettings.theme;\n}\nfunction normalizeFontScheme(value) {\n    if (typeof value === 'string' && FONT_SCHEME_MAP[value]) {\n        return FONT_SCHEME_MAP[value];\n    }\n    return defaultSettings.fontScheme;\n}\nfunction normalizeFontSize(value) {\n    if (value === 'small' || value === 'medium' || value === 'large') {\n        return value;\n    }\n    if (typeof value === 'number') {\n        if (value <= 14)\n            return 'small';\n        if (value >= 18)\n            return 'large';\n        return 'medium';\n    }\n    return defaultSettings.fontSize;\n}\nfunction normalizeSettings(parsed) {\n    return {\n        messageDisplayMode: normalizeDisplayMode(parsed.messageDisplayMode),\n        theme: normalizeTheme(parsed.theme),\n        fontScheme: normalizeFontScheme(parsed.fontScheme),\n        fontSize: normalizeFontSize(parsed.fontSize),\n        enableAnimations: typeof parsed.enableAnimations === 'boolean' ? parsed.enableAnimations : defaultSettings.enableAnimations,\n        typewriterEffect: typeof parsed.typewriterEffect === 'boolean' ? parsed.typewriterEffect : defaultSettings.typewriterEffect,\n        autoScroll: typeof parsed.autoScroll === 'boolean' ? parsed.autoScroll : defaultSettings.autoScroll,\n        showCharacterBar: typeof parsed.showCharacterBar === 'boolean' ? parsed.showCharacterBar : defaultSettings.showCharacterBar,\n        backgroundBlur: typeof parsed.backgroundBlur === 'number' ? parsed.backgroundBlur : defaultSettings.backgroundBlur,\n        allowCustomOptions: typeof parsed.allowCustomOptions === 'boolean' ? parsed.allowCustomOptions : defaultSettings.allowCustomOptions,\n    };\n}\n// 从 localStorage 加载设置\nfunction loadSettings() {\n    try {\n        const saved = localStorage.getItem('gochiusa-game-settings');\n        if (saved) {\n            const parsed = JSON.parse(saved);\n            return normalizeSettings(parsed);\n        }\n    }\n    catch (e) {\n        console.warn('[设置] 加载设置失败:', e);\n    }\n    return { ...defaultSettings };\n}\nexport const useSettingsStore = defineStore('settings', () => {\n    const settings = ref(loadSettings());\n    // 更新设置\n    function updateSettings(newSettings) {\n        settings.value = { ...settings.value, ...newSettings };\n        saveSettings();\n    }\n    // 重置设置\n    function resetSettings() {\n        settings.value = { ...defaultSettings };\n        saveSettings();\n    }\n    // 保存设置到 localStorage\n    function saveSettings() {\n        try {\n            localStorage.setItem('gochiusa-game-settings', JSON.stringify(settings.value));\n        }\n        catch (e) {\n            console.warn('[设置] 保存设置失败:', e);\n        }\n    }\n    // 监听变化自动保存\n    watchEffect(() => {\n        saveSettings();\n    });\n    return {\n        settings,\n        updateSettings,\n        resetSettings,\n    };\n});\n","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeStyle as _normalizeStyle, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = { class: \"character-detail\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"loading-state\"\n};\nconst _hoisted_3 = { class: \"detail-content\" };\nconst _hoisted_4 = { class: \"portrait-section\" };\nconst _hoisted_5 = [\"src\", \"alt\"];\nconst _hoisted_6 = {\n    key: 1,\n    class: \"portrait-placeholder\"\n};\nconst _hoisted_7 = { class: \"character-name\" };\nconst _hoisted_8 = { class: \"status-section\" };\nconst _hoisted_9 = { class: \"status-item\" };\nconst _hoisted_10 = { class: \"status-value\" };\nconst _hoisted_11 = { class: \"status-item\" };\nconst _hoisted_12 = { class: \"status-value\" };\nconst _hoisted_13 = { class: \"status-item\" };\nconst _hoisted_14 = { class: \"status-value\" };\nconst _hoisted_15 = {\n    key: 0,\n    class: \"items-section\"\n};\nconst _hoisted_16 = { class: \"items-list\" };\nconst _hoisted_17 = { class: \"item-info\" };\nconst _hoisted_18 = { class: \"item-name\" };\nconst _hoisted_19 = { class: \"item-desc\" };\nconst _hoisted_20 = { class: \"item-count\" };\nimport { useRoute, useRouter } from 'vue-router';\nimport { CHARACTER_COLOR_MAP, CHARACTER_NAME_MAP, useCharacterStore } from '../stores/characterStore';\n\nimport { computed, ref, onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CharacterDetail',\n    setup(__props) {\n        const router = useRouter();\n        const route = useRoute();\n        const characterStore = useCharacterStore();\n        const characterName = computed(() => {\n            const name = route.params.name;\n            return decodeURIComponent(name);\n        });\n        const characterData = computed(() => {\n            return characterStore.getCharacterData(characterName.value);\n        });\n        const portraitUrl = computed(() => {\n            const fileName = CHARACTER_NAME_MAP[characterName.value];\n            if (fileName) {\n                return `https://files.catbox.moe/${fileName}.png`;\n            }\n            return '';\n        });\n        const characterColor = computed(() => {\n            return CHARACTER_COLOR_MAP[characterName.value] || 'var(--text-primary)';\n        });\n        const hasItems = computed(() => {\n            return characterData.value?.关键物品 && Object.keys(characterData.value.关键物品).length > 0;\n        });\n        const isLoading = ref(true);\n        onMounted(async () => {\n            await characterStore.refreshData();\n            isLoading.value = false;\n        });\n        function goBack() {\n            router.push('/game');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header \"),\n                _createElementVNode(\"header\", { class: \"detail-header\" }, [\n                    _createElementVNode(\"button\", {\n                        class: \"back-btn\",\n                        onClick: goBack\n                    }, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-arrow-left\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[1] || (_cache[1] = _createElementVNode(\"h1\", { class: \"header-title\" }, \"角色详情\", -1 /* CACHED */))\n                ]),\n                _createCommentVNode(\" Loading State \"),\n                (_unref(isLoading))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[2] || (_cache[2] = [\n                            _createElementVNode(\"div\", { class: \"loading-spinner\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"加载中...\", -1 /* CACHED */)\n                        ]))]))\n                    : (_unref(characterData))\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\" Content \"),\n                            _createElementVNode(\"main\", _hoisted_3, [\n                                _createCommentVNode(\" Portrait Section \"),\n                                _createElementVNode(\"div\", _hoisted_4, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"portrait-container\",\n                                        style: _normalizeStyle({ '--character-color': _unref(characterColor) })\n                                    }, [\n                                        (_unref(portraitUrl))\n                                            ? (_openBlock(), _createElementBlock(\"img\", {\n                                                key: 0,\n                                                src: _unref(portraitUrl),\n                                                alt: _unref(characterName),\n                                                class: \"portrait-image\"\n                                            }, null, 8 /* PROPS */, _hoisted_5))\n                                            : (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n                                                _createElementVNode(\"span\", null, _toDisplayString(_unref(characterName)?.charAt(0)), 1 /* TEXT */)\n                                            ]))\n                                    ], 4 /* STYLE */),\n                                    _createElementVNode(\"h2\", _hoisted_7, _toDisplayString(_unref(characterName)), 1 /* TEXT */)\n                                ]),\n                                _createCommentVNode(\" Status Section \"),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _cache[3] || (_cache[3] = _createElementVNode(\"i\", { class: \"fa-solid fa-location-dot\" }, null, -1 /* CACHED */)),\n                                        _cache[4] || (_cache[4] = _createElementVNode(\"span\", { class: \"status-label\" }, \"位置\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_10, _toDisplayString(_unref(characterData).当前位置 || '未知'), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[5] || (_cache[5] = _createElementVNode(\"i\", { class: \"fa-solid fa-face-smile\" }, null, -1 /* CACHED */)),\n                                        _cache[6] || (_cache[6] = _createElementVNode(\"span\", { class: \"status-label\" }, \"心情\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_12, _toDisplayString(_unref(characterData).心情状态 || '未知'), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_13, [\n                                        _cache[7] || (_cache[7] = _createElementVNode(\"i\", { class: \"fa-solid fa-shirt\" }, null, -1 /* CACHED */)),\n                                        _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"status-label\" }, \"着装\", -1 /* CACHED */)),\n                                        _createElementVNode(\"span\", _hoisted_14, _toDisplayString(_unref(characterData).着装 || '未知'), 1 /* TEXT */)\n                                    ])\n                                ]),\n                                _createCommentVNode(\" Items Section \"),\n                                (_unref(hasItems))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [\n                                        _cache[10] || (_cache[10] = _createElementVNode(\"h3\", { class: \"section-title\" }, [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-box\" }),\n                                            _createTextVNode(\" 关键物品 \")\n                                        ], -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_16, [\n                                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(characterData).关键物品, (item, name) => {\n                                                return (_openBlock(), _createElementBlock(\"div\", {\n                                                    key: name,\n                                                    class: \"item-card\"\n                                                }, [\n                                                    _cache[9] || (_cache[9] = _createElementVNode(\"div\", { class: \"item-icon\" }, [\n                                                        _createElementVNode(\"i\", { class: \"fa-solid fa-cube\" })\n                                                    ], -1 /* CACHED */)),\n                                                    _createElementVNode(\"div\", _hoisted_17, [\n                                                        _createElementVNode(\"span\", _hoisted_18, _toDisplayString(name), 1 /* TEXT */),\n                                                        _createElementVNode(\"span\", _hoisted_19, _toDisplayString(item.描述), 1 /* TEXT */)\n                                                    ]),\n                                                    _createElementVNode(\"span\", _hoisted_20, \"x\" + _toDisplayString(item.数量), 1 /* TEXT */)\n                                                ]));\n                                            }), 128 /* KEYED_FRAGMENT */))\n                                        ])\n                                    ]))\n                                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                                        _createCommentVNode(\" Empty Items \"),\n                                        _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"empty-items\" }, [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-box-open\" }),\n                                            _createElementVNode(\"span\", null, \"暂无关键物品\")\n                                        ], -1 /* CACHED */))\n                                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                            ])\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                            _createCommentVNode(\" Error State \"),\n                            _createElementVNode(\"div\", { class: \"error-state\" }, [\n                                _cache[12] || (_cache[12] = _createElementVNode(\"i\", { class: \"fa-solid fa-user-slash\" }, null, -1 /* CACHED */)),\n                                _cache[13] || (_cache[13] = _createElementVNode(\"p\", null, \"未找到角色信息\", -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"btn btn-primary\",\n                                    onClick: goBack\n                                }, \"返回\")\n                            ])\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CharacterDetail.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CharacterDetail.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CharacterDetail.vue?vue&type=style&index=0&id=51a64c23&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-51a64c23\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, normalizeStyle as _normalizeStyle } from \"vue\";\n\nimport { ref } from 'vue';\nconst _hoisted_1 = { class: \"avatar-image\" };\nconst _hoisted_2 = [\"src\", \"alt\"];\nconst _hoisted_3 = {\n    key: 1,\n    class: \"avatar-placeholder\"\n};\nconst _hoisted_4 = { class: \"avatar-info\" };\nconst _hoisted_5 = { class: \"avatar-name\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CharacterAvatar',\n    props: {\n        name: {\n            type: String,\n            required: true,\n        },\n        portraitUrl: {\n            type: String,\n            default: '',\n        },\n        color: {\n            type: String,\n            default: 'var(--text-primary)',\n        },\n        size: {\n            type: String,\n            default: 'medium',\n        },\n    },\n    emits: [\"click\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const imageError = ref(false);\n        function handleClick() {\n            emit('click', props.name);\n        }\n        function handleImageError() {\n            imageError.value = true;\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"character-avatar\",\n                style: _normalizeStyle({ '--character-color': __props.color }),\n                onClick: handleClick\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    (__props.portraitUrl)\n                        ? (_openBlock(), _createElementBlock(\"img\", {\n                            key: 0,\n                            src: __props.portraitUrl,\n                            alt: __props.name,\n                            onError: handleImageError\n                        }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_2))\n                        : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                            _createElementVNode(\"span\", null, _toDisplayString(__props.name.charAt(0)), 1 /* TEXT */)\n                        ]))\n                ]),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(__props.name), 1 /* TEXT */)\n                ]),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"avatar-ring\" }, null, -1 /* CACHED */))\n            ], 4 /* STYLE */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CharacterAvatar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CharacterAvatar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CharacterAvatar.vue?vue&type=style&index=0&id=1087129c&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-1087129c\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, vShow as _vShow, withDirectives as _withDirectives, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"header-left\" };\nconst _hoisted_2 = { class: \"character-count\" };\nconst _hoisted_3 = { class: \"bar-content\" };\nconst _hoisted_4 = { class: \"characters-list\" };\nconst _hoisted_5 = {\n    key: 0,\n    class: \"empty-state\"\n};\nimport { CHARACTER_COLOR_MAP, CHARACTER_NAME_MAP } from '../stores/characterStore';\nimport CharacterAvatar from './CharacterAvatar.vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CharacterBar',\n    props: {\n        collapsed: {\n            type: Boolean,\n            default: false,\n        },\n        characters: {\n            type: Array,\n            default: () => [],\n        },\n    },\n    emits: [\"toggle\", \"selectCharacter\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        function toggle() {\n            emit('toggle');\n        }\n        function handleSelect(name) {\n            emit('selectCharacter', name);\n        }\n        function getPortraitUrl(name) {\n            const fileName = CHARACTER_NAME_MAP[name];\n            if (fileName) {\n                // 返回相对路径\n                return `https://files.catbox.moe/${fileName}.png`;\n            }\n            return '';\n        }\n        function getCharacterColor(name) {\n            return CHARACTER_COLOR_MAP[name] || 'var(--text-primary)';\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"character-bar\", { collapsed: __props.collapsed }])\n            }, [\n                _createElementVNode(\"div\", {\n                    class: \"bar-header\",\n                    onClick: toggle\n                }, [\n                    _createElementVNode(\"div\", _hoisted_1, [\n                        _cache[0] || (_cache[0] = _createElementVNode(\"i\", { class: \"fa-solid fa-users\" }, null, -1 /* CACHED */)),\n                        _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"header-title\" }, \"当前场景角色\", -1 /* CACHED */)),\n                        _createElementVNode(\"span\", _hoisted_2, _toDisplayString(__props.characters.length), 1 /* TEXT */)\n                    ]),\n                    _createElementVNode(\"i\", {\n                        class: _normalizeClass([\"fa-solid toggle-icon\", __props.collapsed ? 'fa-chevron-up' : 'fa-chevron-down'])\n                    }, null, 2 /* CLASS */)\n                ]),\n                _createVNode(_Transition, {\n                    name: \"expand\",\n                    persisted: \"\"\n                }, {\n                    default: _withCtx(() => [\n                        _withDirectives(_createElementVNode(\"div\", _hoisted_3, [\n                            _createElementVNode(\"div\", _hoisted_4, [\n                                (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.characters, (name) => {\n                                    return (_openBlock(), _createBlock(CharacterAvatar, {\n                                        key: name,\n                                        name: name,\n                                        \"portrait-url\": getPortraitUrl(name),\n                                        color: getCharacterColor(name),\n                                        onClick: ($event) => (handleSelect(name))\n                                    }, null, 8 /* PROPS */, [\"name\", \"portrait-url\", \"color\", \"onClick\"]));\n                                }), 128 /* KEYED_FRAGMENT */))\n                            ]),\n                            (__props.characters.length === 0)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [...(_cache[2] || (_cache[2] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-user-slash\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"暂无角色\", -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ], 512 /* NEED_PATCH */), [\n                            [_vShow, !__props.collapsed]\n                        ])\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CharacterBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CharacterBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CharacterBar.vue?vue&type=style&index=0&id=5418ed96&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5418ed96\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\n\nimport { ref, computed, watch } from 'vue';\nconst _hoisted_1 = { class: \"message-display\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"loading-state\"\n};\nconst _hoisted_3 = [\"innerHTML\"];\nconst _hoisted_4 = {\n    key: 1,\n    class: \"options-hint\"\n};\nconst _hoisted_5 = [\"innerHTML\"];\nconst _hoisted_6 = {\n    key: 0,\n    class: \"generating-indicator\"\n};\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'MessageDisplay',\n    props: {\n        message: {\n            type: String,\n            default: '',\n        },\n        messageId: {\n            type: Number,\n            default: 0,\n        },\n        displayMode: {\n            type: String,\n            default: 'card',\n        },\n    },\n    setup(__props) {\n        const props = __props;\n        const contentRef = ref(null);\n        const isLoading = ref(false);\n        const isGenerating = ref(false);\n        // 解析消息内容\n        const optionsStartIndex = computed(() => {\n            return props.message.lastIndexOf('<roleplay_options>');\n        });\n        const optionsEndIndex = computed(() => {\n            return props.message.lastIndexOf('</roleplay_options>');\n        });\n        const hasOptions = computed(() => {\n            return optionsStartIndex.value !== -1;\n        });\n        const mainContent = computed(() => {\n            if (!props.message)\n                return '';\n            if (optionsStartIndex.value === -1)\n                return props.message.trim();\n            return props.message.slice(0, optionsStartIndex.value).trim();\n        });\n        const afterContent = computed(() => {\n            if (!props.message || optionsEndIndex.value === -1)\n                return '';\n            return props.message.slice(optionsEndIndex.value + 19).trim();\n        });\n        // 格式化内容\n        const formattedMainContent = computed(() => {\n            if (!mainContent.value)\n                return '';\n            return formatMessage(mainContent.value);\n        });\n        const formattedAfterContent = computed(() => {\n            if (!afterContent.value)\n                return '';\n            return formatMessage(afterContent.value);\n        });\n        // 格式化消息内容\n        function formatMessage(content) {\n            // 使用酒馆助手的格式化函数\n            let formatted = formatAsDisplayedMessage(content, {\n                message_id: props.messageId,\n            });\n            // 应用角色颜色\n            formatted = applyCharacterColors(formatted);\n            return formatted;\n        }\n        // 应用角色颜色\n        function applyCharacterColors(html) {\n            const characterNames = [\n                '保登心爱',\n                '香风智乃',\n                '天天座理世',\n                '宇治松千夜',\n                '桐间纱路',\n                '条河麻耶',\n                '奈津惠',\n                '风衣叶冬优',\n                '神沙夏明',\n                '神沙映月',\n                '狩手结良',\n                '青山蓝山',\n                '真手凛',\n                '保登摩卡',\n            ];\n            let result = html;\n            characterNames.forEach(name => {\n                const color = getCharacterColor(name);\n                // 匹配角色名后的引号内容\n                const regex = new RegExp(`(${name})[\"「『]([^\"」』]+)[\"」』]`, 'g');\n                result = result.replace(regex, `<span style=\"color: ${color}; font-weight: 500;\">$1</span>\"$2\"`);\n            });\n            return result;\n        }\n        // 获取角色颜色\n        function getCharacterColor(name) {\n            const colorMap = {\n                保登心爱: 'var(--clr-cocoa)',\n                香风智乃: 'var(--clr-chino)',\n                天天座理世: 'var(--clr-rize)',\n                宇治松千夜: 'var(--clr-chiya)',\n                桐间纱路: 'var(--clr-syaro)',\n                条河麻耶: 'var(--clr-maya)',\n                奈津惠: 'var(--clr-megu)',\n                风衣叶冬优: 'var(--clr-fuyu)',\n                神沙夏明: 'var(--clr-natsume)',\n                神沙映月: 'var(--clr-eru)',\n                狩手结良: 'var(--clr-yura)',\n                青山蓝山: 'var(--clr-aoyama)',\n                真手凛: 'var(--clr-mate)',\n                保登摩卡: 'var(--clr-mocha)',\n            };\n            return colorMap[name] || 'var(--text-primary)';\n        }\n        // 监听消息变化\n        watch(() => props.message, () => {\n            // Display mode handling - card, bubble, or classic\n            // Future: implement typewriter effect based on settings.typewriterEffect\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Loading State \"),\n                (_unref(isLoading))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"div\", { class: \"loading-spinner\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"加载中...\", -1 /* CACHED */)\n                        ]))]))\n                    : (!__props.message)\n                        ? (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                            _createCommentVNode(\" Empty State \"),\n                            _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"empty-state\" }, [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-comments\" }),\n                                _createElementVNode(\"p\", null, \"等待AI回复...\")\n                            ], -1 /* CACHED */))\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n                        : (_openBlock(), _createElementBlock(_Fragment, { key: 2 }, [\n                            _createCommentVNode(\" Message Content \"),\n                            _createElementVNode(\"div\", {\n                                ref_key: \"contentRef\",\n                                ref: contentRef,\n                                class: \"message-content\"\n                            }, [\n                                _createCommentVNode(\" Main Content (before options) \"),\n                                (_unref(mainContent))\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 0,\n                                        class: \"main-text\",\n                                        innerHTML: _unref(formattedMainContent)\n                                    }, null, 8 /* PROPS */, _hoisted_3))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createCommentVNode(\" Options Section (hidden, will be extracted) \"),\n                                (_unref(hasOptions))\n                                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[2] || (_cache[2] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-list-check\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"请从下方选择一个选项\", -1 /* CACHED */)\n                                        ]))]))\n                                    : _createCommentVNode(\"v-if\", true),\n                                _createCommentVNode(\" After Options Content \"),\n                                (_unref(afterContent))\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 2,\n                                        class: \"after-text\",\n                                        innerHTML: _unref(formattedAfterContent)\n                                    }, null, 8 /* PROPS */, _hoisted_5))\n                                    : _createCommentVNode(\"v-if\", true)\n                            ], 512 /* NEED_PATCH */)\n                        ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                _createCommentVNode(\" Generating Indicator \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(isGenerating))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"div\", { class: \"typing-dots\" }, [\n                                        _createElementVNode(\"span\"),\n                                        _createElementVNode(\"span\"),\n                                        _createElementVNode(\"span\")\n                                    ], -1 /* CACHED */),\n                                    _createElementVNode(\"span\", null, \"AI 正在思考...\", -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./MessageDisplay.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./MessageDisplay.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./MessageDisplay.vue?vue&type=style&index=0&id=3cc349f6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3cc349f6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, normalizeClass as _normalizeClass } from \"vue\";\nconst _hoisted_1 = { class: \"card-content\" };\nconst _hoisted_2 = { class: \"option-header\" };\nconst _hoisted_3 = { class: \"option-title\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"fa-solid fa-pen custom-icon\"\n};\nconst _hoisted_5 = { class: \"option-content\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'OptionCard',\n    props: {\n        option: {\n            type: Object,\n            required: true,\n        },\n        disabled: {\n            type: Boolean,\n            default: false,\n        },\n    },\n    emits: [\"select\", \"remove\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        function handleClick() {\n            if (props.disabled)\n                return;\n            emit('select', props.option);\n        }\n        function handleRemove() {\n            emit('remove', props.option.id);\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: _normalizeClass([\"option-card\", { disabled: __props.disabled, custom: __props.option.isCustom }]),\n                onClick: handleClick\n            }, [\n                _createElementVNode(\"div\", _hoisted_1, [\n                    _createElementVNode(\"div\", _hoisted_2, [\n                        _createElementVNode(\"span\", _hoisted_3, [\n                            (__props.option.isCustom)\n                                ? (_openBlock(), _createElementBlock(\"i\", _hoisted_4))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createElementVNode(\"strong\", null, _toDisplayString(__props.option.title), 1 /* TEXT */)\n                        ]),\n                        (__props.option.isCustom)\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"remove-btn\",\n                                title: \"移除选项\",\n                                onClick: _withModifiers(handleRemove, [\"stop\"])\n                            }, [...(_cache[0] || (_cache[0] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _cache[1] || (_cache[1] = _createElementVNode(\"hr\", { class: \"option-divider\" }, null, -1 /* CACHED */)),\n                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(__props.option.content), 1 /* TEXT */)\n                ]),\n                _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"card-hover-effect\" }, null, -1 /* CACHED */))\n            ], 2 /* CLASS */));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./OptionCard.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OptionCard.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./OptionCard.vue?vue&type=style&index=0&id=dce11e2e&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-dce11e2e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, isRef as _isRef, vModelText as _vModelText, withKeys as _withKeys, createElementVNode as _createElementVNode, withDirectives as _withDirectives, withModifiers as _withModifiers, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\n\nimport { ref, computed } from 'vue';\nconst _hoisted_1 = { class: \"custom-option-input\" };\nconst _hoisted_2 = { class: \"input-group\" };\nconst _hoisted_3 = { class: \"input-group\" };\nconst _hoisted_4 = [\"onKeyup\"];\nconst _hoisted_5 = { class: \"char-count\" };\nconst _hoisted_6 = { class: \"input-actions\" };\nconst _hoisted_7 = [\"disabled\"];\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'CustomOptionInput',\n    emits: [\"submit\", \"cancel\"],\n    setup(__props, { emit: __emit }) {\n        const emit = __emit;\n        const title = ref('');\n        const content = ref('');\n        const canSubmit = computed(() => content.value.trim().length > 0);\n        function submit() {\n            if (!canSubmit.value)\n                return;\n            emit('submit', title.value.trim() || '自定义行动', content.value.trim());\n            reset();\n        }\n        function cancel() {\n            reset();\n            emit('cancel');\n        }\n        function reset() {\n            title.value = '';\n            content.value = '';\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => (_isRef(title) ? (title).value = $event : null)),\n                        type: \"text\",\n                        class: \"input-field title-input\",\n                        placeholder: \"选项标题（可选）\",\n                        maxlength: \"50\",\n                        onKeyup: _withKeys(submit, [\"enter\"])\n                    }, null, 544 /* NEED_HYDRATION, NEED_PATCH */), [\n                        [_vModelText, _unref(title)]\n                    ])\n                ]),\n                _createElementVNode(\"div\", _hoisted_3, [\n                    _withDirectives(_createElementVNode(\"textarea\", {\n                        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => (_isRef(content) ? (content).value = $event : null)),\n                        class: \"input-field content-input\",\n                        placeholder: \"输入你的行动内容...\",\n                        rows: \"3\",\n                        maxlength: \"500\",\n                        onKeyup: _withKeys(_withModifiers(submit, [\"ctrl\"]), [\"enter\"])\n                    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_4), [\n                        [_vModelText, _unref(content)]\n                    ]),\n                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(_unref(content).length) + \"/500\", 1 /* TEXT */)\n                ]),\n                _createElementVNode(\"div\", _hoisted_6, [\n                    _createElementVNode(\"button\", {\n                        class: \"btn btn-ghost cancel-btn\",\n                        onClick: cancel\n                    }, [...(_cache[2] || (_cache[2] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"取消\", -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"btn btn-primary submit-btn\",\n                        disabled: !_unref(canSubmit),\n                        onClick: submit\n                    }, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-check\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"添加\", -1 /* CACHED */)\n                        ]))], 8 /* PROPS */, _hoisted_7)\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./CustomOptionInput.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CustomOptionInput.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./CustomOptionInput.vue?vue&type=style&index=0&id=b810ab60&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b810ab60\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, createBlock as _createBlock, TransitionGroup as _TransitionGroup, withCtx as _withCtx, createVNode as _createVNode, createElementVNode as _createElementVNode, Transition as _Transition } from \"vue\";\nconst _hoisted_1 = { class: \"options-panel\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"custom-option-section\"\n};\nconst _hoisted_3 = {\n    key: 1,\n    class: \"empty-options\"\n};\nconst _hoisted_4 = {\n    key: 0,\n    class: \"hint\"\n};\nimport { useGameStore } from '../stores/gameStore';\nimport OptionCard from './OptionCard.vue';\nimport CustomOptionInput from './CustomOptionInput.vue';\n\nimport { ref, computed } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'OptionsPanel',\n    props: {\n        options: {\n            type: Array,\n            default: () => [],\n        },\n        allowCustom: {\n            type: Boolean,\n            default: true,\n        },\n    },\n    emits: [\"select\"],\n    setup(__props, { emit: __emit }) {\n        const props = __props;\n        const emit = __emit;\n        const gameStore = useGameStore();\n        const isAddingCustom = ref(false);\n        const isDisabled = computed(() => gameStore.isGenerating);\n        function handleSelect(option) {\n            if (isDisabled.value)\n                return;\n            emit('select', option);\n        }\n        function handleRemove(optionId) {\n            gameStore.removeOption(optionId);\n        }\n        function startAddingCustom() {\n            isAddingCustom.value = true;\n        }\n        function cancelAddingCustom() {\n            isAddingCustom.value = false;\n        }\n        function handleCustomSubmit(title, content) {\n            gameStore.addCustomOption(title, content);\n            isAddingCustom.value = false;\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Options List \"),\n                _createVNode(_TransitionGroup, {\n                    name: \"option-list\",\n                    tag: \"div\",\n                    class: \"options-list\"\n                }, {\n                    default: _withCtx(() => [\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.options, (option) => {\n                            return (_openBlock(), _createBlock(OptionCard, {\n                                key: option.id,\n                                option: option,\n                                disabled: _unref(isDisabled),\n                                onSelect: handleSelect,\n                                onRemove: handleRemove\n                            }, null, 8 /* PROPS */, [\"option\", \"disabled\"]));\n                        }), 128 /* KEYED_FRAGMENT */))\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Custom Option Input \"),\n                (__props.allowCustom)\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _createVNode(_Transition, { name: \"expand\" }, {\n                            default: _withCtx(() => [\n                                (!_unref(isAddingCustom))\n                                    ? (_openBlock(), _createElementBlock(\"div\", {\n                                        key: 0,\n                                        class: \"add-custom-btn\",\n                                        onClick: startAddingCustom\n                                    }, [...(_cache[0] || (_cache[0] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */),\n                                            _createElementVNode(\"span\", null, \"添加自定义选项\", -1 /* CACHED */)\n                                        ]))]))\n                                    : (_openBlock(), _createBlock(CustomOptionInput, {\n                                        key: 1,\n                                        onSubmit: handleCustomSubmit,\n                                        onCancel: cancelAddingCustom\n                                    }))\n                            ]),\n                            _: 1 /* STABLE */\n                        })\n                    ]))\n                    : _createCommentVNode(\"v-if\", true),\n                _createCommentVNode(\" Empty State \"),\n                (__props.options.length === 0 && !_unref(isAddingCustom))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n                        _cache[1] || (_cache[1] = _createElementVNode(\"i\", { class: \"fa-solid fa-hand-pointer\" }, null, -1 /* CACHED */)),\n                        _cache[2] || (_cache[2] = _createElementVNode(\"p\", null, \"暂无可选选项\", -1 /* CACHED */)),\n                        (__props.allowCustom)\n                            ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, \"点击上方按钮添加自定义行动\"))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]))\n                    : _createCommentVNode(\"v-if\", true)\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./OptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./OptionsPanel.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./OptionsPanel.vue?vue&type=style&index=0&id=4fcc2ca1&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4fcc2ca1\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, unref as _unref, normalizeClass as _normalizeClass, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"top-nav-bar\" };\nconst _hoisted_2 = { class: \"nav-right\" };\nconst _hoisted_3 = [\"title\"];\nconst _hoisted_4 = {\n    key: 0,\n    class: \"menu-dropdown\"\n};\nimport { useRouter } from 'vue-router';\nimport { useGameStore } from '../stores/gameStore';\n\nimport { ref, onMounted, onUnmounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'TopNavBar',\n    setup(__props) {\n        const router = useRouter();\n        const gameStore = useGameStore();\n        const isMenuOpen = ref(false);\n        function toggleMenu() {\n            isMenuOpen.value = !isMenuOpen.value;\n        }\n        function closeMenu() {\n            isMenuOpen.value = false;\n        }\n        function goToHistory() {\n            closeMenu();\n            router.push('/history');\n        }\n        function goToWorldbook() {\n            closeMenu();\n            router.push('/worldbook');\n        }\n        function goToSettings() {\n            closeMenu();\n            router.push('/settings');\n        }\n        function goToStart() {\n            closeMenu();\n            router.push('/');\n        }\n        function toggleFullscreen() {\n            gameStore.toggleFullscreen();\n        }\n        // 点击外部关闭菜单\n        onMounted(() => {\n            document.addEventListener('click', handleOutsideClick);\n        });\n        onUnmounted(() => {\n            document.removeEventListener('click', handleOutsideClick);\n        });\n        function handleOutsideClick(e) {\n            const target = e.target;\n            if (!target.closest('.top-nav-bar')) {\n                closeMenu();\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"header\", _hoisted_1, [\n                _createElementVNode(\"div\", { class: \"nav-left\" }, [\n                    _createElementVNode(\"button\", {\n                        class: \"nav-btn menu-btn\",\n                        title: \"菜单\",\n                        onClick: toggleMenu\n                    }, [...(_cache[0] || (_cache[0] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-bars\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[1] || (_cache[1] = _createElementVNode(\"span\", { class: \"nav-title\" }, \"点兔同层前端\", -1 /* CACHED */))\n                ]),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"button\", {\n                        class: \"nav-btn\",\n                        title: \"历史消息\",\n                        onClick: goToHistory\n                    }, [...(_cache[2] || (_cache[2] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-clock-rotate-left\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"nav-btn\",\n                        title: \"世界书管理\",\n                        onClick: goToWorldbook\n                    }, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"nav-btn\",\n                        title: \"设置\",\n                        onClick: goToSettings\n                    }, [...(_cache[4] || (_cache[4] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-gear\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _createElementVNode(\"button\", {\n                        class: \"nav-btn\",\n                        title: _unref(gameStore).isFullscreen ? '退出全屏' : '全屏',\n                        onClick: toggleFullscreen\n                    }, [\n                        _createElementVNode(\"i\", {\n                            class: _normalizeClass(_unref(gameStore).isFullscreen ? 'fa-solid fa-compress' : 'fa-solid fa-expand')\n                        }, null, 2 /* CLASS */)\n                    ], 8 /* PROPS */, _hoisted_3)\n                ]),\n                _createCommentVNode(\" Menu Dropdown \"),\n                _createVNode(_Transition, { name: \"dropdown\" }, {\n                    default: _withCtx(() => [\n                        (_unref(isMenuOpen))\n                            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                                _createElementVNode(\"button\", {\n                                    class: \"menu-item\",\n                                    onClick: goToHistory\n                                }, [...(_cache[5] || (_cache[5] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-clock-rotate-left\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"历史消息\", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: \"menu-item\",\n                                    onClick: goToWorldbook\n                                }, [...(_cache[6] || (_cache[6] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-book\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"世界书管理\", -1 /* CACHED */)\n                                    ]))]),\n                                _createElementVNode(\"button\", {\n                                    class: \"menu-item\",\n                                    onClick: goToSettings\n                                }, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-gear\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"设置\", -1 /* CACHED */)\n                                    ]))]),\n                                _cache[9] || (_cache[9] = _createElementVNode(\"hr\", { class: \"menu-divider\" }, null, -1 /* CACHED */)),\n                                _createElementVNode(\"button\", {\n                                    class: \"menu-item\",\n                                    onClick: goToStart\n                                }, [...(_cache[8] || (_cache[8] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-house\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"span\", null, \"返回首页\", -1 /* CACHED */)\n                                    ]))])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                }),\n                _createCommentVNode(\" Overlay \"),\n                _createVNode(_Transition, { name: \"fade\" }, {\n                    default: _withCtx(() => [\n                        (_unref(isMenuOpen))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"menu-overlay\",\n                                onClick: closeMenu\n                            }))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./TopNavBar.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TopNavBar.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TopNavBar.vue?vue&type=style&index=0&id=0d4c7aa6&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-0d4c7aa6\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createVNode as _createVNode, unref as _unref, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = { class: \"game-main\" };\nconst _hoisted_2 = { class: \"main-content\" };\nimport { useRouter } from 'vue-router';\nimport { useCharacterStore } from '../stores/characterStore';\nimport { useGameStore } from '../stores/gameStore';\nimport { useSettingsStore } from '../stores/settingsStore';\nimport CharacterBar from './CharacterBar.vue';\nimport MessageDisplay from './MessageDisplay.vue';\nimport OptionsPanel from './OptionsPanel.vue';\nimport TopNavBar from './TopNavBar.vue';\n\nimport { onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'GameMain',\n    setup(__props) {\n        const router = useRouter();\n        const gameStore = useGameStore();\n        const settingsStore = useSettingsStore();\n        const characterStore = useCharacterStore();\n        // 初始化数据\n        onMounted(async () => {\n            await initializeGame();\n        });\n        async function initializeGame() {\n            try {\n                // 刷新角色数据\n                await characterStore.refreshData();\n                // 获取当前消息\n                await loadCurrentMessage();\n                // 更新当前场景角色\n                const characters = characterStore.getCurrentSceneCharacters();\n                gameStore.updateCurrentCharacters(characters);\n                console.info('[游戏主页面] 初始化完成');\n            }\n            catch (e) {\n                console.error('[游戏主页面] 初始化失败:', e);\n            }\n        }\n        // 加载当前消息\n        async function loadCurrentMessage() {\n            try {\n                // 获取最后一条AI消息\n                const lastMessageId = SillyTavern.chat.length - 1;\n                const messages = getChatMessages(lastMessageId);\n                if (messages.length > 0) {\n                    const msg = messages[0];\n                    if (msg.role === 'assistant') {\n                        gameStore.updateMessage(msg.message, lastMessageId);\n                        // 解析选项\n                        const options = parseOptions(msg.message);\n                        gameStore.updateOptions(options);\n                    }\n                }\n            }\n            catch (e) {\n                console.error('[游戏主页面] 加载消息失败:', e);\n            }\n        }\n        // 解析选项\n        function parseOptions(message) {\n            const optionsMatch = message.match(/<roleplay_options>(.*?)<\\/roleplay_options>/s);\n            if (!optionsMatch)\n                return [];\n            const text = optionsMatch[1];\n            const itemMatches = [...text.matchAll(/(.+?)[:：]\\s*(.+)/gm)];\n            return itemMatches.map((match, index) => ({\n                id: `option-${index}`,\n                title: match[1],\n                content: match[2].replace(/^\\$\\{(.+)\\}$/, '$1').replace(/^「(.+)」$/, '$1'),\n                isCustom: false,\n            }));\n        }\n        // 处理选项选择\n        async function handleSelectOption(option) {\n            if (gameStore.isGenerating)\n                return;\n            gameStore.setGenerating(true);\n            try {\n                // 在酒馆中创建用户消息\n                await createChatMessages([\n                    {\n                        role: 'user',\n                        message: option.content,\n                    },\n                ]);\n                // 触发AI生成\n                await triggerSlash('/trigger');\n                // 等待消息渲染完成后刷新\n                await new Promise(resolve => setTimeout(resolve, 500));\n                await loadCurrentMessage();\n                await characterStore.refreshData();\n                // 更新当前场景角色\n                const characters = characterStore.getCurrentSceneCharacters();\n                gameStore.updateCurrentCharacters(characters);\n            }\n            catch (e) {\n                console.error('[游戏主页面] 发送选项失败:', e);\n                toastr.error('发送失败，请重试');\n            }\n            finally {\n                gameStore.setGenerating(false);\n            }\n        }\n        // 处理角色选择\n        function handleSelectCharacter(name) {\n            gameStore.selectCharacter(name);\n            router.push(`/character/${encodeURIComponent(name)}`);\n        }\n        // 监听消息变化\n        eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED, async (messageId) => {\n            if (messageId === gameStore.currentMessageId) {\n                await loadCurrentMessage();\n                await characterStore.refreshData();\n            }\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Top Navigation Bar \"),\n                _createVNode(TopNavBar),\n                _createCommentVNode(\" Main Content Area \"),\n                _createElementVNode(\"main\", _hoisted_2, [\n                    _createCommentVNode(\" Message Display Area \"),\n                    _createVNode(MessageDisplay, {\n                        message: _unref(gameStore).currentMessage,\n                        \"message-id\": _unref(gameStore).currentMessageId,\n                        \"display-mode\": _unref(settingsStore).settings.messageDisplayMode\n                    }, null, 8 /* PROPS */, [\"message\", \"message-id\", \"display-mode\"]),\n                    _createCommentVNode(\" Options Panel \"),\n                    _createVNode(OptionsPanel, {\n                        options: _unref(gameStore).options,\n                        \"allow-custom\": _unref(settingsStore).settings.allowCustomOptions,\n                        onSelect: handleSelectOption\n                    }, null, 8 /* PROPS */, [\"options\", \"allow-custom\"])\n                ]),\n                _createCommentVNode(\" Character Bar (Collapsible) \"),\n                _createVNode(CharacterBar, {\n                    collapsed: _unref(gameStore).isCharacterBarCollapsed,\n                    characters: _unref(gameStore).currentCharacters,\n                    onToggle: _unref(gameStore).toggleCharacterBar,\n                    onSelectCharacter: handleSelectCharacter\n                }, null, 8 /* PROPS */, [\"collapsed\", \"characters\", \"onToggle\"])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./GameMain.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./GameMain.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./GameMain.vue?vue&type=style&index=0&id=43790ed8&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-43790ed8\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, isRef as _isRef, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = { class: \"history-messages\" };\nconst _hoisted_2 = { class: \"search-section\" };\nconst _hoisted_3 = { class: \"search-input-wrapper\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"loading-state\"\n};\nconst _hoisted_5 = { class: \"messages-list\" };\nconst _hoisted_6 = [\"onClick\"];\nconst _hoisted_7 = { class: \"message-info\" };\nconst _hoisted_8 = { class: \"message-header\" };\nconst _hoisted_9 = { class: \"message-role\" };\nconst _hoisted_10 = { class: \"message-id\" };\nconst _hoisted_11 = { class: \"message-preview\" };\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = {\n    key: 1,\n    class: \"empty-state\"\n};\nimport { useRouter } from 'vue-router';\n\nimport { ref, computed, onMounted } from 'vue';\nconst pageSize = 20;\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'HistoryMessages',\n    setup(__props) {\n        const router = useRouter();\n        const searchQuery = ref('');\n        const isLoading = ref(true);\n        const isLoadingMore = ref(false);\n        const messages = ref([]);\n        const hasMore = ref(true);\n        const currentPage = ref(0);\n        const filteredMessages = computed(() => {\n            if (!searchQuery.value)\n                return messages.value;\n            const query = searchQuery.value.toLowerCase();\n            return messages.value.filter(msg => msg.preview.toLowerCase().includes(query));\n        });\n        async function loadMessages() {\n            isLoading.value = true;\n            try {\n                const chatLength = SillyTavern.chat.length;\n                const start = Math.max(0, chatLength - (currentPage.value + 1) * pageSize);\n                const end = chatLength - currentPage.value * pageSize;\n                const newMessages = [];\n                for (let i = end - 1; i >= start; i--) {\n                    const msg = getChatMessages(i)[0];\n                    if (msg) {\n                        newMessages.push({\n                            id: i,\n                            role: msg.role,\n                            preview: truncateText(msg.message, 100),\n                            fullContent: msg.message,\n                        });\n                    }\n                }\n                messages.value = [...messages.value, ...newMessages];\n                hasMore.value = start > 0;\n            }\n            catch (e) {\n                console.error('[历史消息] 加载失败:', e);\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        async function loadMore() {\n            if (isLoadingMore.value || !hasMore.value)\n                return;\n            isLoadingMore.value = true;\n            currentPage.value++;\n            await loadMessages();\n            isLoadingMore.value = false;\n        }\n        function truncateText(text, maxLength) {\n            if (!text)\n                return '';\n            // 移除HTML标签\n            const cleanText = text.replace(/<[^>]*>/g, '').trim();\n            if (cleanText.length <= maxLength)\n                return cleanText;\n            return cleanText.slice(0, maxLength) + '...';\n        }\n        function getAvatarColor(role) {\n            switch (role) {\n                case 'user':\n                    return 'var(--clr-cocoa)';\n                case 'assistant':\n                    return 'var(--clr-chino)';\n                case 'system':\n                    return 'var(--text-muted)';\n                default:\n                    return 'var(--text-secondary)';\n            }\n        }\n        function getAvatarIcon(role) {\n            switch (role) {\n                case 'user':\n                    return 'fa-solid fa-user';\n                case 'assistant':\n                    return 'fa-solid fa-robot';\n                case 'system':\n                    return 'fa-solid fa-gear';\n                default:\n                    return 'fa-solid fa-message';\n            }\n        }\n        function getRoleLabel(role) {\n            switch (role) {\n                case 'user':\n                    return '用户';\n                case 'assistant':\n                    return 'AI';\n                case 'system':\n                    return '系统';\n                default:\n                    return '未知';\n            }\n        }\n        function viewMessage(id) {\n            // 使用 /chat-jump 跳转到指定消息\n            triggerSlash(`/chat-jump ${id}`);\n            router.push('/game');\n        }\n        function clearSearch() {\n            searchQuery.value = '';\n        }\n        function goBack() {\n            router.push('/game');\n        }\n        onMounted(() => {\n            loadMessages();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header \"),\n                _createElementVNode(\"header\", { class: \"history-header\" }, [\n                    _createElementVNode(\"button\", {\n                        class: \"back-btn\",\n                        onClick: goBack\n                    }, [...(_cache[1] || (_cache[1] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-arrow-left\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[2] || (_cache[2] = _createElementVNode(\"h1\", { class: \"header-title\" }, \"历史消息\", -1 /* CACHED */))\n                ]),\n                _createCommentVNode(\" Search Bar \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[4] || (_cache[4] = _createElementVNode(\"i\", { class: \"fa-solid fa-search\" }, null, -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => (_isRef(searchQuery) ? (searchQuery).value = $event : null)),\n                            type: \"text\",\n                            class: \"search-input\",\n                            placeholder: \"搜索消息内容...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(searchQuery)]\n                        ]),\n                        (_unref(searchQuery))\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"clear-btn\",\n                                onClick: clearSearch\n                            }, [...(_cache[3] || (_cache[3] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\" Loading State \"),\n                (_unref(isLoading))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[5] || (_cache[5] = [\n                            _createElementVNode(\"div\", { class: \"loading-spinner\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"加载中...\", -1 /* CACHED */)\n                        ]))]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Messages List \"),\n                        _createElementVNode(\"main\", _hoisted_5, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredMessages), (group) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: group.id,\n                                    class: \"message-group\",\n                                    onClick: ($event) => (viewMessage(group.id))\n                                }, [\n                                    _createElementVNode(\"div\", {\n                                        class: \"message-avatar\",\n                                        style: _normalizeStyle({ backgroundColor: getAvatarColor(group.role) })\n                                    }, [\n                                        _createElementVNode(\"i\", {\n                                            class: _normalizeClass(getAvatarIcon(group.role))\n                                        }, null, 2 /* CLASS */)\n                                    ], 4 /* STYLE */),\n                                    _createElementVNode(\"div\", _hoisted_7, [\n                                        _createElementVNode(\"div\", _hoisted_8, [\n                                            _createElementVNode(\"span\", _hoisted_9, _toDisplayString(getRoleLabel(group.role)), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", _hoisted_10, \"第 \" + _toDisplayString(group.id) + \" 楼\", 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"p\", _hoisted_11, _toDisplayString(group.preview), 1 /* TEXT */)\n                                    ]),\n                                    _cache[6] || (_cache[6] = _createElementVNode(\"i\", { class: \"fa-solid fa-chevron-right arrow-icon\" }, null, -1 /* CACHED */))\n                                ], 8 /* PROPS */, _hoisted_6));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            _createCommentVNode(\" Load More \"),\n                            (_unref(hasMore))\n                                ? (_openBlock(), _createElementBlock(\"button\", {\n                                    key: 0,\n                                    class: \"load-more-btn\",\n                                    disabled: _unref(isLoadingMore),\n                                    onClick: loadMore\n                                }, [\n                                    _createElementVNode(\"i\", {\n                                        class: _normalizeClass(_unref(isLoadingMore) ? 'fa-solid fa-spinner fa-spin' : 'fa-solid fa-arrow-down')\n                                    }, null, 2 /* CLASS */),\n                                    _createElementVNode(\"span\", null, _toDisplayString(_unref(isLoadingMore) ? '加载中...' : '加载更多'), 1 /* TEXT */)\n                                ], 8 /* PROPS */, _hoisted_12))\n                                : _createCommentVNode(\"v-if\", true),\n                            _createCommentVNode(\" Empty State \"),\n                            (_unref(filteredMessages).length === 0 && !_unref(isLoading))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, [...(_cache[7] || (_cache[7] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-inbox\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"p\", null, \"暂无历史消息\", -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./HistoryMessages.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./HistoryMessages.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./HistoryMessages.vue?vue&type=style&index=0&id=7375311a&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7375311a\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, unref as _unref, vModelSelect as _vModelSelect, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeStyle as _normalizeStyle, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, vModelCheckbox as _vModelCheckbox, vModelText as _vModelText, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"settings-page\" };\nconst _hoisted_2 = { class: \"settings-content\" };\nconst _hoisted_3 = { class: \"settings-section\" };\nconst _hoisted_4 = { class: \"setting-item\" };\nconst _hoisted_5 = { class: \"setting-control\" };\nconst _hoisted_6 = { class: \"setting-item\" };\nconst _hoisted_7 = { class: \"setting-control\" };\nconst _hoisted_8 = { class: \"theme-options\" };\nconst _hoisted_9 = [\"onClick\"];\nconst _hoisted_10 = { class: \"theme-name\" };\nconst _hoisted_11 = { class: \"setting-item\" };\nconst _hoisted_12 = { class: \"setting-control\" };\nconst _hoisted_13 = { class: \"setting-item\" };\nconst _hoisted_14 = { class: \"setting-control\" };\nconst _hoisted_15 = { class: \"font-size-control\" };\nconst _hoisted_16 = { class: \"size-value\" };\nconst _hoisted_17 = { class: \"settings-section\" };\nconst _hoisted_18 = { class: \"setting-item\" };\nconst _hoisted_19 = { class: \"setting-control\" };\nconst _hoisted_20 = { class: \"toggle-switch\" };\nconst _hoisted_21 = { class: \"setting-item\" };\nconst _hoisted_22 = { class: \"setting-control\" };\nconst _hoisted_23 = { class: \"toggle-switch\" };\nconst _hoisted_24 = { class: \"settings-section\" };\nconst _hoisted_25 = { class: \"setting-item\" };\nconst _hoisted_26 = { class: \"setting-control\" };\nconst _hoisted_27 = { class: \"toggle-switch\" };\nconst _hoisted_28 = { class: \"setting-item\" };\nconst _hoisted_29 = { class: \"setting-control\" };\nconst _hoisted_30 = { class: \"toggle-switch\" };\nconst _hoisted_31 = { class: \"setting-item\" };\nconst _hoisted_32 = { class: \"setting-control\" };\nconst _hoisted_33 = { class: \"slider-control\" };\nconst _hoisted_34 = { class: \"slider-value\" };\nimport { useRouter } from 'vue-router';\nimport { useSettingsStore } from '../stores/settingsStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'SettingsPage',\n    setup(__props) {\n        const router = useRouter();\n        const settingsStore = useSettingsStore();\n        const settings = settingsStore.settings;\n        const themes = [\n            { id: 'light', name: '明亮', preview: 'linear-gradient(135deg, #fff5f5, #ffe4e6)' },\n            { id: 'dark', name: '暗黑', preview: 'linear-gradient(135deg, #1a1a2e, #16213e)' },\n            { id: 'warm', name: '暖色', preview: 'linear-gradient(135deg, #fef3c7, #fde68a)' },\n            { id: 'sakura', name: '樱花', preview: 'linear-gradient(135deg, #fce7f3, #fbcfe8)' },\n            { id: 'ocean', name: '海洋', preview: 'linear-gradient(135deg, #dbeafe, #bfdbfe)' },\n        ];\n        function setTheme(id) {\n            settings.theme = id;\n        }\n        function increaseFontSize() {\n            if (settings.fontSize < 24) {\n                settings.fontSize += 1;\n            }\n        }\n        function decreaseFontSize() {\n            if (settings.fontSize > 12) {\n                settings.fontSize -= 1;\n            }\n        }\n        function resetSettings() {\n            settingsStore.resetSettings();\n            toastr.success('设置已重置');\n        }\n        function goBack() {\n            router.push('/game');\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"header\", { class: \"settings-header\" }, [\n                    _createElementVNode(\"button\", {\n                        class: \"back-btn\",\n                        onClick: goBack\n                    }, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-arrow-left\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[8] || (_cache[8] = _createElementVNode(\"h1\", { class: \"header-title\" }, \"设置\", -1 /* CACHED */))\n                ]),\n                _createElementVNode(\"main\", _hoisted_2, [\n                    _createElementVNode(\"section\", _hoisted_3, [\n                        _cache[17] || (_cache[17] = _createElementVNode(\"h2\", { class: \"section-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-display\" }),\n                            _createTextVNode(\" 显示设置 \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_4, [\n                            _cache[10] || (_cache[10] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"消息显示模式\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"选择消息的呈现方式\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_5, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(settings).messageDisplayMode) = $event)),\n                                    class: \"setting-select\"\n                                }, [...(_cache[9] || (_cache[9] = [\n                                        _createElementVNode(\"option\", { value: \"card\" }, \"卡片模式\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"bubble\" }, \"气泡模式\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"classic\" }, \"经典模式\", -1 /* CACHED */)\n                                    ]))], 512 /* NEED_PATCH */), [\n                                    [_vModelSelect, _unref(settings).messageDisplayMode]\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[11] || (_cache[11] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"主题\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"选择界面配色方案\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(themes, (theme) => {\n                                        return _createElementVNode(\"button\", {\n                                            key: theme.id,\n                                            class: _normalizeClass([\"theme-btn\", { active: _unref(settings).theme === theme.id }]),\n                                            onClick: ($event) => (setTheme(theme.id))\n                                        }, [\n                                            _createElementVNode(\"span\", {\n                                                class: \"theme-preview\",\n                                                style: _normalizeStyle({ background: theme.preview })\n                                            }, null, 4 /* STYLE */),\n                                            _createElementVNode(\"span\", _hoisted_10, _toDisplayString(theme.name), 1 /* TEXT */)\n                                        ], 10 /* CLASS, PROPS */, _hoisted_9);\n                                    }), 64 /* STABLE_FRAGMENT */))\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_11, [\n                            _cache[13] || (_cache[13] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"字体方案\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"选择界面字体风格\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_12, [\n                                _withDirectives(_createElementVNode(\"select\", {\n                                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(settings).fontScheme) = $event)),\n                                    class: \"setting-select\"\n                                }, [...(_cache[12] || (_cache[12] = [\n                                        _createElementVNode(\"option\", { value: \"default\" }, \"默认字体\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"elegant\" }, \"优雅字体\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"modern\" }, \"现代字体\", -1 /* CACHED */),\n                                        _createElementVNode(\"option\", { value: \"classic\" }, \"经典字体\", -1 /* CACHED */)\n                                    ]))], 512 /* NEED_PATCH */), [\n                                    [_vModelSelect, _unref(settings).fontScheme]\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_13, [\n                            _cache[16] || (_cache[16] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"字体大小\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"调整界面文字大小\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_14, [\n                                _createElementVNode(\"div\", _hoisted_15, [\n                                    _createElementVNode(\"button\", {\n                                        class: \"size-btn\",\n                                        onClick: decreaseFontSize\n                                    }, [...(_cache[14] || (_cache[14] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-minus\" }, null, -1 /* CACHED */)\n                                        ]))]),\n                                    _createElementVNode(\"span\", _hoisted_16, _toDisplayString(_unref(settings).fontSize) + \"px\", 1 /* TEXT */),\n                                    _createElementVNode(\"button\", {\n                                        class: \"size-btn\",\n                                        onClick: increaseFontSize\n                                    }, [...(_cache[15] || (_cache[15] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-plus\" }, null, -1 /* CACHED */)\n                                        ]))])\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createElementVNode(\"section\", _hoisted_17, [\n                        _cache[22] || (_cache[22] = _createElementVNode(\"h2\", { class: \"section-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-wand-magic-sparkles\" }),\n                            _createTextVNode(\" 动画设置 \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_18, [\n                            _cache[19] || (_cache[19] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"启用动画\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"开启界面过渡动画效果\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_19, [\n                                _createElementVNode(\"label\", _hoisted_20, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(settings).enableAnimations) = $event)),\n                                        type: \"checkbox\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(settings).enableAnimations]\n                                    ]),\n                                    _cache[18] || (_cache[18] = _createElementVNode(\"span\", { class: \"toggle-slider\" }, null, -1 /* CACHED */))\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_21, [\n                            _cache[21] || (_cache[21] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"打字机效果\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"消息逐字显示效果\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_22, [\n                                _createElementVNode(\"label\", _hoisted_23, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(settings).typewriterEffect) = $event)),\n                                        type: \"checkbox\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(settings).typewriterEffect]\n                                    ]),\n                                    _cache[20] || (_cache[20] = _createElementVNode(\"span\", { class: \"toggle-slider\" }, null, -1 /* CACHED */))\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _createElementVNode(\"section\", _hoisted_24, [\n                        _cache[28] || (_cache[28] = _createElementVNode(\"h2\", { class: \"section-title\" }, [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-hand-pointer\" }),\n                            _createTextVNode(\" 交互设置 \")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_25, [\n                            _cache[24] || (_cache[24] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"自动滚动\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"新消息时自动滚动到底部\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_26, [\n                                _createElementVNode(\"label\", _hoisted_27, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(settings).autoScroll) = $event)),\n                                        type: \"checkbox\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(settings).autoScroll]\n                                    ]),\n                                    _cache[23] || (_cache[23] = _createElementVNode(\"span\", { class: \"toggle-slider\" }, null, -1 /* CACHED */))\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_28, [\n                            _cache[26] || (_cache[26] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"显示角色栏\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"在界面底部显示角色状态栏\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_29, [\n                                _createElementVNode(\"label\", _hoisted_30, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(settings).showCharacterBar) = $event)),\n                                        type: \"checkbox\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [_vModelCheckbox, _unref(settings).showCharacterBar]\n                                    ]),\n                                    _cache[25] || (_cache[25] = _createElementVNode(\"span\", { class: \"toggle-slider\" }, null, -1 /* CACHED */))\n                                ])\n                            ])\n                        ]),\n                        _createElementVNode(\"div\", _hoisted_31, [\n                            _cache[27] || (_cache[27] = _createElementVNode(\"div\", { class: \"setting-info\" }, [\n                                _createElementVNode(\"span\", { class: \"setting-label\" }, \"背景模糊\"),\n                                _createElementVNode(\"span\", { class: \"setting-desc\" }, \"背景图片模糊效果\")\n                            ], -1 /* CACHED */)),\n                            _createElementVNode(\"div\", _hoisted_32, [\n                                _createElementVNode(\"div\", _hoisted_33, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => ((_unref(settings).backgroundBlur) = $event)),\n                                        type: \"range\",\n                                        min: \"0\",\n                                        max: \"20\",\n                                        class: \"setting-slider\"\n                                    }, null, 512 /* NEED_PATCH */), [\n                                        [\n                                            _vModelText,\n                                            _unref(settings).backgroundBlur,\n                                            void 0,\n                                            { number: true }\n                                        ]\n                                    ]),\n                                    _createElementVNode(\"span\", _hoisted_34, _toDisplayString(_unref(settings).backgroundBlur) + \"px\", 1 /* TEXT */)\n                                ])\n                            ])\n                        ])\n                    ]),\n                    _cache[30] || (_cache[30] = _createStaticVNode(\"<section class=\\\"settings-section\\\" data-v-457a40ab><h2 class=\\\"section-title\\\" data-v-457a40ab><i class=\\\"fa-solid fa-circle-info\\\" data-v-457a40ab></i> 关于 </h2><div class=\\\"about-content\\\" data-v-457a40ab><div class=\\\"about-logo\\\" data-v-457a40ab><div class=\\\"logo-placeholder\\\" data-v-457a40ab><i class=\\\"fa-solid fa-mug-hot\\\" data-v-457a40ab></i></div></div><div class=\\\"about-info\\\" data-v-457a40ab><h3 class=\\\"about-title\\\" data-v-457a40ab>点兔互动界面</h3><p class=\\\"about-version\\\" data-v-457a40ab>版本 1.0.0</p><p class=\\\"about-desc\\\" data-v-457a40ab> 基于「请问您今天要来点兔子吗？」世界观的沉浸式文字冒险游戏界面。采用法式艺术风格设计，为您带来温馨治愈的互动体验。 </p></div></div></section>\", 1)),\n                    _createElementVNode(\"div\", { class: \"settings-footer\" }, [\n                        _createElementVNode(\"button\", {\n                            class: \"btn btn-danger\",\n                            onClick: resetSettings\n                        }, [...(_cache[29] || (_cache[29] = [\n                                _createElementVNode(\"i\", { class: \"fa-solid fa-rotate-left\" }, null, -1 /* CACHED */),\n                                _createTextVNode(\" 重置为默认设置 \", -1 /* CACHED */)\n                            ]))])\n                    ])\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./SettingsPage.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SettingsPage.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SettingsPage.vue?vue&type=style&index=0&id=457a40ab&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-457a40ab\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, unref as _unref, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle } from \"vue\";\nconst _hoisted_1 = { class: \"start-screen\" };\nconst _hoisted_2 = { class: \"start-content\" };\nconst _hoisted_3 = [\"disabled\"];\nconst _hoisted_4 = { class: \"decorative-rabbits\" };\nimport { useRouter } from 'vue-router';\nimport { useCharacterStore } from '../stores/characterStore';\nimport { useGameStore } from '../stores/gameStore';\n\nimport { ref } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'StartScreen',\n    setup(__props) {\n        const router = useRouter();\n        const characterStore = useCharacterStore();\n        const gameStore = useGameStore();\n        const isLoading = ref(false);\n        async function handleStart() {\n            if (isLoading.value)\n                return;\n            isLoading.value = true;\n            gameStore.setLoading(true);\n            try {\n                // 初始化角色数据\n                await characterStore.initialize();\n                characterStore.setupMessageListener();\n                // 导航到游戏主页面\n                router.push('/game');\n            }\n            catch (e) {\n                console.error('[启动] 初始化失败:', e);\n                toastr.error('初始化失败，请刷新页面重试');\n            }\n            finally {\n                isLoading.value = false;\n                gameStore.setLoading(false);\n            }\n        }\n        function getRabbitStyle(index) {\n            const positions = [\n                { left: '5%', top: '15%', size: '20px', delay: '0s' },\n                { left: '90%', top: '25%', size: '16px', delay: '0.5s' },\n                { left: '8%', top: '75%', size: '18px', delay: '1s' },\n                { left: '92%', top: '70%', size: '22px', delay: '1.5s' },\n                { left: '50%', top: '90%', size: '14px', delay: '2s' },\n            ];\n            const pos = positions[index - 1] || positions[0];\n            return {\n                left: pos.left,\n                top: pos.top,\n                width: pos.size,\n                height: pos.size,\n                animationDelay: pos.delay,\n            };\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createCommentVNode(\" Logo \"),\n                    _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"logo-container animate-fadeInDown\" }, [\n                        _createElementVNode(\"svg\", {\n                            class: \"logo-svg\",\n                            viewBox: \"0 0 400 120\"\n                        }, [\n                            _createElementVNode(\"text\", {\n                                x: \"50%\",\n                                y: \"50%\",\n                                \"text-anchor\": \"middle\",\n                                \"dominant-baseline\": \"middle\",\n                                class: \"logo-text\"\n                            }, \" ご注文はうさぎですか？ \"),\n                            _createElementVNode(\"text\", {\n                                x: \"50%\",\n                                y: \"85%\",\n                                \"text-anchor\": \"middle\",\n                                \"dominant-baseline\": \"middle\",\n                                class: \"logo-subtitle\"\n                            }, \" 请问您今天要来点兔子吗？ \")\n                        ])\n                    ], -1 /* CACHED */)),\n                    _createCommentVNode(\" Press Start Button \"),\n                    _createElementVNode(\"button\", {\n                        class: \"press-start-btn animate-fadeInUp\",\n                        disabled: _unref(isLoading),\n                        onClick: handleStart\n                    }, [\n                        _createElementVNode(\"span\", {\n                            class: _normalizeClass([\"btn-text\", { 'animate-pulse': !_unref(isLoading) }])\n                        }, _toDisplayString(_unref(isLoading) ? '加载中...' : 'Press Start'), 3 /* TEXT, CLASS */),\n                        _cache[0] || (_cache[0] = _createElementVNode(\"span\", { class: \"btn-decor\" }, null, -1 /* CACHED */))\n                    ], 8 /* PROPS */, _hoisted_3),\n                    _createCommentVNode(\" Version Info \"),\n                    _cache[2] || (_cache[2] = _createElementVNode(\"div\", { class: \"version-info animate-fadeIn\" }, [\n                        _createElementVNode(\"span\", null, \"Version 1.0.0\"),\n                        _createElementVNode(\"span\", { class: \"separator\" }, \"|\"),\n                        _createElementVNode(\"span\", null, \"点兔同层前端\")\n                    ], -1 /* CACHED */))\n                ]),\n                _createCommentVNode(\" Decorative elements \"),\n                _createElementVNode(\"div\", _hoisted_4, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(5, (i) => {\n                        return _createElementVNode(\"svg\", {\n                            key: i,\n                            class: \"rabbit-icon\",\n                            style: _normalizeStyle(getRabbitStyle(i)),\n                            viewBox: \"0 0 24 24\"\n                        }, [...(_cache[3] || (_cache[3] = [\n                                _createElementVNode(\"path\", {\n                                    d: \"M12 2C9.5 2 7.5 4 7.5 6.5C7.5 7.5 7.8 8.4 8.3 9.1L6 14L9 12L12 16L15 12L18 14L15.7 9.1C16.2 8.4 16.5 7.5 16.5 6.5C16.5 4 14.5 2 12 2Z\",\n                                    fill: \"currentColor\"\n                                }, null, -1 /* CACHED */)\n                            ]))], 4 /* STYLE */);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./StartScreen.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./StartScreen.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./StartScreen.vue?vue&type=style&index=0&id=ed982be0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-ed982be0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, unref as _unref, isRef as _isRef, vModelText as _vModelText, withDirectives as _withDirectives, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, withModifiers as _withModifiers, Transition as _Transition, withCtx as _withCtx, createVNode as _createVNode } from \"vue\";\nconst _hoisted_1 = { class: \"worldbook-manager\" };\nconst _hoisted_2 = { class: \"search-section\" };\nconst _hoisted_3 = { class: \"search-input-wrapper\" };\nconst _hoisted_4 = {\n    key: 0,\n    class: \"loading-state\"\n};\nconst _hoisted_5 = { class: \"entries-list\" };\nconst _hoisted_6 = { class: \"entry-toggle\" };\nconst _hoisted_7 = { class: \"toggle-switch\" };\nconst _hoisted_8 = [\"checked\", \"onChange\"];\nconst _hoisted_9 = { class: \"entry-info\" };\nconst _hoisted_10 = { class: \"entry-header\" };\nconst _hoisted_11 = { class: \"entry-key\" };\nconst _hoisted_12 = { class: \"entry-comment\" };\nconst _hoisted_13 = [\"onClick\"];\nconst _hoisted_14 = {\n    key: 0,\n    class: \"empty-state\"\n};\nconst _hoisted_15 = { class: \"modal-header\" };\nconst _hoisted_16 = { class: \"modal-title\" };\nconst _hoisted_17 = { class: \"modal-body\" };\nconst _hoisted_18 = { class: \"detail-item\" };\nconst _hoisted_19 = { class: \"detail-value\" };\nconst _hoisted_20 = { class: \"detail-item\" };\nconst _hoisted_21 = { class: \"detail-value\" };\nconst _hoisted_22 = { class: \"detail-item\" };\nconst _hoisted_23 = { class: \"detail-content\" };\nconst _hoisted_24 = { class: \"modal-footer\" };\nimport { useRouter } from 'vue-router';\n\nimport { ref, computed, onMounted } from 'vue';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'WorldbookManager',\n    setup(__props) {\n        const router = useRouter();\n        const searchQuery = ref('');\n        const isLoading = ref(true);\n        const entries = ref([]);\n        const selectedEntry = ref(null);\n        const worldbookName = ref(null);\n        const filteredEntries = computed(() => {\n            if (!searchQuery.value)\n                return entries.value;\n            const query = searchQuery.value.toLowerCase();\n            return entries.value.filter(entry => entry.name.toLowerCase().includes(query) ||\n                entry.comment?.toLowerCase().includes(query) ||\n                entry.content.toLowerCase().includes(query) ||\n                entry.keys.some(k => k.toLowerCase().includes(query)));\n        });\n        async function loadWorldbook() {\n            isLoading.value = true;\n            try {\n                // 获取当前角色卡绑定的世界书\n                const charWorldbooks = getCharWorldbookNames('current');\n                const wbName = charWorldbooks.primary;\n                if (!wbName) {\n                    console.log('[世界书] 当前角色卡没有绑定世界书');\n                    entries.value = [];\n                    return;\n                }\n                worldbookName.value = wbName;\n                const worldbook = await getWorldbook(wbName);\n                if (worldbook && Array.isArray(worldbook)) {\n                    entries.value = worldbook.map(entry => ({\n                        uid: entry.uid,\n                        name: entry.name || '未命名',\n                        keys: entry.strategy?.keys?.map(k => String(k)) || [],\n                        comment: entry.content?.slice(0, 100),\n                        content: entry.content || '',\n                        enabled: entry.enabled ?? true,\n                    }));\n                }\n            }\n            catch (e) {\n                console.error('[世界书] 加载失败:', e);\n            }\n            finally {\n                isLoading.value = false;\n            }\n        }\n        async function toggleEntry(entry) {\n            if (!worldbookName.value)\n                return;\n            try {\n                await updateWorldbookWith(worldbookName.value, worldbook => {\n                    return worldbook.map(e => {\n                        if (e.uid === entry.uid) {\n                            return { ...e, enabled: !entry.enabled };\n                        }\n                        return e;\n                    });\n                });\n                entry.enabled = !entry.enabled;\n                toastr.success(entry.enabled ? '已启用条目' : '已禁用条目');\n            }\n            catch (e) {\n                console.error('[世界书] 切换状态失败:', e);\n                toastr.error('操作失败');\n            }\n        }\n        function viewEntry(entry) {\n            selectedEntry.value = entry;\n        }\n        function closeModal() {\n            selectedEntry.value = null;\n        }\n        function clearSearch() {\n            searchQuery.value = '';\n        }\n        function goBack() {\n            router.push('/game');\n        }\n        onMounted(() => {\n            loadWorldbook();\n        });\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Header \"),\n                _createElementVNode(\"header\", { class: \"wb-header\" }, [\n                    _createElementVNode(\"button\", {\n                        class: \"back-btn\",\n                        onClick: goBack\n                    }, [...(_cache[3] || (_cache[3] = [\n                            _createElementVNode(\"i\", { class: \"fa-solid fa-arrow-left\" }, null, -1 /* CACHED */)\n                        ]))]),\n                    _cache[4] || (_cache[4] = _createElementVNode(\"h1\", { class: \"header-title\" }, \"世界书管理\", -1 /* CACHED */))\n                ]),\n                _createCommentVNode(\" Search Bar \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    _createElementVNode(\"div\", _hoisted_3, [\n                        _cache[6] || (_cache[6] = _createElementVNode(\"i\", { class: \"fa-solid fa-search\" }, null, -1 /* CACHED */)),\n                        _withDirectives(_createElementVNode(\"input\", {\n                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => (_isRef(searchQuery) ? (searchQuery).value = $event : null)),\n                            type: \"text\",\n                            class: \"search-input\",\n                            placeholder: \"搜索条目...\"\n                        }, null, 512 /* NEED_PATCH */), [\n                            [_vModelText, _unref(searchQuery)]\n                        ]),\n                        (_unref(searchQuery))\n                            ? (_openBlock(), _createElementBlock(\"button\", {\n                                key: 0,\n                                class: \"clear-btn\",\n                                onClick: clearSearch\n                            }, [...(_cache[5] || (_cache[5] = [\n                                    _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                ]))]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ])\n                ]),\n                _createCommentVNode(\" Loading State \"),\n                (_unref(isLoading))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [...(_cache[7] || (_cache[7] = [\n                            _createElementVNode(\"div\", { class: \"loading-spinner\" }, null, -1 /* CACHED */),\n                            _createElementVNode(\"span\", null, \"加载中...\", -1 /* CACHED */)\n                        ]))]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" Entries List \"),\n                        _createElementVNode(\"main\", _hoisted_5, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(filteredEntries), (entry) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: entry.uid,\n                                    class: \"entry-card\"\n                                }, [\n                                    _createElementVNode(\"div\", _hoisted_6, [\n                                        _createElementVNode(\"label\", _hoisted_7, [\n                                            _createElementVNode(\"input\", {\n                                                type: \"checkbox\",\n                                                checked: entry.enabled,\n                                                onChange: ($event) => (toggleEntry(entry))\n                                            }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_8),\n                                            _cache[8] || (_cache[8] = _createElementVNode(\"span\", { class: \"toggle-slider\" }, null, -1 /* CACHED */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _createElementVNode(\"div\", _hoisted_10, [\n                                            _createElementVNode(\"span\", _hoisted_11, _toDisplayString(entry.name), 1 /* TEXT */),\n                                            _createElementVNode(\"span\", {\n                                                class: _normalizeClass([\"entry-status\", { enabled: entry.enabled, disabled: !entry.enabled }])\n                                            }, _toDisplayString(entry.enabled ? '已启用' : '已禁用'), 3 /* TEXT, CLASS */)\n                                        ]),\n                                        _createElementVNode(\"p\", _hoisted_12, _toDisplayString(entry.comment || '无描述'), 1 /* TEXT */)\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"entry-action\",\n                                        title: \"查看详情\",\n                                        onClick: ($event) => (viewEntry(entry))\n                                    }, [...(_cache[9] || (_cache[9] = [\n                                            _createElementVNode(\"i\", { class: \"fa-solid fa-eye\" }, null, -1 /* CACHED */)\n                                        ]))], 8 /* PROPS */, _hoisted_13)\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */)),\n                            _createCommentVNode(\" Empty State \"),\n                            (_unref(filteredEntries).length === 0 && !_unref(isLoading))\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, [...(_cache[10] || (_cache[10] = [\n                                        _createElementVNode(\"i\", { class: \"fa-solid fa-book-open\" }, null, -1 /* CACHED */),\n                                        _createElementVNode(\"p\", null, \"暂无世界书条目\", -1 /* CACHED */)\n                                    ]))]))\n                                : _createCommentVNode(\"v-if\", true)\n                        ])\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)),\n                _createCommentVNode(\" Entry Detail Modal \"),\n                _createVNode(_Transition, { name: \"modal\" }, {\n                    default: _withCtx(() => [\n                        (_unref(selectedEntry))\n                            ? (_openBlock(), _createElementBlock(\"div\", {\n                                key: 0,\n                                class: \"modal-overlay\",\n                                onClick: closeModal\n                            }, [\n                                _createElementVNode(\"div\", {\n                                    class: \"modal-content\",\n                                    onClick: _cache[2] || (_cache[2] = _withModifiers(() => { }, [\"stop\"]))\n                                }, [\n                                    _createElementVNode(\"header\", _hoisted_15, [\n                                        _createElementVNode(\"h2\", _hoisted_16, _toDisplayString(_unref(selectedEntry).name), 1 /* TEXT */),\n                                        _createElementVNode(\"button\", {\n                                            class: \"modal-close\",\n                                            onClick: closeModal\n                                        }, [...(_cache[11] || (_cache[11] = [\n                                                _createElementVNode(\"i\", { class: \"fa-solid fa-times\" }, null, -1 /* CACHED */)\n                                            ]))])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_17, [\n                                        _createElementVNode(\"div\", _hoisted_18, [\n                                            _cache[12] || (_cache[12] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"关键词\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_19, _toDisplayString(_unref(selectedEntry).keys?.join(', ') || '无'), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_20, [\n                                            _cache[13] || (_cache[13] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"描述\", -1 /* CACHED */)),\n                                            _createElementVNode(\"span\", _hoisted_21, _toDisplayString(_unref(selectedEntry).comment || '无'), 1 /* TEXT */)\n                                        ]),\n                                        _createElementVNode(\"div\", _hoisted_22, [\n                                            _cache[14] || (_cache[14] = _createElementVNode(\"span\", { class: \"detail-label\" }, \"内容\", -1 /* CACHED */)),\n                                            _createElementVNode(\"pre\", _hoisted_23, _toDisplayString(_unref(selectedEntry).content), 1 /* TEXT */)\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"footer\", _hoisted_24, [\n                                        _createElementVNode(\"button\", {\n                                            class: \"btn btn-secondary\",\n                                            onClick: closeModal\n                                        }, \"关闭\"),\n                                        _createElementVNode(\"button\", {\n                                            class: \"btn btn-primary\",\n                                            onClick: _cache[1] || (_cache[1] = ($event) => (toggleEntry(_unref(selectedEntry))))\n                                        }, _toDisplayString(_unref(selectedEntry).enabled ? '禁用' : '启用'), 1 /* TEXT */)\n                                    ])\n                                ])\n                            ]))\n                            : _createCommentVNode(\"v-if\", true)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./WorldbookManager.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./WorldbookManager.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./WorldbookManager.vue?vue&type=style&index=0&id=21d39fba&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-21d39fba\"]])\n\nexport default __exports__","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nmodule.exports = x({ [\"createPinia\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.createPinia), [\"defineStore\"]: () => (__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__.defineStore) });","module.exports = Vue;","module.exports = VueRouter;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, normalizeStyle as _normalizeStyle, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = { class: \"background-layer\" };\nconst _hoisted_2 = { class: \"particles\" };\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'BackgroundLayer',\n    setup(__props) {\n        function getParticleStyle(index) {\n            const positions = [\n                { left: '10%', top: '20%', delay: '0s', duration: '4s' },\n                { left: '80%', top: '15%', delay: '1s', duration: '5s' },\n                { left: '25%', top: '70%', delay: '2s', duration: '4.5s' },\n                { left: '70%', top: '60%', delay: '0.5s', duration: '5.5s' },\n                { left: '50%', top: '40%', delay: '1.5s', duration: '4s' },\n                { left: '35%', top: '85%', delay: '2.5s', duration: '5s' },\n            ];\n            const pos = positions[index - 1] || positions[0];\n            return {\n                left: pos.left,\n                top: pos.top,\n                animationDelay: pos.delay,\n                animationDuration: pos.duration,\n            };\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" Base gradient \"),\n                _cache[0] || (_cache[0] = _createElementVNode(\"div\", { class: \"bg-gradient\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Decorative pattern overlay \"),\n                _cache[1] || (_cache[1] = _createElementVNode(\"div\", { class: \"bg-pattern\" }, null, -1 /* CACHED */)),\n                _createCommentVNode(\" Corner decorations \"),\n                _cache[2] || (_cache[2] = _createStaticVNode(\"<svg class=\\\"corner-decor corner-top-left\\\" width=\\\"120\\\" height=\\\"120\\\" viewBox=\\\"0 0 120 120\\\" data-v-6d0309e0><path d=\\\"M0,0 Q60,10 50,50 T0,100\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-gold)\\\" stroke-width=\\\"1.5\\\" opacity=\\\"0.3\\\" data-v-6d0309e0></path><path d=\\\"M0,20 Q40,25 35,55 T0,90\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-rose)\\\" stroke-width=\\\"1\\\" opacity=\\\"0.2\\\" data-v-6d0309e0></path><circle cx=\\\"20\\\" cy=\\\"20\\\" r=\\\"3\\\" fill=\\\"var(--decor-gold)\\\" opacity=\\\"0.4\\\" data-v-6d0309e0></circle></svg><svg class=\\\"corner-decor corner-top-right\\\" width=\\\"120\\\" height=\\\"120\\\" viewBox=\\\"0 0 120 120\\\" data-v-6d0309e0><path d=\\\"M120,0 Q60,10 70,50 T120,100\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-gold)\\\" stroke-width=\\\"1.5\\\" opacity=\\\"0.3\\\" data-v-6d0309e0></path><path d=\\\"M120,20 Q80,25 85,55 T120,90\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-rose)\\\" stroke-width=\\\"1\\\" opacity=\\\"0.2\\\" data-v-6d0309e0></path><circle cx=\\\"100\\\" cy=\\\"20\\\" r=\\\"3\\\" fill=\\\"var(--decor-gold)\\\" opacity=\\\"0.4\\\" data-v-6d0309e0></circle></svg><svg class=\\\"corner-decor corner-bottom-left\\\" width=\\\"120\\\" height=\\\"120\\\" viewBox=\\\"0 0 120 120\\\" data-v-6d0309e0><path d=\\\"M0,120 Q60,110 50,70 T0,20\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-gold)\\\" stroke-width=\\\"1.5\\\" opacity=\\\"0.3\\\" data-v-6d0309e0></path><path d=\\\"M0,100 Q40,95 35,65 T0,30\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-rose)\\\" stroke-width=\\\"1\\\" opacity=\\\"0.2\\\" data-v-6d0309e0></path><circle cx=\\\"20\\\" cy=\\\"100\\\" r=\\\"3\\\" fill=\\\"var(--decor-gold)\\\" opacity=\\\"0.4\\\" data-v-6d0309e0></circle></svg><svg class=\\\"corner-decor corner-bottom-right\\\" width=\\\"120\\\" height=\\\"120\\\" viewBox=\\\"0 0 120 120\\\" data-v-6d0309e0><path d=\\\"M120,120 Q60,110 70,70 T120,20\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-gold)\\\" stroke-width=\\\"1.5\\\" opacity=\\\"0.3\\\" data-v-6d0309e0></path><path d=\\\"M120,100 Q80,95 85,65 T120,30\\\" fill=\\\"none\\\" stroke=\\\"var(--decor-rose)\\\" stroke-width=\\\"1\\\" opacity=\\\"0.2\\\" data-v-6d0309e0></path><circle cx=\\\"100\\\" cy=\\\"100\\\" r=\\\"3\\\" fill=\\\"var(--decor-gold)\\\" opacity=\\\"0.4\\\" data-v-6d0309e0></circle></svg>\", 4)),\n                _createCommentVNode(\" Floating particles \"),\n                _createElementVNode(\"div\", _hoisted_2, [\n                    (_openBlock(), _createElementBlock(_Fragment, null, _renderList(6, (i) => {\n                        return _createElementVNode(\"div\", {\n                            key: i,\n                            class: \"particle\",\n                            style: _normalizeStyle(getParticleStyle(i))\n                        }, null, 4 /* STYLE */);\n                    }), 64 /* STABLE_FRAGMENT */))\n                ])\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./BackgroundLayer.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./BackgroundLayer.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./BackgroundLayer.vue?vue&type=style&index=0&id=6d0309e0&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-6d0309e0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue';\nimport { unref as _unref, createVNode as _createVNode, resolveDynamicComponent as _resolveDynamicComponent, openBlock as _openBlock, createBlock as _createBlock, Transition as _Transition, withCtx as _withCtx, resolveComponent as _resolveComponent, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = [\"data-theme\", \"data-font\", \"data-font-size\"];\nimport BackgroundLayer from './components/BackgroundLayer.vue';\nimport { useSettingsStore } from './stores/settingsStore';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        const settingsStore = useSettingsStore();\n        return (_ctx, _cache) => {\n            const _component_router_view = _resolveComponent(\"router-view\");\n            return (_openBlock(), _createElementBlock(\"div\", {\n                class: \"app-container\",\n                \"data-theme\": _unref(settingsStore).settings.theme,\n                \"data-font\": _unref(settingsStore).settings.fontScheme,\n                \"data-font-size\": _unref(settingsStore).settings.fontSize\n            }, [\n                _createVNode(BackgroundLayer),\n                _createVNode(_component_router_view, null, {\n                    default: _withCtx(({ Component }) => [\n                        _createVNode(_Transition, {\n                            name: \"page\",\n                            mode: \"out-in\"\n                        }, {\n                            default: _withCtx(() => [\n                                (_openBlock(), _createBlock(_resolveDynamicComponent(Component)))\n                            ]),\n                            _: 2 /* DYNAMIC */\n                        }, 1024 /* DYNAMIC_SLOTS */)\n                    ]),\n                    _: 1 /* STABLE */\n                })\n            ], 8 /* PROPS */, _hoisted_1));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=5fd69381&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.28_typescript@6.0.0-dev.20250807__webpack@5.105.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5fd69381\"]])\n\nexport default __exports__","import { createPinia } from 'pinia';\nimport { createApp } from 'vue';\nimport { createMemoryHistory, createRouter } from 'vue-router';\nimport App from './App.vue';\nimport './global.scss';\n\n// 定义路由\nconst routes = [\n  {\n    path: '/',\n    name: 'start',\n    component: () => import('./components/StartScreen.vue'),\n  },\n  {\n    path: '/game',\n    name: 'game',\n    component: () => import('./components/GameMain.vue'),\n  },\n  {\n    path: '/character/:name',\n    name: 'character',\n    component: () => import('./components/CharacterDetail.vue'),\n  },\n  {\n    path: '/history',\n    name: 'history',\n    component: () => import('./components/HistoryMessages.vue'),\n  },\n  {\n    path: '/worldbook',\n    name: 'worldbook',\n    component: () => import('./components/WorldbookManager.vue'),\n  },\n  {\n    path: '/settings',\n    name: 'settings',\n    component: () => import('./components/SettingsPage.vue'),\n  },\n];\n\nconst router = createRouter({\n  history: createMemoryHistory(),\n  routes,\n});\n\n// 创建应用\nconst app = createApp(App);\napp.use(createPinia());\napp.use(router);\n\n// 挂载应用\n$(() => {\n  app.mount('#app');\n  console.info('[同层前端] 界面加载成功');\n});\n\n// 卸载处理\n$(window).on('pagehide', () => {\n  app.unmount();\n  console.info('[同层前端] 界面卸载成功');\n});\n"],"names":["_","z","Schema","object","string","describe","enum","record","array","coerce","number","transform","data","pickBy","v","clamp","$","CHARACTER_NAME_MAP","CHARACTER_COLOR_MAP","useCharacterStore","defineStore","mvuData","ref","isInitialized","stopMessageListener","async","refreshData","Mvu","getMvuData","type","message_id","getCurrentMessageId","statData","value","parse","e","console","warn","initialize","waitGlobalInitialized","info","error","getCharacterData","name","getCurrentSceneCharacters","getWorldInfo","getMainPOV","setupMessageListener","eventOn","tavern_events","CHARACTER_MESSAGE_RENDERED","cleanupMessageListener","stop","useGameStore","currentPage","currentMessage","currentMessageId","options","currentCharacters","isCharacterBarCollapsed","isFullscreen","isLoading","isGenerating","selectedCharacter","navigateTo","page","updateMessage","message","messageId","updateOptions","newOptions","addCustomOption","title","content","newOption","id","Date","now","isCustom","push","removeOption","optionId","index","findIndex","opt","splice","updateCurrentCharacters","characters","toggleCharacterBar","toggleFullscreen","document","documentElement","requestFullscreen","exitFullscreen","selectCharacter","setLoading","loading","setGenerating","generating","defaultSettings","messageDisplayMode","theme","fontScheme","fontSize","enableAnimations","typewriterEffect","autoScroll","showCharacterBar","backgroundBlur","allowCustomOptions","DISPLAY_MODE_MAP","instant","typewriter","segment","card","bubble","classic","THEME_MAP","warm","cool","light","dark","sakura","ocean","FONT_SCHEME_MAP","default","reading","artistic","elegant","modern","normalizeTheme","normalizeFontScheme","normalizeFontSize","loadSettings","saved","localStorage","getItem","parsed","normalizeSettings","JSON","useSettingsStore","settings","saveSettings","setItem","stringify","watchEffect","updateSettings","newSettings","resetSettings","_hoisted_1","class","_hoisted_2","key","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","__name","setup","__props","router","useRouter","route","useRoute","characterStore","characterName","computed","params","decodeURIComponent","characterData","portraitUrl","fileName","characterColor","hasItems","Object","keys","length","goBack","onMounted","_ctx","_cache","onClick","style","src","alt","charAt","item","props","String","required","color","size","emits","emit","__emit","imageError","handleClick","handleImageError","onError","collapsed","Boolean","Array","toggle","getPortraitUrl","getCharacterColor","persisted","CharacterAvatar","$event","Number","displayMode","contentRef","optionsStartIndex","lastIndexOf","optionsEndIndex","hasOptions","mainContent","trim","slice","afterContent","formattedMainContent","formatMessage","formattedAfterContent","formatted","formatAsDisplayedMessage","html","result","forEach","regex","RegExp","replace","applyCharacterColors","watch","ref_key","innerHTML","option","disabled","handleRemove","custom","canSubmit","submit","reset","cancel","placeholder","maxlength","onKeyup","rows","allowCustom","gameStore","isAddingCustom","isDisabled","handleSelect","startAddingCustom","cancelAddingCustom","handleCustomSubmit","tag","OptionCard","onSelect","onRemove","CustomOptionInput","onSubmit","onCancel","isMenuOpen","toggleMenu","closeMenu","goToHistory","goToWorldbook","goToSettings","goToStart","handleOutsideClick","target","closest","addEventListener","onUnmounted","removeEventListener","settingsStore","loadCurrentMessage","lastMessageId","SillyTavern","chat","messages","getChatMessages","msg","role","optionsMatch","match","text","matchAll","map","parseOptions","handleSelectOption","createChatMessages","triggerSlash","Promise","resolve","setTimeout","toastr","handleSelectCharacter","encodeURIComponent","initializeGame","TopNavBar","MessageDisplay","OptionsPanel","CharacterBar","onToggle","onSelectCharacter","searchQuery","isLoadingMore","hasMore","filteredMessages","query","toLowerCase","filter","preview","includes","loadMessages","chatLength","start","Math","max","end","newMessages","i","truncateText","fullContent","loadMore","maxLength","cleanText","getAvatarColor","getAvatarIcon","getRoleLabel","clearSearch","group","backgroundColor","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","themes","increaseFontSize","decreaseFontSize","success","active","background","min","handleStart","getRabbitStyle","positions","left","top","delay","pos","width","height","animationDelay","viewBox","x","y","d","fill","entries","selectedEntry","worldbookName","filteredEntries","entry","comment","some","k","toggleEntry","updateWorldbookWith","worldbook","uid","enabled","closeModal","wbName","getCharWorldbookNames","primary","log","getWorldbook","isArray","strategy","loadWorldbook","checked","onChange","join","exports","sfc","__vccOpts","val","module","__webpack_require__","__WEBPACK_EXTERNAL_MODULE_https_testingcf_jsdelivr_net_npm_pinia_esm_b723a504__","Vue","VueRouter","__webpack_module_cache__","moduleId","cachedModule","undefined","__webpack_modules__","n","getter","__esModule","a","definition","o","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","getParticleStyle","duration","animationDuration","_component_router_view","BackgroundLayer","Component","mode","routes","path","component","createRouter","history","createMemoryHistory","app","createApp","App","use","createPinia","mount","window","on","unmount"],"sourceRoot":""}