<head><script type="module">import{default as e}from'https://testingcf.jsdelivr.net/npm/async-wait-until/+esm';import{registerMvuSchema as t}from'https://testingcf.jsdelivr.net/gh/StageDog/tavern_resource/dist/util/mvu_zod.js';import{z as a}from'https://testingcf.jsdelivr.net/npm/zod/+esm';import*as n from'https://testingcf.jsdelivr.net/npm/pinia/+esm';import*as o from'https://testingcf.jsdelivr.net/npm/vue-router/+esm';import*as r from'https://testingcf.jsdelivr.net/npm/vue/+esm';var l={635(n,o,r){r.d(o,{B:()=>u,$_:()=>m,mq:()=>p});const l=_;var s=r.n(l),c=r(35);const i=a.object({世界:a.object({当前时间:a.string().describe('%M-%d %H:%i'),当前地点:a.string(),当前季节:a.enum(['春','夏','秋','冬']),当前天气:a.string(),近期事务:a.record(a.string().describe('事务名'),a.string().describe('事务描述'))}),_主视角:a.enum(['无','保登心爱','香风智乃','天天座理世','宇治松千夜','桐间纱路']),当前场景角色:a.array(a.string()),保登心爱:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),香风智乃:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),天天座理世:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),宇治松千夜:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),桐间纱路:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),条河麻耶:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),奈津惠:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),风衣叶冬优:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),神沙夏明:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),神沙映月:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),狩手结良:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),青山蓝山:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),真手凛:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),保登摩卡:a.object({当前位置:a.string(),心情状态:a.string(),着装:a.string(),关键物品:a.record(a.string().describe('物品名'),a.object({描述:a.string(),数量:a.coerce.number()})).transform(e=>_.pickBy(e,({数量:e})=>e>0))}),店铺人气:a.object({'Rabbit House':a.coerce.number().transform(e=>_.clamp(e,0,100)),甘兔庵:a.coerce.number().transform(e=>_.clamp(e,0,100)),'Fleur de Lapin':a.coerce.number().transform(e=>_.clamp(e,0,100)),'Bright Bunny':a.coerce.number().transform(e=>_.clamp(e,0,100))})});$(()=>{t(i)});var d=r(300);const m={保登心爱:'cocoa',香风智乃:'chino',天天座理世:'rize',宇治松千夜:'chiya',桐间纱路:'syaro',条河麻耶:'maya',奈津惠:'megu',风衣叶冬优:'fuyu',神沙夏明:'natsume',神沙映月:'eru',狩手结良:'yura',青山蓝山:'aoyama',真手凛:'mate',保登摩卡:'mocha'},u={保登心爱:'var(--clr-cocoa)',香风智乃:'var(--clr-chino)',天天座理世:'var(--clr-rize)',宇治松千夜:'var(--clr-chiya)',桐间纱路:'var(--clr-syaro)',条河麻耶:'var(--clr-maya)',奈津惠:'var(--clr-megu)',风衣叶冬优:'var(--clr-fuyu)',神沙夏明:'var(--clr-natsume)',神沙映月:'var(--clr-eru)',狩手结良:'var(--clr-yura)',青山蓝山:'var(--clr-aoyama)',真手凛:'var(--clr-mate)',保登摩卡:'var(--clr-mocha)'};const p=(0,c.defineStore)('character',()=>{const t=(0,d.ref)(null),a=(0,d.ref)(!1);let n=null;async function o(){try{const e=Mvu.getMvuData({type:'message',message_id:getCurrentMessageId()}),a=s().get(e,'stat_data');a&&(t.value=i.parse(a))}catch(e){console.warn('[角色数据] 刷新失败:',e)}}return{mvuData:t,isInitialized:a,initialize:async function(){if(!a.value)try{await waitGlobalInitialized('Mvu'),await e(()=>{const e=Mvu.getMvuData({type:'message',message_id:getCurrentMessageId()});return s().has(e,'stat_data')}),await o(),a.value=!0,console.info('[角色数据] 初始化成功')}catch(e){console.error('[角色数据] 初始化失败:',e)}},refreshData:o,getCharacterData:function(e){return t.value?t.value[e]:null},getCurrentSceneCharacters:function(){return t.value&&t.value.当前场景角色||[]},getWorldInfo:function(){return t.value?t.value.世界:null},getMainPOV:function(){return t.value&&t.value._主视角||'无'},setupMessageListener:function(){n||(n=eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED,async()=>{await o()}))},cleanupMessageListener:function(){n?.stop(),n=null}}})},682(e,t,a){a.d(t,{T:()=>r});var n=a(35),o=a(300);const r=(0,n.defineStore)('game',()=>{const e=(0,o.ref)('start'),t=(0,o.ref)(''),a=(0,o.ref)(0),n=(0,o.ref)([]),r=(0,o.ref)([]),l=(0,o.ref)(!1),s=(0,o.ref)(!1),c=(0,o.ref)(!1),i=(0,o.ref)(!1),d=(0,o.ref)(null);return{currentPage:e,currentMessage:t,currentMessageId:a,options:n,currentCharacters:r,isCharacterBarCollapsed:l,isFullscreen:s,isLoading:c,isGenerating:i,selectedCharacter:d,navigateTo:function(t){e.value=t},updateMessage:function(e,n){t.value=e,a.value=n},updateOptions:function(e){n.value=e},addCustomOption:function(e,t){const a={id:`custom-${Date.now()}`,title:e||'自定义行动',content:t,isCustom:!0};n.value.push(a)},removeOption:function(e){const t=n.value.findIndex(t=>t.id===e);-1!==t&&n.value.splice(t,1)},updateCurrentCharacters:function(e){r.value=e},toggleCharacterBar:function(){l.value=!l.value},toggleFullscreen:function(){s.value=!s.value,s.value?document.documentElement.requestFullscreen?.():document.exitFullscreen?.()},selectCharacter:function(e){d.value=e},setLoading:function(e){c.value=e},setGenerating:function(e){i.value=e}}})},63(e,t,a){a.d(t,{C:()=>p});var n=a(35),o=a(300);const r={messageDisplayMode:'instant',theme:'warm',fontScheme:'default',fontSize:'medium',enableAnimations:!0,typewriterEffect:!0,autoScroll:!0,showCharacterBar:!0,backgroundBlur:8,allowCustomOptions:!0},l={instant:'instant',typewriter:'typewriter',segment:'segment',card:'instant',bubble:'segment',classic:'instant'},s={warm:'warm',cool:'cool','high-contrast':'high-contrast','eye-care':'eye-care',light:'warm',dark:'high-contrast',sakura:'warm',ocean:'cool'},c={default:'default',reading:'reading',artistic:'artistic',elegant:'reading',modern:'default',classic:'artistic'};function i(e){return'string'==typeof e&&s[e]?s[e]:r.theme}function d(e){return'string'==typeof e&&c[e]?c[e]:r.fontScheme}function m(e){return'small'===e||'medium'===e||'large'===e?e:'number'==typeof e?e<=14?'small':e>=18?'large':'medium':r.fontSize}function u(){try{const e=localStorage.getItem('gochiusa-game-settings');if(e){return function(e){return{messageDisplayMode:(t=e.messageDisplayMode,'string'==typeof t&&l[t]?l[t]:r.messageDisplayMode),theme:i(e.theme),fontScheme:d(e.fontScheme),fontSize:m(e.fontSize),enableAnimations:'boolean'==typeof e.enableAnimations?e.enableAnimations:r.enableAnimations,typewriterEffect:'boolean'==typeof e.typewriterEffect?e.typewriterEffect:r.typewriterEffect,autoScroll:'boolean'==typeof e.autoScroll?e.autoScroll:r.autoScroll,showCharacterBar:'boolean'==typeof e.showCharacterBar?e.showCharacterBar:r.showCharacterBar,backgroundBlur:'number'==typeof e.backgroundBlur?e.backgroundBlur:r.backgroundBlur,allowCustomOptions:'boolean'==typeof e.allowCustomOptions?e.allowCustomOptions:r.allowCustomOptions};var t}(JSON.parse(e))}}catch(e){console.warn('[设置] 加载设置失败:',e)}return{...r}}const p=(0,n.defineStore)('settings',()=>{const e=(0,o.ref)(u());function t(){try{localStorage.setItem('gochiusa-game-settings',JSON.stringify(e.value))}catch(e){console.warn('[设置] 保存设置失败:',e)}}return(0,o.watchEffect)(()=>{t()}),{settings:e,updateSettings:function(a){e.value={...e.value,...a},t()},resetSettings:function(){e.value={...r},t()}}})},482(e,t,a){a.d(t,{default:()=>S}),a.r(t);var n=a(300),o=a(268),r=a(635);const l={class:'character-detail'},s={key:0,class:'loading-state'},c={class:'detail-content'},i={class:'portrait-section'},d=['src','alt'],m={key:1,class:'portrait-placeholder'},u={class:'character-name'},p={class:'status-section'},f={class:'status-item'},g={class:'status-value'},v={class:'status-item'},N={class:'status-value'},V={class:'status-item'},E={class:'status-value'},h={key:0,class:'items-section'},y={class:'items-list'},b={class:'item-info'},k={class:'item-name'},C={class:'item-desc'},B={class:'item-count'},w=(0,n.defineComponent)({__name:'CharacterDetail',setup(e){const t=(0,o.useRouter)(),a=(0,o.useRoute)(),w=(0,r.mq)(),S=(0,n.computed)(()=>{const e=a.params.name;return decodeURIComponent(e)}),x=(0,n.computed)(()=>w.getCharacterData(S.value)),M=(0,n.computed)(()=>{const e=r.$_[S.value];return e?`../assets/portraits/${e}.png`:''}),D=(0,n.computed)(()=>r.B[S.value]||'var(--text-primary)'),T=(0,n.computed)(()=>x.value?.关键物品&&Object.keys(x.value.关键物品).length>0),O=(0,n.ref)(!0);function A(){t.push('/game')}return(0,n.onMounted)(async()=>{await w.refreshData(),O.value=!1}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',l,[(0,n.createCommentVNode)(' Header '),(0,n.createElementVNode)('header',{class:'detail-header'},[(0,n.createElementVNode)('button',{class:'back-btn',onClick:A},[...t[0]||(t[0]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1)])]),t[1]||(t[1]=(0,n.createElementVNode)('h1',{class:'header-title'},'角色详情',-1))]),(0,n.createCommentVNode)(' Loading State '),(0,n.unref)(O)?((0,n.openBlock)(),(0,n.createElementBlock)('div',s,[...t[2]||(t[2]=[(0,n.createElementVNode)('div',{class:'loading-spinner'},null,-1),(0,n.createElementVNode)('span',null,'加载中...',-1)])])):(0,n.unref)(x)?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createCommentVNode)(' Content '),(0,n.createElementVNode)('main',c,[(0,n.createCommentVNode)(' Portrait Section '),(0,n.createElementVNode)('div',i,[(0,n.createElementVNode)('div',{class:'portrait-container',style:(0,n.normalizeStyle)({'--character-color':(0,n.unref)(D)})},[(0,n.unref)(M)?((0,n.openBlock)(),(0,n.createElementBlock)('img',{key:0,src:(0,n.unref)(M),alt:(0,n.unref)(S),class:'portrait-image'},null,8,d)):((0,n.openBlock)(),(0,n.createElementBlock)('div',m,[(0,n.createElementVNode)('span',null,(0,n.toDisplayString)((0,n.unref)(S)?.charAt(0)),1)]))],4),(0,n.createElementVNode)('h2',u,(0,n.toDisplayString)((0,n.unref)(S)),1)]),(0,n.createCommentVNode)(' Status Section '),(0,n.createElementVNode)('div',p,[(0,n.createElementVNode)('div',f,[t[3]||(t[3]=(0,n.createElementVNode)('i',{class:'fa-solid fa-location-dot'},null,-1)),t[4]||(t[4]=(0,n.createElementVNode)('span',{class:'status-label'},'位置',-1)),(0,n.createElementVNode)('span',g,(0,n.toDisplayString)((0,n.unref)(x).当前位置||'未知'),1)]),(0,n.createElementVNode)('div',v,[t[5]||(t[5]=(0,n.createElementVNode)('i',{class:'fa-solid fa-face-smile'},null,-1)),t[6]||(t[6]=(0,n.createElementVNode)('span',{class:'status-label'},'心情',-1)),(0,n.createElementVNode)('span',N,(0,n.toDisplayString)((0,n.unref)(x).心情状态||'未知'),1)]),(0,n.createElementVNode)('div',V,[t[7]||(t[7]=(0,n.createElementVNode)('i',{class:'fa-solid fa-shirt'},null,-1)),t[8]||(t[8]=(0,n.createElementVNode)('span',{class:'status-label'},'着装',-1)),(0,n.createElementVNode)('span',E,(0,n.toDisplayString)((0,n.unref)(x).着装||'未知'),1)])]),(0,n.createCommentVNode)(' Items Section '),(0,n.unref)(T)?((0,n.openBlock)(),(0,n.createElementBlock)('div',h,[t[10]||(t[10]=(0,n.createElementVNode)('h3',{class:'section-title'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-box'}),(0,n.createTextVNode)(' 关键物品 ')],-1)),(0,n.createElementVNode)('div',y,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(x).关键物品,(e,a)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:a,class:'item-card'},[t[9]||(t[9]=(0,n.createElementVNode)('div',{class:'item-icon'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-cube'})],-1)),(0,n.createElementVNode)('div',b,[(0,n.createElementVNode)('span',k,(0,n.toDisplayString)(a),1),(0,n.createElementVNode)('span',C,(0,n.toDisplayString)(e.描述),1)]),(0,n.createElementVNode)('span',B,'x'+(0,n.toDisplayString)(e.数量),1)]))),128))])])):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createCommentVNode)(' Empty Items '),t[11]||(t[11]=(0,n.createElementVNode)('div',{class:'empty-items'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-box-open'}),(0,n.createElementVNode)('span',null,'暂无关键物品')],-1))],2112))])],2112)):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:2},[(0,n.createCommentVNode)(' Error State '),(0,n.createElementVNode)('div',{class:'error-state'},[t[12]||(t[12]=(0,n.createElementVNode)('i',{class:'fa-solid fa-user-slash'},null,-1)),t[13]||(t[13]=(0,n.createElementVNode)('p',null,'未找到角色信息',-1)),(0,n.createElementVNode)('button',{class:'btn btn-primary',onClick:A},'返回')])],2112))]))}});const S=(0,a(667).A)(w,[['__scopeId','data-v-36ddaebc']])},436(e,t,a){a.d(t,{default:()=>ue}),a.r(t);var n=a(300),o=a(268),r=a(635),l=a(682),s=a(63);function c(e,t){const a=new RegExp(`<${t}>([\\s\\S]*?)<\\/${t}>`,'i'),n=e.match(a);return n?n[1].trim():null}function i(e,t){const a=e.toLowerCase(),n=t.toLowerCase();return{open:a.indexOf(`<${n}>`),close:a.indexOf(`</${n}>`)}}function d(e){const{errors:t,warnings:a}=function(e){const t=[],a=[],n=i(e,'CONTEXT'),o=i(e,'UpdateVariable'),r=i(e,'OPTIONS'),l=(e,n,o)=>{-1===n.open&&-1===n.close?o&&t.push(`缺少标签 <${e}>...</${e}>`):-1!==n.open&&-1!==n.close?n.close<=n.open&&(o?t.push(`标签 <${e}> 的起止顺序错误`):a.push(`可选标签 <${e}> 的起止顺序错误`)):o?t.push(`标签 <${e}> 或 </${e}> 缺失`):a.push(`可选标签 <${e}> 或 </${e}> 缺失`)};l('CONTEXT',n,!0),l('UpdateVariable',o,!1),l('OPTIONS',r,!0);const s=-1!==n.open&&n.close>n.open,c=-1!==r.open&&r.close>r.open;return s&&c&&n.close>r.open&&t.push('标签顺序不符合 <CONTEXT> -> <OPTIONS> 规范'),-1!==o.open&&o.close>o.open&&s&&c&&(o.open<n.close||o.close>r.open)&&a.push('可选标签 <UpdateVariable> 建议位于 <CONTEXT> 与 <OPTIONS> 之间'),{errors:t,warnings:a}}(e),n=c(e,'CONTEXT')??'',o=c(e,'OPTIONS')??'';n||t.push('<CONTEXT> 为空或缺失正文');const{options:r,errors:l}=function(e){const t=e.split(/\r?\n/).map(e=>e.trim()).filter(Boolean);if(0===t.length)return{options:[],errors:['<OPTIONS> 中未提供可用选项']};const a=[];return{options:t.map((e,t)=>{const n=e.match(/^\[([^\]]+)\]\s*(.+)$/);return n?{id:`option-${t}`,title:`[${n[1]}]`,content:n[2].trim(),isCustom:!1}:(a.push(`选项第 ${t+1} 行格式不正确：${e}`),{id:`option-${t}`,title:'[选项]',content:e,isCustom:!1})}),errors:a}}(o);return t.push(...l),{context:n,options:r,errors:t,warnings:a,isValid:0===t.length}}const m={class:'avatar-image'},u=['src','alt'],p={key:1,class:'avatar-placeholder'},f={class:'avatar-info'},g={class:'avatar-name'},v=(0,n.defineComponent)({__name:'CharacterAvatar',props:{name:{type:String,required:!0},portraitUrl:{type:String,default:''},color:{type:String,default:'var(--text-primary)'},size:{type:String,default:'medium'}},emits:['click'],setup(e,{emit:t}){const a=e,o=t,r=(0,n.ref)(!1);function l(){o('click',a.name)}function s(){r.value=!0}return(t,a)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{class:'character-avatar',style:(0,n.normalizeStyle)({'--character-color':e.color}),onClick:l},[(0,n.createElementVNode)('div',m,[e.portraitUrl?((0,n.openBlock)(),(0,n.createElementBlock)('img',{key:0,src:e.portraitUrl,alt:e.name,onError:s},null,40,u)):((0,n.openBlock)(),(0,n.createElementBlock)('div',p,[(0,n.createElementVNode)('span',null,(0,n.toDisplayString)(e.name.charAt(0)),1)]))]),(0,n.createElementVNode)('div',f,[(0,n.createElementVNode)('span',g,(0,n.toDisplayString)(e.name),1)]),a[0]||(a[0]=(0,n.createElementVNode)('div',{class:'avatar-ring'},null,-1))],4))}});var N=a(667);const V=(0,N.A)(v,[['__scopeId','data-v-1087129c']]),E={class:'header-left'},h={class:'character-count'},y={class:'bar-content'},b={class:'characters-list'},k={key:0,class:'empty-state'},C=(0,n.defineComponent)({__name:'CharacterBar',props:{collapsed:{type:Boolean,default:!1},characters:{type:Array,default:()=>[]}},emits:['toggle','selectCharacter'],setup(e,{emit:t}){const a=t;function o(){a('toggle')}function l(e){const t=r.$_[e];return t?`../assets/portraits/${t}.png`:''}function s(e){return r.B[e]||'var(--text-primary)'}return(t,r)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{class:(0,n.normalizeClass)(['character-bar',{collapsed:e.collapsed}])},[(0,n.createElementVNode)('div',{class:'bar-header',onClick:o},[(0,n.createElementVNode)('div',E,[r[0]||(r[0]=(0,n.createElementVNode)('i',{class:'fa-solid fa-users'},null,-1)),r[1]||(r[1]=(0,n.createElementVNode)('span',{class:'header-title'},'当前场景角色',-1)),(0,n.createElementVNode)('span',h,(0,n.toDisplayString)(e.characters.length),1)]),(0,n.createElementVNode)('i',{class:(0,n.normalizeClass)(['fa-solid toggle-icon',e.collapsed?'fa-chevron-up':'fa-chevron-down'])},null,2)]),(0,n.createVNode)(n.Transition,{name:'expand',persisted:''},{default:(0,n.withCtx)(()=>[(0,n.withDirectives)((0,n.createElementVNode)('div',y,[(0,n.createElementVNode)('div',b,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.characters,e=>((0,n.openBlock)(),(0,n.createBlock)(V,{key:e,name:e,'portrait-url':l(e),color:s(e),onClick:t=>function(e){a('selectCharacter',e)}(e)},null,8,['name','portrait-url','color','onClick']))),128))]),0===e.characters.length?((0,n.openBlock)(),(0,n.createElementBlock)('div',k,[...r[2]||(r[2]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-user-slash'},null,-1),(0,n.createElementVNode)('span',null,'暂无角色',-1)])])):(0,n.createCommentVNode)('v-if',!0)],512),[[n.vShow,!e.collapsed]])]),_:1})],2))}}),B=(0,N.A)(C,[['__scopeId','data-v-8a7eb258']]),w={class:'message-display'},S={key:0,class:'loading-state'},x=['innerHTML'],M={key:0,class:'generating-indicator'},D=(0,n.defineComponent)({__name:'MessageDisplay',props:{message:{type:String,default:''},messageId:{type:Number,default:0},displayMode:{type:String,default:'instant'}},setup(e){const t=e,a=(0,n.ref)(null),o=(0,n.ref)(!1),r=(0,l.T)(),s=(0,n.computed)(()=>r.isGenerating),c=(0,n.ref)('');let i=null,d=0;const m=(0,n.computed)(()=>t.message?'segment'===t.displayMode?t.message.split(/\n{2,}/).map(e=>e.trim()).filter(Boolean).join('\n\n'):t.message:''),u=(0,n.computed)(()=>c.value?function(e){let a=formatAsDisplayedMessage(e,{message_id:t.messageId});return a=function(e){let t=e;return['保登心爱','香风智乃','天天座理世','宇治松千夜','桐间纱路','条河麻耶','奈津惠','风衣叶冬优','神沙夏明','神沙映月','狩手结良','青山蓝山','真手凛','保登摩卡'].forEach(e=>{const a=function(e){return{保登心爱:'var(--clr-cocoa)',香风智乃:'var(--clr-chino)',天天座理世:'var(--clr-rize)',宇治松千夜:'var(--clr-chiya)',桐间纱路:'var(--clr-syaro)',条河麻耶:'var(--clr-maya)',奈津惠:'var(--clr-megu)',风衣叶冬优:'var(--clr-fuyu)',神沙夏明:'var(--clr-natsume)',神沙映月:'var(--clr-eru)',狩手结良:'var(--clr-yura)',青山蓝山:'var(--clr-aoyama)',真手凛:'var(--clr-mate)',保登摩卡:'var(--clr-mocha)'}[e]||'var(--text-primary)'}(e),n=new RegExp(`(${e})["「『]([^"」』]+)["」』]`,'g');t=t.replace(n,`<span style="color: ${a}; font-weight: 500;">$1</span>"$2"`)}),t}(a),a}(c.value):'');function p(){i&&(clearTimeout(i),i=null)}return(0,n.watch)(()=>[t.message,t.displayMode],()=>{if(!m.value)return p(),void(c.value='');'typewriter'!==t.displayMode?(p(),c.value=m.value):function(e){p(),d+=1;const t=d;c.value='';const a=Array.from(e);let n=0;const o=()=>{if(t!==d)return;if(n>=a.length)return void p();const e=a[n];c.value+=e,n+=1,i=setTimeout(o,function(e){return/[,，、]/.test(e)?45:/[.。!?！？]/.test(e)?90:20}(e))};o()}(m.value)},{immediate:!0}),(0,n.onUnmounted)(()=>{p()}),(t,r)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',w,[(0,n.createCommentVNode)(' Loading State '),(0,n.unref)(o)?((0,n.openBlock)(),(0,n.createElementBlock)('div',S,[...r[0]||(r[0]=[(0,n.createElementVNode)('div',{class:'loading-spinner'},null,-1),(0,n.createElementVNode)('span',null,'加载中...',-1)])])):e.message?((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:2},[(0,n.createCommentVNode)(' Message Content '),(0,n.createElementVNode)('div',{ref_key:'contentRef',ref:a,class:'message-content'},[(0,n.createElementVNode)('div',{class:'main-text',innerHTML:(0,n.unref)(u)},null,8,x)],512)],2112)):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createCommentVNode)(' Empty State '),r[1]||(r[1]=(0,n.createElementVNode)('div',{class:'empty-state'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-comments'}),(0,n.createElementVNode)('p',null,'等待AI回复...')],-1))],2112)),(0,n.createCommentVNode)(' Generating Indicator '),(0,n.createVNode)(n.Transition,{name:'fade'},{default:(0,n.withCtx)(()=>[(0,n.unref)(s)?((0,n.openBlock)(),(0,n.createElementBlock)('div',M,[...r[2]||(r[2]=[(0,n.createElementVNode)('div',{class:'typing-dots'},[(0,n.createElementVNode)('span'),(0,n.createElementVNode)('span'),(0,n.createElementVNode)('span')],-1),(0,n.createElementVNode)('span',null,'AI 正在思考...',-1)])])):(0,n.createCommentVNode)('v-if',!0)]),_:1})]))}}),T=(0,N.A)(D,[['__scopeId','data-v-fddb67ea']]),O={class:'card-content'},A={class:'option-header'},I={class:'option-title'},j={key:0,class:'fa-solid fa-pen custom-icon'},L={class:'option-content'},R=(0,n.defineComponent)({__name:'OptionCard',props:{option:{type:Object,required:!0},disabled:{type:Boolean,default:!1}},emits:['select','remove'],setup(e,{emit:t}){const a=e,o=t;function r(){a.disabled||o('select',a.option)}function l(){o('remove',a.option.id)}return(t,a)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{class:(0,n.normalizeClass)(['option-card',{disabled:e.disabled,custom:e.option.isCustom}]),onClick:r},[(0,n.createElementVNode)('div',O,[(0,n.createElementVNode)('div',A,[(0,n.createElementVNode)('span',I,[e.option.isCustom?((0,n.openBlock)(),(0,n.createElementBlock)('i',j)):(0,n.createCommentVNode)('v-if',!0),(0,n.createElementVNode)('strong',null,(0,n.toDisplayString)(e.option.title),1)]),e.option.isCustom?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'remove-btn',title:'移除选项',onClick:(0,n.withModifiers)(l,['stop'])},[...a[0]||(a[0]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-times'},null,-1)])])):(0,n.createCommentVNode)('v-if',!0)]),a[1]||(a[1]=(0,n.createElementVNode)('hr',{class:'option-divider'},null,-1)),(0,n.createElementVNode)('span',L,(0,n.toDisplayString)(e.option.content),1)]),a[2]||(a[2]=(0,n.createElementVNode)('div',{class:'card-hover-effect'},null,-1))],2))}}),P=(0,N.A)(R,[['__scopeId','data-v-dce11e2e']]),F={class:'custom-option-input'},U={class:'input-group'},G={class:'input-group'},H=['onKeyup'],Q={class:'char-count'},q={class:'input-actions'},K=['disabled'],W=(0,n.defineComponent)({__name:'CustomOptionInput',emits:['submit','cancel'],setup(e,{emit:t}){const a=t,o=(0,n.ref)(''),r=(0,n.ref)(''),l=(0,n.computed)(()=>r.value.trim().length>0);function s(){l.value&&(a('submit',o.value.trim()||'自定义行动',r.value.trim()),i())}function c(){i(),a('cancel')}function i(){o.value='',r.value=''}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',F,[(0,n.createElementVNode)('div',U,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,n.isRef)(o)?o.value=e:null),type:'text',class:'input-field title-input',placeholder:'选项标题（可选）',maxlength:'50',onKeyup:(0,n.withKeys)(s,['enter'])},null,544),[[n.vModelText,(0,n.unref)(o)]])]),(0,n.createElementVNode)('div',G,[(0,n.withDirectives)((0,n.createElementVNode)('textarea',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,n.isRef)(r)?r.value=e:null),class:'input-field content-input',placeholder:'输入你的行动内容...',rows:'3',maxlength:'500',onKeyup:(0,n.withKeys)((0,n.withModifiers)(s,['ctrl']),['enter'])},null,40,H),[[n.vModelText,(0,n.unref)(r)]]),(0,n.createElementVNode)('span',Q,(0,n.toDisplayString)((0,n.unref)(r).length)+'/500',1)]),(0,n.createElementVNode)('div',q,[(0,n.createElementVNode)('button',{class:'btn btn-ghost cancel-btn',onClick:c},[...t[2]||(t[2]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-times'},null,-1),(0,n.createElementVNode)('span',null,'取消',-1)])]),(0,n.createElementVNode)('button',{class:'btn btn-primary submit-btn',disabled:!(0,n.unref)(l),onClick:s},[...t[3]||(t[3]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-check'},null,-1),(0,n.createElementVNode)('span',null,'添加',-1)])],8,K)])]))}}),X=(0,N.A)(W,[['__scopeId','data-v-b810ab60']]),J={class:'options-panel'},Z={key:0,class:'custom-option-section'},Y={key:1,class:'empty-options'},ee={key:0,class:'hint'},te=(0,n.defineComponent)({__name:'OptionsPanel',props:{options:{type:Array,default:()=>[]},allowCustom:{type:Boolean,default:!0}},emits:['select'],setup(e,{emit:t}){const a=t,o=(0,l.T)(),r=(0,n.ref)(!1),s=(0,n.computed)(()=>o.isGenerating);function c(e){s.value||a('select',e)}function i(e){o.removeOption(e)}function d(){r.value=!0}function m(){r.value=!1}function u(e,t){o.addCustomOption(e,t),r.value=!1}return(t,a)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',J,[(0,n.createCommentVNode)(' Options List '),(0,n.createVNode)(n.TransitionGroup,{name:'option-list',tag:'div',class:'options-list'},{default:(0,n.withCtx)(()=>[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(e.options,e=>((0,n.openBlock)(),(0,n.createBlock)(P,{key:e.id,option:e,disabled:(0,n.unref)(s),onSelect:c,onRemove:i},null,8,['option','disabled']))),128))]),_:1}),(0,n.createCommentVNode)(' Custom Option Input '),e.allowCustom?((0,n.openBlock)(),(0,n.createElementBlock)('div',Z,[(0,n.createVNode)(n.Transition,{name:'expand'},{default:(0,n.withCtx)(()=>[(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createBlock)(X,{key:1,onSubmit:u,onCancel:m})):((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'add-custom-btn',onClick:d},[...a[0]||(a[0]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-plus'},null,-1),(0,n.createElementVNode)('span',null,'添加自定义选项',-1)])]))]),_:1})])):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' Empty State '),0!==e.options.length||(0,n.unref)(r)?(0,n.createCommentVNode)('v-if',!0):((0,n.openBlock)(),(0,n.createElementBlock)('div',Y,[a[1]||(a[1]=(0,n.createElementVNode)('i',{class:'fa-solid fa-hand-pointer'},null,-1)),a[2]||(a[2]=(0,n.createElementVNode)('p',null,'暂无可选选项',-1)),e.allowCustom?((0,n.openBlock)(),(0,n.createElementBlock)('p',ee,'点击上方按钮添加自定义行动')):(0,n.createCommentVNode)('v-if',!0)]))]))}}),ae=(0,N.A)(te,[['__scopeId','data-v-4fcc2ca1']]),ne={class:'top-nav-bar'},oe={class:'nav-right'},re=['title'],le={key:0,class:'menu-dropdown'},se=(0,n.defineComponent)({__name:'TopNavBar',setup(e){const t=(0,o.useRouter)(),a=(0,l.T)(),r=(0,n.ref)(!1);function s(){r.value=!r.value}function c(){r.value=!1}function i(){c(),t.push('/history')}function d(){c(),t.push('/worldbook')}function m(){c(),t.push('/settings')}function u(){c(),t.push('/')}function p(){a.toggleFullscreen()}function f(e){e.target.closest('.top-nav-bar')||c()}return(0,n.onMounted)(()=>{document.addEventListener('click',f)}),(0,n.onUnmounted)(()=>{document.removeEventListener('click',f)}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('header',ne,[(0,n.createElementVNode)('div',{class:'nav-left'},[(0,n.createElementVNode)('button',{class:'nav-btn menu-btn',title:'菜单',onClick:s},[...t[0]||(t[0]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-bars'},null,-1)])]),t[1]||(t[1]=(0,n.createElementVNode)('span',{class:'nav-title'},'点兔同层前端',-1))]),(0,n.createElementVNode)('div',oe,[(0,n.createElementVNode)('button',{class:'nav-btn',title:'历史消息',onClick:i},[...t[2]||(t[2]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-clock-rotate-left'},null,-1)])]),(0,n.createElementVNode)('button',{class:'nav-btn',title:'世界书管理',onClick:d},[...t[3]||(t[3]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-book'},null,-1)])]),(0,n.createElementVNode)('button',{class:'nav-btn',title:'设置',onClick:m},[...t[4]||(t[4]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-gear'},null,-1)])]),(0,n.createElementVNode)('button',{class:'nav-btn',title:(0,n.unref)(a).isFullscreen?'退出全屏':'全屏',onClick:p},[(0,n.createElementVNode)('i',{class:(0,n.normalizeClass)((0,n.unref)(a).isFullscreen?'fa-solid fa-compress':'fa-solid fa-expand')},null,2)],8,re)]),(0,n.createCommentVNode)(' Menu Dropdown '),(0,n.createVNode)(n.Transition,{name:'dropdown'},{default:(0,n.withCtx)(()=>[(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)('div',le,[(0,n.createElementVNode)('button',{class:'menu-item',onClick:i},[...t[5]||(t[5]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-clock-rotate-left'},null,-1),(0,n.createElementVNode)('span',null,'历史消息',-1)])]),(0,n.createElementVNode)('button',{class:'menu-item',onClick:d},[...t[6]||(t[6]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-book'},null,-1),(0,n.createElementVNode)('span',null,'世界书管理',-1)])]),(0,n.createElementVNode)('button',{class:'menu-item',onClick:m},[...t[7]||(t[7]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-gear'},null,-1),(0,n.createElementVNode)('span',null,'设置',-1)])]),t[9]||(t[9]=(0,n.createElementVNode)('hr',{class:'menu-divider'},null,-1)),(0,n.createElementVNode)('button',{class:'menu-item',onClick:u},[...t[8]||(t[8]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-house'},null,-1),(0,n.createElementVNode)('span',null,'返回首页',-1)])])])):(0,n.createCommentVNode)('v-if',!0)]),_:1}),(0,n.createCommentVNode)(' Overlay '),(0,n.createVNode)(n.Transition,{name:'fade'},{default:(0,n.withCtx)(()=>[(0,n.unref)(r)?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'menu-overlay',onClick:c})):(0,n.createCommentVNode)('v-if',!0)]),_:1})]))}}),ce=(0,N.A)(se,[['__scopeId','data-v-0d4c7aa6']]),ie={class:'game-main'},de={class:'main-content'},me=(0,n.defineComponent)({__name:'GameMain',setup(e){const t=(0,o.useRouter)(),a=(0,l.T)(),c=(0,s.C)(),i=(0,r.mq)();let m=!1,u=null;async function p(){try{const e=SillyTavern.chat.length-1;let t=null;for(let a=e;a>=0;a--){const e=getChatMessages(a)[0];if('assistant'===e?.role){t={message:e.message,message_id:a};break}}if(!t)return a.updateMessage('',0),void a.updateOptions([]);const n=d(t.message);if(!n.isValid){const e=n.context||'AI 回复格式异常，请使用下方按钮重新生成。';return a.updateMessage(e,t.message_id),a.updateOptions([{id:'system-reroll',title:'[系统]',content:'重 Roll（重新生成上一条 AI 回复）',isCustom:!1}]),void(m||(m=!0,toastr.warning(`AI 回复格式异常：${n.errors.join('；')}`)))}m=!1,a.updateMessage(n.context,t.message_id),a.updateOptions(n.options)}catch(e){console.error('[游戏主页面] 加载消息失败:',e)}}async function f(e){if(!a.isGenerating){a.setGenerating(!0);try{if('system-reroll'===e.id)return await triggerSlash('/trigger'),await new Promise(e=>setTimeout(e,500)),void await p();await createChatMessages([{role:'user',message:e.content}]),await triggerSlash('/trigger'),await new Promise(e=>setTimeout(e,500)),await p(),await i.refreshData();const t=i.getCurrentSceneCharacters();a.updateCurrentCharacters(t)}catch(e){console.error('[游戏主页面] 发送选项失败:',e),toastr.error('发送失败，请重试')}finally{a.setGenerating(!1)}}}function g(e){a.selectCharacter(e),t.push(`/character/${encodeURIComponent(e)}`)}return(0,n.onMounted)(async()=>{await async function(){try{await i.refreshData(),await p();const e=i.getCurrentSceneCharacters();a.updateCurrentCharacters(e),console.info('[游戏主页面] 初始化完成')}catch(e){console.error('[游戏主页面] 初始化失败:',e)}}()}),(0,n.onMounted)(()=>{u=eventOn(tavern_events.CHARACTER_MESSAGE_RENDERED,async()=>{await p(),await i.refreshData()})}),(0,n.onUnmounted)(()=>{u?.stop(),u=null}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',ie,[(0,n.createCommentVNode)(' Top Navigation Bar '),(0,n.createVNode)(ce),(0,n.createCommentVNode)(' Main Content Area '),(0,n.createElementVNode)('main',de,[(0,n.createCommentVNode)(' Message Display Area '),(0,n.createVNode)(T,{message:(0,n.unref)(a).currentMessage,'message-id':(0,n.unref)(a).currentMessageId,'display-mode':(0,n.unref)(c).settings.messageDisplayMode},null,8,['message','message-id','display-mode']),(0,n.createCommentVNode)(' Options Panel '),(0,n.createVNode)(ae,{options:(0,n.unref)(a).options,'allow-custom':(0,n.unref)(c).settings.allowCustomOptions,onSelect:f},null,8,['options','allow-custom'])]),(0,n.createCommentVNode)(' Character Bar (Collapsible) '),(0,n.unref)(c).settings.showCharacterBar?((0,n.openBlock)(),(0,n.createBlock)(B,{key:0,collapsed:(0,n.unref)(a).isCharacterBarCollapsed,characters:(0,n.unref)(a).currentCharacters,onToggle:(0,n.unref)(a).toggleCharacterBar,onSelectCharacter:g},null,8,['collapsed','characters','onToggle'])):(0,n.createCommentVNode)('v-if',!0)]))}}),ue=(0,N.A)(me,[['__scopeId','data-v-c1b8f2bc']])},729(e,t,a){a.d(t,{default:()=>E}),a.r(t);var n=a(300),o=a(268);const r={class:'history-messages'},l={class:'search-section'},s={class:'search-input-wrapper'},c={key:0,class:'loading-state'},i={class:'messages-list'},d=['onClick'],m={class:'message-info'},u={class:'message-header'},p={class:'message-role'},f={class:'message-id'},g={class:'message-preview'},v=['disabled'],N={key:1,class:'empty-state'},V=(0,n.defineComponent)({__name:'HistoryMessages',setup(e){const t=(0,o.useRouter)(),a=(0,n.ref)(''),V=(0,n.ref)(!0),E=(0,n.ref)(!1),h=(0,n.ref)([]),y=(0,n.ref)(!0),b=(0,n.ref)(0),k=(0,n.computed)(()=>{if(!a.value)return h.value;const e=a.value.toLowerCase();return h.value.filter(t=>t.preview.toLowerCase().includes(e))});async function C(){V.value=!0;try{const e=SillyTavern.chat.length,t=Math.max(0,e-20*(b.value+1)),a=e-20*b.value,n=[];for(let e=a-1;e>=t;e--){const t=getChatMessages(e)[0];t&&n.push({id:e,role:t.role,preview:w(t.message,100),fullContent:t.message})}h.value=[...h.value,...n],y.value=t>0}catch(e){console.error('[历史消息] 加载失败:',e)}finally{V.value=!1}}async function B(){!E.value&&y.value&&(E.value=!0,b.value++,await C(),E.value=!1)}function w(e,t){if(!e)return'';const a=e.replace(/<[^>]*>/g,'').trim();return a.length<=t?a:a.slice(0,t)+'...'}function S(e){switch(e){case'user':return'var(--clr-cocoa)';case'assistant':return'var(--clr-chino)';case'system':return'var(--text-muted)';default:return'var(--text-secondary)'}}function x(e){switch(e){case'user':return'fa-solid fa-user';case'assistant':return'fa-solid fa-robot';case'system':return'fa-solid fa-gear';default:return'fa-solid fa-message'}}function M(e){switch(e){case'user':return'用户';case'assistant':return'AI';case'system':return'系统';default:return'未知'}}function D(){a.value=''}function T(){t.push('/game')}return(0,n.onMounted)(()=>{C()}),(e,o)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',r,[(0,n.createCommentVNode)(' Header '),(0,n.createElementVNode)('header',{class:'history-header'},[(0,n.createElementVNode)('button',{class:'back-btn',onClick:T},[...o[1]||(o[1]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1)])]),o[2]||(o[2]=(0,n.createElementVNode)('h1',{class:'header-title'},'历史消息',-1))]),(0,n.createCommentVNode)(' Search Bar '),(0,n.createElementVNode)('div',l,[(0,n.createElementVNode)('div',s,[o[4]||(o[4]=(0,n.createElementVNode)('i',{class:'fa-solid fa-search'},null,-1)),(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':o[0]||(o[0]=e=>(0,n.isRef)(a)?a.value=e:null),type:'text',class:'search-input',placeholder:'搜索消息内容...'},null,512),[[n.vModelText,(0,n.unref)(a)]]),(0,n.unref)(a)?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'clear-btn',onClick:D},[...o[3]||(o[3]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-times'},null,-1)])])):(0,n.createCommentVNode)('v-if',!0)])]),(0,n.createCommentVNode)(' Loading State '),(0,n.unref)(V)?((0,n.openBlock)(),(0,n.createElementBlock)('div',c,[...o[5]||(o[5]=[(0,n.createElementVNode)('div',{class:'loading-spinner'},null,-1),(0,n.createElementVNode)('span',null,'加载中...',-1)])])):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createCommentVNode)(' Messages List '),(0,n.createElementVNode)('main',i,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(k),e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.id,class:'message-group',onClick:a=>async function(e){try{await triggerSlash(`/chat-jump ${e}`),t.push('/game')}catch(e){console.error('[历史消息] 跳转失败:',e),toastr.error('定位历史消息失败，请重试')}}(e.id)},[(0,n.createElementVNode)('div',{class:'message-avatar',style:(0,n.normalizeStyle)({backgroundColor:S(e.role)})},[(0,n.createElementVNode)('i',{class:(0,n.normalizeClass)(x(e.role))},null,2)],4),(0,n.createElementVNode)('div',m,[(0,n.createElementVNode)('div',u,[(0,n.createElementVNode)('span',p,(0,n.toDisplayString)(M(e.role)),1),(0,n.createElementVNode)('span',f,'第 '+(0,n.toDisplayString)(e.id)+' 楼',1)]),(0,n.createElementVNode)('p',g,(0,n.toDisplayString)(e.preview),1)]),o[6]||(o[6]=(0,n.createElementVNode)('i',{class:'fa-solid fa-chevron-right arrow-icon'},null,-1))],8,d))),128)),(0,n.createCommentVNode)(' Load More '),(0,n.unref)(y)?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'load-more-btn',disabled:(0,n.unref)(E),onClick:B},[(0,n.createElementVNode)('i',{class:(0,n.normalizeClass)((0,n.unref)(E)?'fa-solid fa-spinner fa-spin':'fa-solid fa-arrow-down')},null,2),(0,n.createElementVNode)('span',null,(0,n.toDisplayString)((0,n.unref)(E)?'加载中...':'加载更多'),1)],8,v)):(0,n.createCommentVNode)('v-if',!0),(0,n.createCommentVNode)(' Empty State '),0!==(0,n.unref)(k).length||(0,n.unref)(V)?(0,n.createCommentVNode)('v-if',!0):((0,n.openBlock)(),(0,n.createElementBlock)('div',N,[...o[7]||(o[7]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-inbox'},null,-1),(0,n.createElementVNode)('p',null,'暂无历史消息',-1)])]))])],2112))]))}});const E=(0,a(667).A)(V,[['__scopeId','data-v-b0c9d8ae']])},958(e,t,a){a.d(t,{default:()=>G}),a.r(t);var n=a(300),o=a(268),r=a(63);const l={class:'settings-page'},s={class:'settings-content'},c={class:'settings-section'},i={class:'setting-item'},d={class:'setting-control'},m={class:'setting-item'},u={class:'setting-control'},p={class:'theme-options'},f=['onClick'],g={class:'theme-name'},v={class:'setting-item'},N={class:'setting-control'},V={class:'setting-item'},E={class:'setting-control'},h={class:'font-size-control'},y={class:'size-value'},b={class:'settings-section'},k={class:'setting-item'},C={class:'setting-control'},B={class:'toggle-switch'},w={class:'setting-item'},S={class:'setting-control'},x={class:'toggle-switch'},M={class:'settings-section'},D={class:'setting-item'},T={class:'setting-control'},O={class:'toggle-switch'},A={class:'setting-item'},I={class:'setting-control'},j={class:'toggle-switch'},L={class:'setting-item'},R={class:'setting-control'},P={class:'slider-control'},F={class:'slider-value'},U=(0,n.defineComponent)({__name:'SettingsPage',setup(e){const t=(0,o.useRouter)(),a=(0,r.C)(),U=a.settings,G=[{id:'warm',name:'暖色',preview:'linear-gradient(135deg, #fef3c7, #fde68a)'},{id:'cool',name:'冷色',preview:'linear-gradient(135deg, #dbeafe, #bfdbfe)'},{id:'high-contrast',name:'高对比度',preview:'linear-gradient(135deg, #ffffff, #e5e5e5)'},{id:'eye-care',name:'护眼',preview:'linear-gradient(135deg, #f5f0e6, #ebe5d9)'}],H=['small','medium','large'],Q=(0,n.computed)(()=>'small'===U.fontSize?'小':'large'===U.fontSize?'大':'中');function q(){const e=H.indexOf(U.fontSize);e<H.length-1&&(U.fontSize=H[e+1])}function K(){const e=H.indexOf(U.fontSize);e>0&&(U.fontSize=H[e-1])}function W(){a.resetSettings(),toastr.success('设置已重置')}function X(){t.push('/game')}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',l,[(0,n.createElementVNode)('header',{class:'settings-header'},[(0,n.createElementVNode)('button',{class:'back-btn',onClick:X},[...t[7]||(t[7]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1)])]),t[8]||(t[8]=(0,n.createElementVNode)('h1',{class:'header-title'},'设置',-1))]),(0,n.createElementVNode)('main',s,[(0,n.createElementVNode)('section',c,[t[17]||(t[17]=(0,n.createElementVNode)('h2',{class:'section-title'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-display'}),(0,n.createTextVNode)(' 显示设置 ')],-1)),(0,n.createElementVNode)('div',i,[t[10]||(t[10]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'消息显示模式'),(0,n.createElementVNode)('span',{class:'setting-desc'},'选择消息的呈现方式')],-1)),(0,n.createElementVNode)('div',d,[(0,n.withDirectives)((0,n.createElementVNode)('select',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,n.unref)(U).messageDisplayMode=e),class:'setting-select'},[...t[9]||(t[9]=[(0,n.createElementVNode)('option',{value:'instant'},'即时显示（默认）',-1),(0,n.createElementVNode)('option',{value:'typewriter'},'打字机效果',-1),(0,n.createElementVNode)('option',{value:'segment'},'分段显示',-1)])],512),[[n.vModelSelect,(0,n.unref)(U).messageDisplayMode]])])]),(0,n.createElementVNode)('div',m,[t[11]||(t[11]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'主题'),(0,n.createElementVNode)('span',{class:'setting-desc'},'选择界面配色方案')],-1)),(0,n.createElementVNode)('div',u,[(0,n.createElementVNode)('div',p,[((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(G,e=>(0,n.createElementVNode)('button',{key:e.id,class:(0,n.normalizeClass)(['theme-btn',{active:(0,n.unref)(U).theme===e.id}]),onClick:t=>{return a=e.id,void(U.theme=a);var a}},[(0,n.createElementVNode)('span',{class:'theme-preview',style:(0,n.normalizeStyle)({background:e.preview})},null,4),(0,n.createElementVNode)('span',g,(0,n.toDisplayString)(e.name),1)],10,f)),64))])])]),(0,n.createElementVNode)('div',v,[t[13]||(t[13]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'字体方案'),(0,n.createElementVNode)('span',{class:'setting-desc'},'选择界面字体风格')],-1)),(0,n.createElementVNode)('div',N,[(0,n.withDirectives)((0,n.createElementVNode)('select',{'onUpdate:modelValue':t[1]||(t[1]=e=>(0,n.unref)(U).fontScheme=e),class:'setting-select'},[...t[12]||(t[12]=[(0,n.createElementVNode)('option',{value:'default'},'默认字体',-1),(0,n.createElementVNode)('option',{value:'reading'},'阅读字体',-1),(0,n.createElementVNode)('option',{value:'artistic'},'艺术字体',-1)])],512),[[n.vModelSelect,(0,n.unref)(U).fontScheme]])])]),(0,n.createElementVNode)('div',V,[t[16]||(t[16]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'字体大小'),(0,n.createElementVNode)('span',{class:'setting-desc'},'调整界面文字大小')],-1)),(0,n.createElementVNode)('div',E,[(0,n.createElementVNode)('div',h,[(0,n.createElementVNode)('button',{class:'size-btn',onClick:K},[...t[14]||(t[14]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-minus'},null,-1)])]),(0,n.createElementVNode)('span',y,(0,n.toDisplayString)((0,n.unref)(Q)),1),(0,n.createElementVNode)('button',{class:'size-btn',onClick:q},[...t[15]||(t[15]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-plus'},null,-1)])])])])])]),(0,n.createElementVNode)('section',b,[t[22]||(t[22]=(0,n.createElementVNode)('h2',{class:'section-title'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-wand-magic-sparkles'}),(0,n.createTextVNode)(' 动画设置 ')],-1)),(0,n.createElementVNode)('div',k,[t[19]||(t[19]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'启用动画'),(0,n.createElementVNode)('span',{class:'setting-desc'},'开启界面过渡动画效果')],-1)),(0,n.createElementVNode)('div',C,[(0,n.createElementVNode)('label',B,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[2]||(t[2]=e=>(0,n.unref)(U).enableAnimations=e),type:'checkbox'},null,512),[[n.vModelCheckbox,(0,n.unref)(U).enableAnimations]]),t[18]||(t[18]=(0,n.createElementVNode)('span',{class:'toggle-slider'},null,-1))])])]),(0,n.createElementVNode)('div',w,[t[21]||(t[21]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'打字机效果'),(0,n.createElementVNode)('span',{class:'setting-desc'},'消息逐字显示效果')],-1)),(0,n.createElementVNode)('div',S,[(0,n.createElementVNode)('label',x,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[3]||(t[3]=e=>(0,n.unref)(U).typewriterEffect=e),type:'checkbox'},null,512),[[n.vModelCheckbox,(0,n.unref)(U).typewriterEffect]]),t[20]||(t[20]=(0,n.createElementVNode)('span',{class:'toggle-slider'},null,-1))])])])]),(0,n.createElementVNode)('section',M,[t[28]||(t[28]=(0,n.createElementVNode)('h2',{class:'section-title'},[(0,n.createElementVNode)('i',{class:'fa-solid fa-hand-pointer'}),(0,n.createTextVNode)(' 交互设置 ')],-1)),(0,n.createElementVNode)('div',D,[t[24]||(t[24]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'自动滚动'),(0,n.createElementVNode)('span',{class:'setting-desc'},'新消息时自动滚动到底部')],-1)),(0,n.createElementVNode)('div',T,[(0,n.createElementVNode)('label',O,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[4]||(t[4]=e=>(0,n.unref)(U).autoScroll=e),type:'checkbox'},null,512),[[n.vModelCheckbox,(0,n.unref)(U).autoScroll]]),t[23]||(t[23]=(0,n.createElementVNode)('span',{class:'toggle-slider'},null,-1))])])]),(0,n.createElementVNode)('div',A,[t[26]||(t[26]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'显示角色栏'),(0,n.createElementVNode)('span',{class:'setting-desc'},'在界面底部显示角色状态栏')],-1)),(0,n.createElementVNode)('div',I,[(0,n.createElementVNode)('label',j,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[5]||(t[5]=e=>(0,n.unref)(U).showCharacterBar=e),type:'checkbox'},null,512),[[n.vModelCheckbox,(0,n.unref)(U).showCharacterBar]]),t[25]||(t[25]=(0,n.createElementVNode)('span',{class:'toggle-slider'},null,-1))])])]),(0,n.createElementVNode)('div',L,[t[27]||(t[27]=(0,n.createElementVNode)('div',{class:'setting-info'},[(0,n.createElementVNode)('span',{class:'setting-label'},'背景模糊'),(0,n.createElementVNode)('span',{class:'setting-desc'},'背景图片模糊效果')],-1)),(0,n.createElementVNode)('div',R,[(0,n.createElementVNode)('div',P,[(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[6]||(t[6]=e=>(0,n.unref)(U).backgroundBlur=e),type:'range',min:'0',max:'20',class:'setting-slider'},null,512),[[n.vModelText,(0,n.unref)(U).backgroundBlur,void 0,{number:!0}]]),(0,n.createElementVNode)('span',F,(0,n.toDisplayString)((0,n.unref)(U).backgroundBlur)+'px',1)])])])]),t[30]||(t[30]=(0,n.createStaticVNode)('<section class="settings-section" data-v-3724b6ef><h2 class="section-title" data-v-3724b6ef><i class="fa-solid fa-circle-info" data-v-3724b6ef></i> 关于 </h2><div class="about-content" data-v-3724b6ef><div class="about-logo" data-v-3724b6ef><div class="logo-placeholder" data-v-3724b6ef><i class="fa-solid fa-mug-hot" data-v-3724b6ef></i></div></div><div class="about-info" data-v-3724b6ef><h3 class="about-title" data-v-3724b6ef>点兔互动界面</h3><p class="about-version" data-v-3724b6ef>版本 1.0.0</p><p class="about-desc" data-v-3724b6ef> 基于「请问您今天要来点兔子吗？」世界观的沉浸式文字冒险游戏界面。采用法式艺术风格设计，为您带来温馨治愈的互动体验。 </p></div></div></section>',1)),(0,n.createElementVNode)('div',{class:'settings-footer'},[(0,n.createElementVNode)('button',{class:'btn btn-danger',onClick:W},[...t[29]||(t[29]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-rotate-left'},null,-1),(0,n.createTextVNode)(' 重置为默认设置 ',-1)])])])])]))}});const G=(0,a(667).A)(U,[['__scopeId','data-v-3724b6ef']])},893(e,t,a){a.d(t,{default:()=>u}),a.r(t);var n=a(300),o=a(268),r=a(635),l=a(682);const s={class:'start-screen'},c={class:'start-content'},i=['disabled'],d={class:'decorative-rabbits'},m=(0,n.defineComponent)({__name:'StartScreen',setup(e){const t=(0,o.useRouter)(),a=(0,r.mq)(),m=(0,l.T)(),u=(0,n.ref)(!1);async function p(){if(!u.value){u.value=!0,m.setLoading(!0);try{await a.initialize(),t.push('/game')}catch(e){console.error('[启动] 初始化失败:',e),toastr.error('初始化失败，请刷新页面重试')}finally{u.value=!1,m.setLoading(!1)}}}function f(e){const t=[{left:'5%',top:'15%',size:'20px',delay:'0s'},{left:'90%',top:'25%',size:'16px',delay:'0.5s'},{left:'8%',top:'75%',size:'18px',delay:'1s'},{left:'92%',top:'70%',size:'22px',delay:'1.5s'},{left:'50%',top:'90%',size:'14px',delay:'2s'}],a=t[e-1]||t[0];return{left:a.left,top:a.top,width:a.size,height:a.size,animationDelay:a.delay}}return(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',s,[(0,n.createElementVNode)('div',c,[(0,n.createCommentVNode)(' Logo '),t[1]||(t[1]=(0,n.createElementVNode)('div',{class:'logo-container animate-fadeInDown'},[(0,n.createElementVNode)('svg',{class:'logo-svg',viewBox:'0 0 400 120'},[(0,n.createElementVNode)('text',{x:'50%',y:'50%','text-anchor':'middle','dominant-baseline':'middle',class:'logo-text'},' ご注文はうさぎですか？ '),(0,n.createElementVNode)('text',{x:'50%',y:'85%','text-anchor':'middle','dominant-baseline':'middle',class:'logo-subtitle'},' 请问您今天要来点兔子吗？ ')])],-1)),(0,n.createCommentVNode)(' Press Start Button '),(0,n.createElementVNode)('button',{class:'press-start-btn animate-fadeInUp',disabled:(0,n.unref)(u),onClick:p},[(0,n.createElementVNode)('span',{class:(0,n.normalizeClass)(['btn-text',{'animate-pulse':!(0,n.unref)(u)}])},(0,n.toDisplayString)((0,n.unref)(u)?'加载中...':'Press Start'),3),t[0]||(t[0]=(0,n.createElementVNode)('span',{class:'btn-decor'},null,-1))],8,i),(0,n.createCommentVNode)(' Version Info '),t[2]||(t[2]=(0,n.createElementVNode)('div',{class:'version-info animate-fadeIn'},[(0,n.createElementVNode)('span',null,'Version 1.0.0'),(0,n.createElementVNode)('span',{class:'separator'},'|'),(0,n.createElementVNode)('span',null,'点兔同层前端')],-1))]),(0,n.createCommentVNode)(' Decorative elements '),(0,n.createElementVNode)('div',d,[((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)(5,e=>(0,n.createElementVNode)('svg',{key:e,class:'rabbit-icon',style:(0,n.normalizeStyle)(f(e)),viewBox:'0 0 24 24'},[...t[3]||(t[3]=[(0,n.createElementVNode)('path',{d:'M12 2C9.5 2 7.5 4 7.5 6.5C7.5 7.5 7.8 8.4 8.3 9.1L6 14L9 12L12 16L15 12L18 14L15.7 9.1C16.2 8.4 16.5 7.5 16.5 6.5C16.5 4 14.5 2 12 2Z',fill:'currentColor'},null,-1)])],4)),64))])]))}});const u=(0,a(667).A)(m,[['__scopeId','data-v-6d07b234']])},618(e,t,a){a.d(t,{default:()=>D}),a.r(t);var n=a(300),o=a(268);const r={class:'worldbook-manager'},l={class:'search-section'},s={class:'search-input-wrapper'},c={key:0,class:'loading-state'},i={class:'entries-list'},d={class:'entry-toggle'},m={class:'toggle-switch'},u=['checked','onChange'],p={class:'entry-info'},f={class:'entry-header'},g={class:'entry-key'},v={class:'entry-comment'},N=['onClick'],V={key:0,class:'empty-state'},E={class:'modal-header'},h={class:'modal-title'},y={class:'modal-body'},b={class:'detail-item'},k={class:'detail-value'},C={class:'detail-item'},B={class:'detail-value'},w={class:'detail-item'},S={class:'detail-content'},x={class:'modal-footer'},M=(0,n.defineComponent)({__name:'WorldbookManager',setup(e){const t=(0,o.useRouter)(),a=(0,n.ref)(''),M=(0,n.ref)(!0),D=(0,n.ref)([]),T=(0,n.ref)(null),O=(0,n.ref)(null),A=(0,n.computed)(()=>{if(!a.value)return D.value;const e=a.value.toLowerCase();return D.value.filter(t=>t.name.toLowerCase().includes(e)||t.comment?.toLowerCase().includes(e)||t.content.toLowerCase().includes(e)||t.keys.some(t=>t.toLowerCase().includes(e)))});async function I(e){if(O.value)try{await updateWorldbookWith(O.value,t=>t.map(t=>t.uid===e.uid?{...t,enabled:!e.enabled}:t)),e.enabled=!e.enabled,toastr.success(e.enabled?'已启用条目':'已禁用条目')}catch(e){console.error('[世界书] 切换状态失败:',e),toastr.error('操作失败')}}function j(){T.value=null}function L(){a.value=''}function R(){t.push('/game')}return(0,n.onMounted)(()=>{!async function(){M.value=!0;try{const e=getCharWorldbookNames('current').primary;if(!e)return console.log('[世界书] 当前角色卡没有绑定世界书'),void(D.value=[]);O.value=e;const t=await getWorldbook(e);t&&Array.isArray(t)&&(D.value=t.map(e=>({uid:e.uid,name:e.name||'未命名',keys:e.strategy?.keys?.map(e=>String(e))||[],comment:e.content?.slice(0,100),content:e.content||'',enabled:e.enabled??!0})))}catch(e){console.error('[世界书] 加载失败:',e)}finally{M.value=!1}}()}),(e,t)=>((0,n.openBlock)(),(0,n.createElementBlock)('div',r,[(0,n.createCommentVNode)(' Header '),(0,n.createElementVNode)('header',{class:'wb-header'},[(0,n.createElementVNode)('button',{class:'back-btn',onClick:R},[...t[3]||(t[3]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-arrow-left'},null,-1)])]),t[4]||(t[4]=(0,n.createElementVNode)('h1',{class:'header-title'},'世界书管理',-1))]),(0,n.createCommentVNode)(' Search Bar '),(0,n.createElementVNode)('div',l,[(0,n.createElementVNode)('div',s,[t[6]||(t[6]=(0,n.createElementVNode)('i',{class:'fa-solid fa-search'},null,-1)),(0,n.withDirectives)((0,n.createElementVNode)('input',{'onUpdate:modelValue':t[0]||(t[0]=e=>(0,n.isRef)(a)?a.value=e:null),type:'text',class:'search-input',placeholder:'搜索条目...'},null,512),[[n.vModelText,(0,n.unref)(a)]]),(0,n.unref)(a)?((0,n.openBlock)(),(0,n.createElementBlock)('button',{key:0,class:'clear-btn',onClick:L},[...t[5]||(t[5]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-times'},null,-1)])])):(0,n.createCommentVNode)('v-if',!0)])]),(0,n.createCommentVNode)(' Loading State '),(0,n.unref)(M)?((0,n.openBlock)(),(0,n.createElementBlock)('div',c,[...t[7]||(t[7]=[(0,n.createElementVNode)('div',{class:'loading-spinner'},null,-1),(0,n.createElementVNode)('span',null,'加载中...',-1)])])):((0,n.openBlock)(),(0,n.createElementBlock)(n.Fragment,{key:1},[(0,n.createCommentVNode)(' Entries List '),(0,n.createElementVNode)('main',i,[((0,n.openBlock)(!0),(0,n.createElementBlock)(n.Fragment,null,(0,n.renderList)((0,n.unref)(A),e=>((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:e.uid,class:'entry-card'},[(0,n.createElementVNode)('div',d,[(0,n.createElementVNode)('label',m,[(0,n.createElementVNode)('input',{type:'checkbox',checked:e.enabled,onChange:t=>I(e)},null,40,u),t[8]||(t[8]=(0,n.createElementVNode)('span',{class:'toggle-slider'},null,-1))])]),(0,n.createElementVNode)('div',p,[(0,n.createElementVNode)('div',f,[(0,n.createElementVNode)('span',g,(0,n.toDisplayString)(e.name),1),(0,n.createElementVNode)('span',{class:(0,n.normalizeClass)(['entry-status',{enabled:e.enabled,disabled:!e.enabled}])},(0,n.toDisplayString)(e.enabled?'已启用':'已禁用'),3)]),(0,n.createElementVNode)('p',v,(0,n.toDisplayString)(e.comment||'无描述'),1)]),(0,n.createElementVNode)('button',{class:'entry-action',title:'查看详情',onClick:t=>function(e){T.value=e}(e)},[...t[9]||(t[9]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-eye'},null,-1)])],8,N)]))),128)),(0,n.createCommentVNode)(' Empty State '),0!==(0,n.unref)(A).length||(0,n.unref)(M)?(0,n.createCommentVNode)('v-if',!0):((0,n.openBlock)(),(0,n.createElementBlock)('div',V,[...t[10]||(t[10]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-book-open'},null,-1),(0,n.createElementVNode)('p',null,'暂无世界书条目',-1)])]))])],2112)),(0,n.createCommentVNode)(' Entry Detail Modal '),(0,n.createVNode)(n.Transition,{name:'modal'},{default:(0,n.withCtx)(()=>[(0,n.unref)(T)?((0,n.openBlock)(),(0,n.createElementBlock)('div',{key:0,class:'modal-overlay',onClick:j},[(0,n.createElementVNode)('div',{class:'modal-content',onClick:t[2]||(t[2]=(0,n.withModifiers)(()=>{},['stop']))},[(0,n.createElementVNode)('header',E,[(0,n.createElementVNode)('h2',h,(0,n.toDisplayString)((0,n.unref)(T).name),1),(0,n.createElementVNode)('button',{class:'modal-close',onClick:j},[...t[11]||(t[11]=[(0,n.createElementVNode)('i',{class:'fa-solid fa-times'},null,-1)])])]),(0,n.createElementVNode)('div',y,[(0,n.createElementVNode)('div',b,[t[12]||(t[12]=(0,n.createElementVNode)('span',{class:'detail-label'},'关键词',-1)),(0,n.createElementVNode)('span',k,(0,n.toDisplayString)((0,n.unref)(T).keys?.join(', ')||'无'),1)]),(0,n.createElementVNode)('div',C,[t[13]||(t[13]=(0,n.createElementVNode)('span',{class:'detail-label'},'描述',-1)),(0,n.createElementVNode)('span',B,(0,n.toDisplayString)((0,n.unref)(T).comment||'无'),1)]),(0,n.createElementVNode)('div',w,[t[14]||(t[14]=(0,n.createElementVNode)('span',{class:'detail-label'},'内容',-1)),(0,n.createElementVNode)('pre',S,(0,n.toDisplayString)((0,n.unref)(T).content),1)])]),(0,n.createElementVNode)('footer',x,[(0,n.createElementVNode)('button',{class:'btn btn-secondary',onClick:j},'关闭'),(0,n.createElementVNode)('button',{class:'btn btn-primary',onClick:t[1]||(t[1]=e=>I((0,n.unref)(T)))},(0,n.toDisplayString)((0,n.unref)(T).enabled?'禁用':'启用'),1)])])])):(0,n.createCommentVNode)('v-if',!0)]),_:1})]))}});const D=(0,a(667).A)(M,[['__scopeId','data-v-21d39fba']])},667(e,t){t.A=(e,t)=>{const a=e.__vccOpts||e;for(const[e,n]of t)a[e]=n;return a}},35(e,t,a){e.exports=(e=>{var t={};return a.d(t,e),t})({createPinia:()=>n.createPinia,defineStore:()=>n.defineStore})},268(e,t,a){e.exports=(e=>{var t={};return a.d(t,e),t})({createMemoryHistory:()=>o.createMemoryHistory,createRouter:()=>o.createRouter,useRoute:()=>o.useRoute,useRouter:()=>o.useRouter})},300(e,t,a){e.exports=(e=>{var t={};return a.d(t,e),t})({Fragment:()=>r.Fragment,Transition:()=>r.Transition,TransitionGroup:()=>r.TransitionGroup,computed:()=>r.computed,createApp:()=>r.createApp,createBlock:()=>r.createBlock,createCommentVNode:()=>r.createCommentVNode,createElementBlock:()=>r.createElementBlock,createElementVNode:()=>r.createElementVNode,createStaticVNode:()=>r.createStaticVNode,createTextVNode:()=>r.createTextVNode,createVNode:()=>r.createVNode,defineComponent:()=>r.defineComponent,isRef:()=>r.isRef,normalizeClass:()=>r.normalizeClass,normalizeStyle:()=>r.normalizeStyle,onMounted:()=>r.onMounted,onUnmounted:()=>r.onUnmounted,openBlock:()=>r.openBlock,ref:()=>r.ref,renderList:()=>r.renderList,resolveComponent:()=>r.resolveComponent,resolveDynamicComponent:()=>r.resolveDynamicComponent,toDisplayString:()=>r.toDisplayString,unref:()=>r.unref,vModelCheckbox:()=>r.vModelCheckbox,vModelSelect:()=>r.vModelSelect,vModelText:()=>r.vModelText,vShow:()=>r.vShow,watch:()=>r.watch,watchEffect:()=>r.watchEffect,withCtx:()=>r.withCtx,withDirectives:()=>r.withDirectives,withKeys:()=>r.withKeys,withModifiers:()=>r.withModifiers})}},s={};function c(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={exports:{}};return l[e](a,a.exports,c),a.exports}c.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return c.d(t,{a:t}),t},c.d=(e,t)=>{for(var a in t)c.o(t,a)&&!c.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},c.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),c.r=e=>{'undefined'!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:'Module'}),Object.defineProperty(e,'__esModule',{value:!0})};var i=c(35),d=c(300),m=c(268);const u={class:'background-layer'},p={class:'particles'},f=(0,d.defineComponent)({__name:'BackgroundLayer',setup(e){function t(e){const t=[{left:'10%',top:'20%',delay:'0s',duration:'4s'},{left:'80%',top:'15%',delay:'1s',duration:'5s'},{left:'25%',top:'70%',delay:'2s',duration:'4.5s'},{left:'70%',top:'60%',delay:'0.5s',duration:'5.5s'},{left:'50%',top:'40%',delay:'1.5s',duration:'4s'},{left:'35%',top:'85%',delay:'2.5s',duration:'5s'}],a=t[e-1]||t[0];return{left:a.left,top:a.top,animationDelay:a.delay,animationDuration:a.duration}}return(e,a)=>((0,d.openBlock)(),(0,d.createElementBlock)('div',u,[(0,d.createCommentVNode)(' Base gradient '),a[0]||(a[0]=(0,d.createElementVNode)('div',{class:'bg-gradient'},null,-1)),(0,d.createCommentVNode)(' Decorative pattern overlay '),a[1]||(a[1]=(0,d.createElementVNode)('div',{class:'bg-pattern'},null,-1)),(0,d.createCommentVNode)(' Corner decorations '),a[2]||(a[2]=(0,d.createStaticVNode)('<svg class="corner-decor corner-top-left" width="120" height="120" viewBox="0 0 120 120" data-v-6d0309e0><path d="M0,0 Q60,10 50,50 T0,100" fill="none" stroke="var(--decor-gold)" stroke-width="1.5" opacity="0.3" data-v-6d0309e0></path><path d="M0,20 Q40,25 35,55 T0,90" fill="none" stroke="var(--decor-rose)" stroke-width="1" opacity="0.2" data-v-6d0309e0></path><circle cx="20" cy="20" r="3" fill="var(--decor-gold)" opacity="0.4" data-v-6d0309e0></circle></svg><svg class="corner-decor corner-top-right" width="120" height="120" viewBox="0 0 120 120" data-v-6d0309e0><path d="M120,0 Q60,10 70,50 T120,100" fill="none" stroke="var(--decor-gold)" stroke-width="1.5" opacity="0.3" data-v-6d0309e0></path><path d="M120,20 Q80,25 85,55 T120,90" fill="none" stroke="var(--decor-rose)" stroke-width="1" opacity="0.2" data-v-6d0309e0></path><circle cx="100" cy="20" r="3" fill="var(--decor-gold)" opacity="0.4" data-v-6d0309e0></circle></svg><svg class="corner-decor corner-bottom-left" width="120" height="120" viewBox="0 0 120 120" data-v-6d0309e0><path d="M0,120 Q60,110 50,70 T0,20" fill="none" stroke="var(--decor-gold)" stroke-width="1.5" opacity="0.3" data-v-6d0309e0></path><path d="M0,100 Q40,95 35,65 T0,30" fill="none" stroke="var(--decor-rose)" stroke-width="1" opacity="0.2" data-v-6d0309e0></path><circle cx="20" cy="100" r="3" fill="var(--decor-gold)" opacity="0.4" data-v-6d0309e0></circle></svg><svg class="corner-decor corner-bottom-right" width="120" height="120" viewBox="0 0 120 120" data-v-6d0309e0><path d="M120,120 Q60,110 70,70 T120,20" fill="none" stroke="var(--decor-gold)" stroke-width="1.5" opacity="0.3" data-v-6d0309e0></path><path d="M120,100 Q80,95 85,65 T120,30" fill="none" stroke="var(--decor-rose)" stroke-width="1" opacity="0.2" data-v-6d0309e0></path><circle cx="100" cy="100" r="3" fill="var(--decor-gold)" opacity="0.4" data-v-6d0309e0></circle></svg>',4)),(0,d.createCommentVNode)(' Floating particles '),(0,d.createElementVNode)('div',p,[((0,d.openBlock)(),(0,d.createElementBlock)(d.Fragment,null,(0,d.renderList)(6,e=>(0,d.createElementVNode)('div',{key:e,class:'particle',style:(0,d.normalizeStyle)(t(e))},null,4)),64))])]))}});var g=c(667);const v=(0,g.A)(f,[['__scopeId','data-v-6d0309e0']]);var N=c(63);const V=['data-theme','data-font','data-font-size'],E=(0,d.defineComponent)({__name:'App',setup(e){const t=(0,N.C)();return(e,a)=>{const n=(0,d.resolveComponent)('router-view');return(0,d.openBlock)(),(0,d.createElementBlock)('div',{class:'app-container','data-theme':(0,d.unref)(t).settings.theme,'data-font':(0,d.unref)(t).settings.fontScheme,'data-font-size':(0,d.unref)(t).settings.fontSize},[(0,d.createVNode)(v),(0,d.createVNode)(n,null,{default:(0,d.withCtx)(({Component:e})=>[(0,d.createVNode)(d.Transition,{name:'page',mode:'out-in'},{default:(0,d.withCtx)(()=>[((0,d.openBlock)(),(0,d.createBlock)((0,d.resolveDynamicComponent)(e)))]),_:2},1024)]),_:1})],8,V)}}}),h=(0,g.A)(E,[['__scopeId','data-v-5fd69381']]),y=[{path:'/',name:'start',component:()=>Promise.resolve().then(c.bind(c,893))},{path:'/game',name:'game',component:()=>Promise.resolve().then(c.bind(c,436))},{path:'/character/:name',name:'character',component:()=>Promise.resolve().then(c.bind(c,482))},{path:'/history',name:'history',component:()=>Promise.resolve().then(c.bind(c,729))},{path:'/worldbook',name:'worldbook',component:()=>Promise.resolve().then(c.bind(c,618))},{path:'/settings',name:'settings',component:()=>Promise.resolve().then(c.bind(c,958))}],b=(0,m.createRouter)({history:(0,m.createMemoryHistory)(),routes:y}),k=(0,d.createApp)(h);k.use((0,i.createPinia)()),k.use(b),$(()=>{k.mount('#app'),console.info('[同层前端] 界面加载成功')}),$(window).on('pagehide',()=>{k.unmount(),console.info('[同层前端] 界面卸载成功')});
//# sourceMappingURL=index.js.map</script><style>@import url(https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&family=Noto+Serif+SC:wght@400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap);
.background-layer[data-v-6d0309e0]{position:fixed;inset:0;z-index:-1;overflow:hidden;pointer-events:none}.bg-gradient[data-v-6d0309e0]{position:absolute;inset:0;background:linear-gradient(135deg,var(--primary-bg) 0%,var(--secondary-bg) 50%,var(--primary-bg) 100%)}.bg-pattern[data-v-6d0309e0]{position:absolute;inset:0;opacity:.03;background-image:url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23c9a86c' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")}.corner-decor[data-v-6d0309e0]{position:absolute;opacity:.6;transition:opacity var(--transition-slow)}.corner-decor.corner-top-left[data-v-6d0309e0]{top:0;left:0}.corner-decor.corner-top-right[data-v-6d0309e0]{top:0;right:0;transform:scaleX(-1)}.corner-decor.corner-bottom-left[data-v-6d0309e0]{bottom:0;left:0;transform:scaleY(-1)}.corner-decor.corner-bottom-right[data-v-6d0309e0]{bottom:0;right:0;transform:scale(-1,-1)}.particles[data-v-6d0309e0]{position:absolute;inset:0}.particle[data-v-6d0309e0]{position:absolute;width:4px;height:4px;background:var(--decor-gold);border-radius:50%;opacity:0;animation:particleFloat-6d0309e0 4s ease-in-out infinite}.particle[data-v-6d0309e0]::before{content:"";position:absolute;width:8px;height:8px;background:radial-gradient(circle,var(--decor-gold) 0%,transparent 70%);border-radius:50%;transform:translate(-2px,-2px)}@keyframes particleFloat-6d0309e0{0%,100%{opacity:0;transform:translateY(0) scale(0.5)}50%{opacity:.6;transform:translateY(-30px) scale(1)}}@media (max-width:767px){.corner-decor[data-v-6d0309e0]{width:80px;height:80px;opacity:.4}.particle[data-v-6d0309e0]{display:none}}
.app-container[data-v-5fd69381]{min-height:100vh;position:relative;overflow:hidden}.page-enter-active[data-v-5fd69381],.page-leave-active[data-v-5fd69381]{transition:opacity .3s ease,transform .3s ease}.page-enter-from[data-v-5fd69381]{opacity:0;transform:translateX(20px)}.page-leave-to[data-v-5fd69381]{opacity:0;transform:translateX(-20px)}
/*! tailwindcss v4.2.0 | MIT License | https://tailwindcss.com */:root{--clr-cocoa:#f5b0b6;--clr-chino:#8ab7eb;--clr-rize:#ae96d8;--clr-chiya:#87ce87;--clr-syaro:#f5d36e;--clr-maya:#7dd4df;--clr-megu:#f7a699;--clr-fuyu:#8d8fd6;--clr-yura:#e58ec4;--clr-natsume:#ce67e8;--clr-eru:#faa548;--clr-aoyama:#4778d1;--clr-mate:#4bafd7;--clr-mocha:#b7df69;--primary-bg:#faf8f5;--secondary-bg:#f5f0e8;--accent-color:#d4a574;--text-primary:#4a4a4a;--text-secondary:#7a7a7a;--text-muted:#9a9a9a;--border-color:#e8e0d5;--card-bg:rgba(255,255,255,0.9);--card-shadow:rgba(0,0,0,0.08);--overlay-bg:rgba(0,0,0,0.5);--decor-gold:#c9a86c;--decor-rose:#e8c4c4;--decor-lavender:#d4c4e8;--font-primary:'Noto Serif SC','Source Han Serif CN',serif;--font-heading:'Noto Serif SC',serif;--font-ui:'Noto Sans SC','Source Han Sans CN',sans-serif;--font-decor:'Playfair Display',serif;--font-size-xs:0.75rem;--font-size-sm:0.875rem;--font-size-base:1rem;--font-size-lg:1.125rem;--font-size-xl:1.25rem;--font-size-2xl:1.5rem;--font-size-3xl:2rem;--spacing-xs:0.25rem;--spacing-sm:0.5rem;--spacing-md:1rem;--spacing-lg:1.5rem;--spacing-xl:2rem;--spacing-2xl:3rem;--radius-sm:4px;--radius-md:8px;--radius-lg:12px;--radius-xl:16px;--radius-full:9999px;--transition-fast:150ms ease;--transition-normal:250ms ease;--transition-slow:400ms ease;--z-base:0;--z-dropdown:100;--z-sticky:200;--z-modal:300;--z-toast:400}[data-theme=cool]{--primary-bg:#f0f4f8;--secondary-bg:#e8f0f8;--accent-color:#6b8cae;--text-primary:#3a4a5a;--text-secondary:#6a7a8a;--text-muted:#8a9a9a;--border-color:#d0dce8;--card-bg:rgba(255,255,255,0.95);--card-shadow:rgba(0,0,0,0.06)}[data-theme=high-contrast]{--primary-bg:#ffffff;--secondary-bg:#f5f5f5;--accent-color:#1a1a1a;--text-primary:#000000;--text-secondary:#333333;--text-muted:#666666;--border-color:#cccccc;--card-bg:#ffffff;--card-shadow:rgba(0,0,0,0.15)}[data-theme=eye-care]{--primary-bg:#f5f0e6;--secondary-bg:#ebe5d9;--accent-color:#8b7355;--text-primary:#5a4a3a;--text-secondary:#7a6a5a;--text-muted:#9a8a7a;--border-color:#d5cfc3;--card-bg:rgba(250,245,235,0.95);--card-shadow:rgba(0,0,0,0.05)}[data-font=reading]{--font-primary:'LXGW WenKai','Noto Serif SC',serif}[data-font=artistic]{--font-primary:'ZCOOL QingKe HuangYou','Noto Serif SC',serif}[data-font-size=small]{--font-size-base:0.875rem;--font-size-sm:0.75rem;--font-size-lg:1rem}[data-font-size=large]{--font-size-base:1.125rem;--font-size-sm:1rem;--font-size-lg:1.25rem}*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}html{font-size:16px;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}body{font-family:var(--font-primary);font-size:var(--font-size-base);line-height:1.6;color:var(--text-primary);background-color:var(--primary-bg);min-height:100vh;overflow-x:hidden}h1,h2,h3,h4,h5,h6{font-family:var(--font-heading);font-weight:600;line-height:1.3;color:var(--text-primary)}h1{font-size:var(--font-size-3xl)}h2{font-size:var(--font-size-2xl)}h3{font-size:var(--font-size-xl)}p{margin-bottom:var(--spacing-md)}a{color:var(--accent-color);text-decoration:none;transition:color var(--transition-fast)}a:hover{color:var(--text-primary)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.text-muted{color:var(--text-muted)}.text-secondary{color:var(--text-secondary)}.font-ui{font-family:var(--font-ui)}.font-primary{font-family:var(--font-primary)}@keyframes fadeIn{from{opacity:0}to{opacity:1}}@keyframes fadeInUp{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes fadeInDown{from{opacity:0;transform:translateY(-20px)}to{opacity:1;transform:translateY(0)}}@keyframes slideInUp{from{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes slideInDown{from{transform:translateY(-100%)}to{transform:translateY(0)}}@keyframes pulse{0%,100%{opacity:1}50%{opacity:.5}}@keyframes shimmer{0%{background-position:-200% 0}100%{background-position:200% 0}}@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}@keyframes breathe{0%,100%{transform:scale(1)}50%{transform:scale(1.02)}}@keyframes typewriter{from{width:0}to{width:100%}}.animate-fadeIn{animation:fadeIn var(--transition-normal) ease forwards}.animate-fadeInUp{animation:fadeInUp var(--transition-slow) ease forwards}.animate-fadeInDown{animation:fadeInDown var(--transition-slow) ease forwards}.animate-pulse{animation:pulse 2s ease-in-out infinite}.animate-float{animation:float 3s ease-in-out infinite}.animate-breathe{animation:breathe 4s ease-in-out infinite}::-webkit-scrollbar{width:8px;height:8px}::-webkit-scrollbar-track{background:var(--secondary-bg);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb{background:var(--border-color);border-radius:var(--radius-full)}::-webkit-scrollbar-thumb:hover{background:var(--text-muted)}::selection{background:var(--accent-color);color:#fff}:focus-visible{outline:2px solid var(--accent-color);outline-offset:2px}.btn{display:inline-flex;align-items:center;justify-content:center;padding:var(--spacing-sm) var(--spacing-lg);font-family:var(--font-ui);font-size:var(--font-size-sm);font-weight:500;line-height:1.5;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none;border:1px solid rgba(0,0,0,0);border-radius:var(--radius-md);transition:all var(--transition-fast)}.btn:disabled{opacity:.6;cursor:not-allowed}.btn-primary{background-color:var(--accent-color);color:#fff}.btn-primary:hover:not(:disabled){filter:brightness(1.1)}.btn-primary:active:not(:disabled){filter:brightness(0.95)}.btn-secondary{background-color:var(--secondary-bg);color:var(--text-primary);border-color:var(--border-color)}.btn-secondary:hover:not(:disabled){background-color:var(--border-color)}.btn-ghost{background-color:rgba(0,0,0,0);color:var(--text-secondary)}.btn-ghost:hover:not(:disabled){background-color:var(--secondary-bg);color:var(--text-primary)}.card{background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:0 4px 12px var(--card-shadow);overflow:hidden}.modal-overlay{position:fixed;inset:0;background:var(--overlay-bg);display:flex;align-items:center;justify-content:center;z-index:var(--z-modal);animation:fadeIn var(--transition-fast) ease}.modal-content{background:var(--card-bg);border-radius:var(--radius-xl);box-shadow:0 20px 40px rgba(0,0,0,.2);max-width:90vw;max-height:90vh;overflow:auto;animation:fadeInUp var(--transition-normal) ease}@media (max-width:767px){:root{--font-size-base:0.9375rem;--spacing-lg:1.25rem;--spacing-xl:1.5rem}}@media (min-width:1024px){:root{--font-size-base:1.0625rem}}@media print{body{background:#fff;color:#000}.no-print{display:none !important}}
.start-screen[data-v-6d07b234]{min-height:100vh;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);position:relative;overflow:hidden}.start-content[data-v-6d07b234]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-2xl);z-index:1}.logo-container[data-v-6d07b234]{text-align:center}.logo-svg[data-v-6d07b234]{width:100%;max-width:400px;height:auto}.logo-text[data-v-6d07b234]{font-family:var(--font-decor);font-size:28px;font-weight:600;fill:var(--accent-color);filter:drop-shadow(0 2px 4px rgba(0,0,0,0.1))}.logo-subtitle[data-v-6d07b234]{font-family:var(--font-heading);font-size:16px;fill:var(--text-secondary)}.press-start-btn[data-v-6d07b234]{position:relative;padding:var(--spacing-md) var(--spacing-2xl);background:linear-gradient(135deg,var(--accent-color) 0%,var(--decor-gold) 100%);border:none;border-radius:var(--radius-lg);cursor:pointer;overflow:hidden;transition:all var(--transition-normal);box-shadow:0 4px 15px rgba(212,165,116,.3)}.press-start-btn[data-v-6d07b234]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(212,165,116,.4)}.press-start-btn[data-v-6d07b234]:active:not(:disabled){transform:translateY(0)}.press-start-btn[data-v-6d07b234]:disabled{opacity:.7;cursor:not-allowed}.btn-text[data-v-6d07b234]{font-family:var(--font-decor);font-size:var(--font-size-xl);font-weight:600;color:#fff;text-transform:uppercase;letter-spacing:2px;position:relative;z-index:1}.btn-decor[data-v-6d07b234]{position:absolute;inset:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transform:translateX(-100%);animation:shimmer-6d07b234 2s infinite}@keyframes shimmer-6d07b234{100%{transform:translateX(100%)}}.version-info[data-v-6d07b234]{font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-muted);display:flex;align-items:center;gap:var(--spacing-sm)}.separator[data-v-6d07b234]{opacity:.5}.decorative-rabbits[data-v-6d07b234]{position:absolute;inset:0;pointer-events:none}.rabbit-icon[data-v-6d07b234]{position:absolute;color:var(--decor-gold);opacity:.15;animation:rabbitFloat-6d07b234 4s ease-in-out infinite}@keyframes rabbitFloat-6d07b234{0%,100%{transform:translateY(0) rotate(0deg)}50%{transform:translateY(-10px) rotate(5deg)}}@media (max-width:767px){.logo-text[data-v-6d07b234]{font-size:20px}.logo-subtitle[data-v-6d07b234]{font-size:12px}.press-start-btn[data-v-6d07b234]{padding:var(--spacing-sm) var(--spacing-xl)}.btn-text[data-v-6d07b234]{font-size:var(--font-size-lg)}.decorative-rabbits[data-v-6d07b234]{display:none}}
.character-avatar[data-v-1087129c]{position:relative;display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs);cursor:pointer;transition:transform var(--transition-fast)}.character-avatar[data-v-1087129c]:hover{transform:translateY(-2px)}.character-avatar:hover .avatar-ring[data-v-1087129c]{opacity:1;transform:scale(1.1)}.character-avatar:hover .avatar-name[data-v-1087129c]{color:var(--character-color)}.character-avatar[data-v-1087129c]:active{transform:translateY(0)}.avatar-image[data-v-1087129c]{position:relative;width:48px;height:48px;border-radius:var(--radius-full);overflow:hidden;background:var(--secondary-bg);border:2px solid var(--border-color);transition:border-color var(--transition-fast)}.avatar-image img[data-v-1087129c]{width:100%;height:100%;object-fit:cover}.avatar-placeholder[data-v-1087129c]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--character-color),var(--secondary-bg))}.avatar-placeholder span[data-v-1087129c]{font-size:var(--font-size-xl);font-weight:600;color:#fff;text-shadow:0 1px 2px rgba(0,0,0,.2)}.avatar-info[data-v-1087129c]{text-align:center}.avatar-name[data-v-1087129c]{display:block;font-family:var(--font-ui);font-size:var(--font-size-xs);font-weight:500;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:80px;transition:color var(--transition-fast)}.avatar-ring[data-v-1087129c]{position:absolute;top:-4px;left:50%;transform:translateX(-50%) scale(1);width:56px;height:56px;border:2px solid var(--character-color);border-radius:var(--radius-full);opacity:0;pointer-events:none;transition:all var(--transition-fast)}.character-avatar.size-small .avatar-image[data-v-1087129c]{width:36px;height:36px}.character-avatar.size-small .avatar-name[data-v-1087129c]{font-size:10px;max-width:60px}.character-avatar.size-small .avatar-ring[data-v-1087129c]{width:44px;height:44px}.character-avatar.size-large .avatar-image[data-v-1087129c]{width:64px;height:64px}.character-avatar.size-large .avatar-name[data-v-1087129c]{font-size:var(--font-size-sm);max-width:100px}.character-avatar.size-large .avatar-ring[data-v-1087129c]{width:72px;height:72px}@media (min-width:1024px){.character-avatar[data-v-1087129c]{flex-direction:row;gap:var(--spacing-sm)}.avatar-name[data-v-1087129c]{max-width:100px}}
.character-bar[data-v-8a7eb258]{position:fixed;bottom:0;left:0;right:0;background:var(--card-bg);backdrop-filter:blur(10px);border-top:1px solid var(--border-color);box-shadow:0 -4px 12px var(--card-shadow);z-index:var(--z-sticky);transition:all var(--transition-normal)}.character-bar.collapsed .bar-header[data-v-8a7eb258]{border-bottom:none}.bar-header[data-v-8a7eb258]{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-sm) var(--spacing-md);cursor:pointer;border-bottom:1px solid var(--border-color);transition:background var(--transition-fast)}.bar-header[data-v-8a7eb258]:hover{background:var(--secondary-bg)}.header-left[data-v-8a7eb258]{display:flex;align-items:center;gap:var(--spacing-sm)}.header-title[data-v-8a7eb258]{font-family:var(--font-ui);font-size:var(--font-size-sm);font-weight:500;color:var(--text-primary)}.character-count[data-v-8a7eb258]{display:flex;align-items:center;justify-content:center;min-width:20px;height:20px;padding:0 6px;background:var(--accent-color);color:#fff;font-size:var(--font-size-xs);font-weight:600;border-radius:var(--radius-full)}.toggle-icon[data-v-8a7eb258]{color:var(--text-secondary);font-size:var(--font-size-sm);transition:transform var(--transition-fast)}.bar-content[data-v-8a7eb258]{padding:var(--spacing-sm) var(--spacing-md);max-height:120px;overflow-x:auto;overflow-y:hidden}.characters-list[data-v-8a7eb258]{display:flex;gap:var(--spacing-md);padding:var(--spacing-xs) 0}.empty-state[data-v-8a7eb258]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-md);color:var(--text-muted);font-size:var(--font-size-sm)}.empty-state i[data-v-8a7eb258]{font-size:var(--font-size-lg)}.expand-enter-active[data-v-8a7eb258],.expand-leave-active[data-v-8a7eb258]{transition:all var(--transition-normal);overflow:hidden}.expand-enter-from[data-v-8a7eb258],.expand-leave-to[data-v-8a7eb258]{max-height:0;opacity:0;padding-top:0;padding-bottom:0}.expand-enter-to[data-v-8a7eb258],.expand-leave-from[data-v-8a7eb258]{max-height:150px}@media (min-width:1024px){.character-bar[data-v-8a7eb258]{position:fixed;bottom:auto;top:80px;left:auto;right:var(--spacing-md);width:auto;max-width:200px;border-top:none;border-left:1px solid var(--border-color);border-radius:var(--radius-lg);box-shadow:0 4px 12px var(--card-shadow)}.bar-content[data-v-8a7eb258]{max-height:300px;overflow-y:auto;overflow-x:hidden}.characters-list[data-v-8a7eb258]{flex-direction:column;gap:var(--spacing-sm)}}
.message-display[data-v-fddb67ea]{flex:1;min-height:200px;background:var(--card-bg);border-radius:var(--radius-xl);padding:var(--spacing-lg);box-shadow:0 4px 12px var(--card-shadow);border:1px solid var(--border-color);position:relative;overflow:hidden}.loading-state[data-v-fddb67ea],.empty-state[data-v-fddb67ea]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:200px;color:var(--text-muted);gap:var(--spacing-md)}.loading-state i[data-v-fddb67ea],.empty-state i[data-v-fddb67ea]{font-size:48px;opacity:.5}.loading-state p[data-v-fddb67ea],.empty-state p[data-v-fddb67ea]{margin:0;font-size:var(--font-size-lg)}.loading-spinner[data-v-fddb67ea]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--accent-color);border-radius:50%;animation:spin-fddb67ea 1s linear infinite}@keyframes spin-fddb67ea{to{transform:rotate(360deg)}}.message-content[data-v-fddb67ea]{line-height:1.8;font-size:var(--font-size-base)}.message-content[data-v-fddb67ea] p{margin-bottom:var(--spacing-md);text-indent:2em}.message-content[data-v-fddb67ea] strong{color:var(--accent-color);font-weight:600}.message-content[data-v-fddb67ea] em{font-style:italic;color:var(--text-secondary)}.message-content[data-v-fddb67ea] blockquote{border-left:3px solid var(--accent-color);padding-left:var(--spacing-md);margin:var(--spacing-md) 0;color:var(--text-secondary);font-style:italic}.message-content[data-v-fddb67ea] ul,.message-content[data-v-fddb67ea] ol{padding-left:var(--spacing-xl);margin:var(--spacing-md) 0}.message-content[data-v-fddb67ea] li{margin-bottom:var(--spacing-xs)}.message-content[data-v-fddb67ea] code{background:var(--secondary-bg);padding:2px 6px;border-radius:var(--radius-sm);font-family:monospace;font-size:.9em}.message-content[data-v-fddb67ea] pre{background:var(--secondary-bg);padding:var(--spacing-md);border-radius:var(--radius-md);overflow-x:auto;margin:var(--spacing-md) 0}.message-content[data-v-fddb67ea] pre code{background:rgba(0,0,0,0);padding:0}.main-text[data-v-fddb67ea]{margin-bottom:var(--spacing-md)}.generating-indicator[data-v-fddb67ea]{position:absolute;bottom:var(--spacing-md);right:var(--spacing-md);display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xs) var(--spacing-md);background:var(--secondary-bg);border-radius:var(--radius-full);font-size:var(--font-size-sm);color:var(--text-secondary)}.typing-dots[data-v-fddb67ea]{display:flex;gap:4px}.typing-dots span[data-v-fddb67ea]{width:6px;height:6px;background:var(--accent-color);border-radius:50%;animation:typingDot-fddb67ea 1.4s ease-in-out infinite}.typing-dots span[data-v-fddb67ea]:nth-child(1){animation-delay:0s}.typing-dots span[data-v-fddb67ea]:nth-child(2){animation-delay:.2s}.typing-dots span[data-v-fddb67ea]:nth-child(3){animation-delay:.4s}@keyframes typingDot-fddb67ea{0%,60%,100%{transform:translateY(0);opacity:.4}30%{transform:translateY(-4px);opacity:1}}.fade-enter-active[data-v-fddb67ea],.fade-leave-active[data-v-fddb67ea]{transition:opacity var(--transition-fast)}.fade-enter-from[data-v-fddb67ea],.fade-leave-to[data-v-fddb67ea]{opacity:0}@media (max-width:767px){.message-display[data-v-fddb67ea]{padding:var(--spacing-md)}.message-content[data-v-fddb67ea]{font-size:var(--font-size-sm)}}
.option-card[data-v-dce11e2e]{position:relative;background:linear-gradient(160deg,rgba(45,45,45,0.75),rgba(35,35,35,0.85));border-radius:var(--radius-lg);box-shadow:0 10px 28px rgba(0,0,0,.15),0 3px 10px rgba(0,0,0,.12);padding:var(--spacing-md) var(--spacing-lg);cursor:pointer;border:1px solid hsla(0,0%,100%,.06);transition:all .25s cubic-bezier(0.25,0.8,0.25,1);overflow:hidden;color:#d8d8d8}.option-card[data-v-dce11e2e]:hover:not(.disabled){transform:translateY(-2px);box-shadow:0 6px 16px rgba(0,0,0,.15);background:linear-gradient(160deg,rgba(58,58,58,0.75),rgba(48,48,48,0.85));border-color:rgba(200,200,200,.12)}.option-card:hover:not(.disabled) .card-hover-effect[data-v-dce11e2e]{opacity:1}.option-card:hover:not(.disabled) .option-content[data-v-dce11e2e]{color:#e2e2e2}.option-card[data-v-dce11e2e]:active:not(.disabled){transform:translateY(-1px);box-shadow:0 3px 8px rgba(0,0,0,.12)}.option-card.disabled[data-v-dce11e2e]{opacity:.6;cursor:not-allowed}.option-card.custom[data-v-dce11e2e]{border-left:3px solid var(--accent-color)}.card-content[data-v-dce11e2e]{position:relative;z-index:1}.option-header[data-v-dce11e2e]{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--spacing-xs)}.option-title[data-v-dce11e2e]{display:flex;align-items:center;gap:var(--spacing-sm);font-size:var(--font-size-base);font-weight:600;color:#f0f0f0;letter-spacing:.02em}.option-title .custom-icon[data-v-dce11e2e]{color:var(--accent-color);font-size:var(--font-size-sm)}.remove-btn[data-v-dce11e2e]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:hsla(0,0%,100%,.1);border:none;border-radius:var(--radius-sm);color:#999;cursor:pointer;transition:all var(--transition-fast)}.remove-btn[data-v-dce11e2e]:hover{background:rgba(255,100,100,.2);color:#ff6b6b}.option-divider[data-v-dce11e2e]{display:none}.option-content[data-v-dce11e2e]{display:block;font-size:var(--font-size-sm);line-height:1.55;color:#c6c6c6;font-weight:normal;transition:color .25s ease;letter-spacing:.015em;overflow-wrap:anywhere}.card-hover-effect[data-v-dce11e2e]{position:absolute;inset:0;background:linear-gradient(135deg,rgba(90,90,90,0.06) 0%,transparent 70%);opacity:0;transition:opacity .3s ease;z-index:0}@media (max-width:767px){.option-card[data-v-dce11e2e]{padding:var(--spacing-sm) var(--spacing-md)}.option-title[data-v-dce11e2e]{font-size:var(--font-size-sm)}.option-content[data-v-dce11e2e]{font-size:var(--font-size-xs)}}@media (prefers-reduced-motion:reduce){.option-card[data-v-dce11e2e]{transition:none}.card-hover-effect[data-v-dce11e2e],.option-content[data-v-dce11e2e],.option-title[data-v-dce11e2e]{transition:none}}
.custom-option-input[data-v-b810ab60]{background:var(--card-bg);border-radius:var(--radius-lg);padding:var(--spacing-md);border:1px solid var(--border-color);box-shadow:0 4px 12px var(--card-shadow)}.input-group[data-v-b810ab60]{position:relative;margin-bottom:var(--spacing-sm)}.input-field[data-v-b810ab60]{width:100%;padding:var(--spacing-sm) var(--spacing-md);font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-primary);background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);transition:all var(--transition-fast)}.input-field[data-v-b810ab60]:focus{outline:none;border-color:var(--accent-color);box-shadow:0 0 0 2px rgba(212,165,116,.2)}.input-field[data-v-b810ab60]::placeholder{color:var(--text-muted)}.title-input[data-v-b810ab60]{font-weight:500}.content-input[data-v-b810ab60]{resize:vertical;min-height:80px;line-height:1.5}.char-count[data-v-b810ab60]{position:absolute;bottom:var(--spacing-xs);right:var(--spacing-sm);font-size:var(--font-size-xs);color:var(--text-muted)}.input-actions[data-v-b810ab60]{display:flex;justify-content:flex-end;gap:var(--spacing-sm);margin-top:var(--spacing-md)}.cancel-btn[data-v-b810ab60],.submit-btn[data-v-b810ab60]{display:flex;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-xs) var(--spacing-md)}.cancel-btn i[data-v-b810ab60],.submit-btn i[data-v-b810ab60]{font-size:var(--font-size-sm)}.submit-btn[data-v-b810ab60]:disabled{opacity:.5;cursor:not-allowed}@media (max-width:767px){.custom-option-input[data-v-b810ab60]{padding:var(--spacing-sm)}.input-actions[data-v-b810ab60]{flex-direction:column}.cancel-btn[data-v-b810ab60],.submit-btn[data-v-b810ab60]{width:100%;justify-content:center}}
.options-panel[data-v-4fcc2ca1]{display:flex;flex-direction:column;gap:var(--spacing-md)}.options-list[data-v-4fcc2ca1]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.custom-option-section[data-v-4fcc2ca1]{margin-top:var(--spacing-sm)}.add-custom-btn[data-v-4fcc2ca1]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-md);background:var(--secondary-bg);border:2px dashed var(--border-color);border-radius:var(--radius-lg);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.add-custom-btn[data-v-4fcc2ca1]:hover{background:var(--border-color);color:var(--text-primary);border-color:var(--accent-color)}.add-custom-btn i[data-v-4fcc2ca1]{font-size:var(--font-size-lg)}.empty-options[data-v-4fcc2ca1]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:var(--spacing-xl);color:var(--text-muted);text-align:center}.empty-options i[data-v-4fcc2ca1]{font-size:32px;margin-bottom:var(--spacing-md);opacity:.5}.empty-options p[data-v-4fcc2ca1]{margin:0;font-size:var(--font-size-base)}.empty-options .hint[data-v-4fcc2ca1]{font-size:var(--font-size-sm);margin-top:var(--spacing-xs)}.option-list-enter-active[data-v-4fcc2ca1],.option-list-leave-active[data-v-4fcc2ca1]{transition:all var(--transition-normal)}.option-list-enter-from[data-v-4fcc2ca1]{opacity:0;transform:translateY(20px)}.option-list-leave-to[data-v-4fcc2ca1]{opacity:0;transform:translateX(-20px)}.expand-enter-active[data-v-4fcc2ca1],.expand-leave-active[data-v-4fcc2ca1]{transition:all var(--transition-normal);overflow:hidden}.expand-enter-from[data-v-4fcc2ca1],.expand-leave-to[data-v-4fcc2ca1]{opacity:0;max-height:0}.expand-enter-to[data-v-4fcc2ca1],.expand-leave-from[data-v-4fcc2ca1]{max-height:200px}
.top-nav-bar[data-v-0d4c7aa6]{position:sticky;top:0;z-index:var(--z-sticky);display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-sm) var(--spacing-md);background:var(--card-bg);backdrop-filter:blur(10px);border-bottom:1px solid var(--border-color);box-shadow:0 2px 8px var(--card-shadow)}.nav-left[data-v-0d4c7aa6],.nav-right[data-v-0d4c7aa6]{display:flex;align-items:center;gap:var(--spacing-sm)}.nav-title[data-v-0d4c7aa6]{font-family:var(--font-heading);font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin-left:var(--spacing-sm)}.nav-btn[data-v-0d4c7aa6]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.nav-btn[data-v-0d4c7aa6]:hover{background:var(--secondary-bg);color:var(--text-primary)}.nav-btn[data-v-0d4c7aa6]:active{transform:scale(0.95)}.nav-btn i[data-v-0d4c7aa6]{font-size:var(--font-size-lg)}.menu-btn[data-v-0d4c7aa6]{display:none}@media (max-width:767px){.menu-btn[data-v-0d4c7aa6]{display:flex}}.menu-dropdown[data-v-0d4c7aa6]{position:absolute;top:100%;left:var(--spacing-md);min-width:180px;background:var(--card-bg);border-radius:var(--radius-lg);box-shadow:0 8px 24px var(--card-shadow);border:1px solid var(--border-color);padding:var(--spacing-sm);z-index:var(--z-dropdown)}.menu-item[data-v-0d4c7aa6]{display:flex;align-items:center;gap:var(--spacing-sm);width:100%;padding:var(--spacing-sm) var(--spacing-md);background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-primary);cursor:pointer;transition:all var(--transition-fast);text-align:left}.menu-item[data-v-0d4c7aa6]:hover{background:var(--secondary-bg)}.menu-item i[data-v-0d4c7aa6]{width:20px;text-align:center;color:var(--text-secondary)}.menu-divider[data-v-0d4c7aa6]{border:none;border-top:1px solid var(--border-color);margin:var(--spacing-xs) 0}.menu-overlay[data-v-0d4c7aa6]{position:fixed;inset:0;z-index:calc(var(--z-dropdown) - 1)}.dropdown-enter-active[data-v-0d4c7aa6],.dropdown-leave-active[data-v-0d4c7aa6]{transition:all var(--transition-fast)}.dropdown-enter-from[data-v-0d4c7aa6],.dropdown-leave-to[data-v-0d4c7aa6]{opacity:0;transform:translateY(-10px)}.fade-enter-active[data-v-0d4c7aa6],.fade-leave-active[data-v-0d4c7aa6]{transition:opacity var(--transition-fast)}.fade-enter-from[data-v-0d4c7aa6],.fade-leave-to[data-v-0d4c7aa6]{opacity:0}@media (min-width:768px){.nav-right .nav-btn[data-v-0d4c7aa6]{display:flex}}@media (max-width:767px){.nav-right .nav-btn[data-v-0d4c7aa6]:not(:last-child){display:none}}
.game-main[data-v-c1b8f2bc]{min-height:100vh;display:flex;flex-direction:column;padding-bottom:80px}.main-content[data-v-c1b8f2bc]{flex:1;display:flex;flex-direction:column;padding:var(--spacing-md);gap:var(--spacing-lg);overflow-y:auto}@media (min-width:1024px){.game-main[data-v-c1b8f2bc]{padding-bottom:0}.main-content[data-v-c1b8f2bc]{max-width:800px;margin:0 auto;width:100%;padding:var(--spacing-xl)}}
.character-detail[data-v-36ddaebc]{min-height:100vh;display:flex;flex-direction:column}.detail-header[data-v-36ddaebc]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:var(--z-sticky)}.back-btn[data-v-36ddaebc]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.back-btn[data-v-36ddaebc]:hover{background:var(--secondary-bg);color:var(--text-primary)}.header-title[data-v-36ddaebc]{font-family:var(--font-heading);font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);margin:0}.loading-state[data-v-36ddaebc],.error-state[data-v-36ddaebc]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md);color:var(--text-muted);padding:var(--spacing-xl)}.loading-state i[data-v-36ddaebc],.error-state i[data-v-36ddaebc]{font-size:48px;opacity:.5}.loading-spinner[data-v-36ddaebc]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--accent-color);border-radius:50%;animation:spin-36ddaebc 1s linear infinite}@keyframes spin-36ddaebc{to{transform:rotate(360deg)}}.detail-content[data-v-36ddaebc]{flex:1;padding:var(--spacing-lg);max-width:600px;margin:0 auto;width:100%}.portrait-section[data-v-36ddaebc]{display:flex;flex-direction:column;align-items:center;margin-bottom:var(--spacing-xl)}.portrait-container[data-v-36ddaebc]{position:relative;width:200px;height:200px;border-radius:var(--radius-xl);overflow:hidden;background:var(--secondary-bg);border:4px solid var(--character-color);box-shadow:0 8px 24px var(--card-shadow);margin-bottom:var(--spacing-md)}.portrait-image[data-v-36ddaebc]{width:100%;height:100%;object-fit:cover}.portrait-placeholder[data-v-36ddaebc]{width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--character-color),var(--secondary-bg))}.portrait-placeholder span[data-v-36ddaebc]{font-size:64px;font-weight:600;color:#fff;text-shadow:0 2px 4px rgba(0,0,0,.2)}.character-name[data-v-36ddaebc]{font-family:var(--font-heading);font-size:var(--font-size-2xl);font-weight:600;color:var(--text-primary);margin:0}.status-section[data-v-36ddaebc]{display:flex;flex-direction:column;gap:var(--spacing-sm);margin-bottom:var(--spacing-xl)}.status-item[data-v-36ddaebc]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color)}.status-item i[data-v-36ddaebc]{width:24px;text-align:center;color:var(--accent-color)}.status-item .status-label[data-v-36ddaebc]{font-weight:500;color:var(--text-secondary);min-width:50px}.status-item .status-value[data-v-36ddaebc]{flex:1;color:var(--text-primary);text-align:right}.items-section[data-v-36ddaebc]{margin-bottom:var(--spacing-xl)}.section-title[data-v-36ddaebc]{display:flex;align-items:center;gap:var(--spacing-sm);font-family:var(--font-heading);font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin-bottom:var(--spacing-md)}.section-title i[data-v-36ddaebc]{color:var(--accent-color)}.items-list[data-v-36ddaebc]{display:flex;flex-direction:column;gap:var(--spacing-sm)}.item-card[data-v-36ddaebc]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color)}.item-icon[data-v-36ddaebc]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:var(--secondary-bg);border-radius:var(--radius-md);color:var(--accent-color)}.item-info[data-v-36ddaebc]{flex:1;display:flex;flex-direction:column;gap:var(--spacing-xs)}.item-name[data-v-36ddaebc]{font-weight:500;color:var(--text-primary)}.item-desc[data-v-36ddaebc]{font-size:var(--font-size-sm);color:var(--text-secondary)}.item-count[data-v-36ddaebc]{font-weight:600;color:var(--accent-color);background:var(--secondary-bg);padding:var(--spacing-xs) var(--spacing-sm);border-radius:var(--radius-md)}.empty-items[data-v-36ddaebc]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-xl);color:var(--text-muted)}.empty-items i[data-v-36ddaebc]{font-size:32px;opacity:.5}@media (max-width:767px){.detail-content[data-v-36ddaebc]{padding:var(--spacing-md)}.portrait-container[data-v-36ddaebc]{width:150px;height:150px}.portrait-placeholder span[data-v-36ddaebc]{font-size:48px}}
.history-messages[data-v-b0c9d8ae]{min-height:100vh;display:flex;flex-direction:column}.history-header[data-v-b0c9d8ae]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:var(--z-sticky)}.back-btn[data-v-b0c9d8ae]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.back-btn[data-v-b0c9d8ae]:hover{background:var(--secondary-bg);color:var(--text-primary)}.header-title[data-v-b0c9d8ae]{font-family:var(--font-heading);font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);margin:0}.search-section[data-v-b0c9d8ae]{padding:var(--spacing-md);background:var(--card-bg);border-bottom:1px solid var(--border-color)}.search-input-wrapper[data-v-b0c9d8ae]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background:var(--secondary-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color)}.search-input-wrapper i[data-v-b0c9d8ae]{color:var(--text-muted)}.search-input[data-v-b0c9d8ae]{flex:1;border:none;background:rgba(0,0,0,0);font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-primary)}.search-input[data-v-b0c9d8ae]:focus{outline:none}.search-input[data-v-b0c9d8ae]::placeholder{color:var(--text-muted)}.clear-btn[data-v-b0c9d8ae]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer}.clear-btn[data-v-b0c9d8ae]:hover{background:var(--border-color);color:var(--text-primary)}.loading-state[data-v-b0c9d8ae],.empty-state[data-v-b0c9d8ae]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md);color:var(--text-muted);padding:var(--spacing-xl)}.loading-state i[data-v-b0c9d8ae],.empty-state i[data-v-b0c9d8ae]{font-size:48px;opacity:.5}.loading-spinner[data-v-b0c9d8ae]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--accent-color);border-radius:50%;animation:spin-b0c9d8ae 1s linear infinite}@keyframes spin-b0c9d8ae{to{transform:rotate(360deg)}}.messages-list[data-v-b0c9d8ae]{flex:1;padding:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.message-group[data-v-b0c9d8ae]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color);cursor:pointer;transition:all var(--transition-fast)}.message-group[data-v-b0c9d8ae]:hover{background:var(--secondary-bg);border-color:var(--accent-color)}.message-avatar[data-v-b0c9d8ae]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:var(--radius-full);color:#fff;flex-shrink:0}.message-info[data-v-b0c9d8ae]{flex:1;min-width:0}.message-header[data-v-b0c9d8ae]{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--spacing-xs)}.message-role[data-v-b0c9d8ae]{font-weight:500;color:var(--text-primary)}.message-id[data-v-b0c9d8ae]{font-size:var(--font-size-xs);color:var(--text-muted)}.message-preview[data-v-b0c9d8ae]{margin:0;font-size:var(--font-size-sm);color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.arrow-icon[data-v-b0c9d8ae]{color:var(--text-muted);font-size:var(--font-size-sm)}.load-more-btn[data-v-b0c9d8ae]{display:flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-md);background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:var(--radius-lg);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast);font-family:var(--font-ui);font-size:var(--font-size-sm)}.load-more-btn[data-v-b0c9d8ae]:hover:not(:disabled){background:var(--border-color);color:var(--text-primary)}.load-more-btn[data-v-b0c9d8ae]:disabled{opacity:.6;cursor:not-allowed}
.worldbook-manager[data-v-21d39fba]{min-height:100vh;display:flex;flex-direction:column}.wb-header[data-v-21d39fba]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:var(--z-sticky)}.back-btn[data-v-21d39fba]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.back-btn[data-v-21d39fba]:hover{background:var(--secondary-bg);color:var(--text-primary)}.header-title[data-v-21d39fba]{font-family:var(--font-heading);font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);margin:0}.search-section[data-v-21d39fba]{padding:var(--spacing-md);background:var(--card-bg);border-bottom:1px solid var(--border-color)}.search-input-wrapper[data-v-21d39fba]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-md);background:var(--secondary-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color)}.search-input-wrapper i[data-v-21d39fba]{color:var(--text-muted)}.search-input[data-v-21d39fba]{flex:1;border:none;background:rgba(0,0,0,0);font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-primary)}.search-input[data-v-21d39fba]:focus{outline:none}.search-input[data-v-21d39fba]::placeholder{color:var(--text-muted)}.clear-btn[data-v-21d39fba]{display:flex;align-items:center;justify-content:center;width:24px;height:24px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-sm);color:var(--text-muted);cursor:pointer}.clear-btn[data-v-21d39fba]:hover{background:var(--border-color);color:var(--text-primary)}.loading-state[data-v-21d39fba],.empty-state[data-v-21d39fba]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:var(--spacing-md);color:var(--text-muted);padding:var(--spacing-xl)}.loading-state i[data-v-21d39fba],.empty-state i[data-v-21d39fba]{font-size:48px;opacity:.5}.loading-spinner[data-v-21d39fba]{width:40px;height:40px;border:3px solid var(--border-color);border-top-color:var(--accent-color);border-radius:50%;animation:spin-21d39fba 1s linear infinite}@keyframes spin-21d39fba{to{transform:rotate(360deg)}}.entries-list[data-v-21d39fba]{flex:1;padding:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-sm)}.entry-card[data-v-21d39fba]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-radius:var(--radius-lg);border:1px solid var(--border-color);transition:all var(--transition-fast)}.entry-card[data-v-21d39fba]:hover{border-color:var(--accent-color)}.entry-toggle[data-v-21d39fba]{flex-shrink:0}.toggle-switch[data-v-21d39fba]{position:relative;display:inline-block;width:44px;height:24px}.toggle-switch input[data-v-21d39fba]{opacity:0;width:0;height:0}.toggle-switch input:checked+.toggle-slider[data-v-21d39fba]{background-color:var(--accent-color)}.toggle-switch input:checked+.toggle-slider[data-v-21d39fba]::before{transform:translateX(20px)}.toggle-switch .toggle-slider[data-v-21d39fba]{position:absolute;cursor:pointer;inset:0;background-color:var(--border-color);transition:all var(--transition-fast);border-radius:var(--radius-full)}.toggle-switch .toggle-slider[data-v-21d39fba]::before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:all var(--transition-fast);border-radius:50%}.entry-info[data-v-21d39fba]{flex:1;min-width:0}.entry-header[data-v-21d39fba]{display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--spacing-xs)}.entry-key[data-v-21d39fba]{font-weight:500;color:var(--text-primary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.entry-status[data-v-21d39fba]{font-size:var(--font-size-xs);padding:2px 8px;border-radius:var(--radius-full)}.entry-status.enabled[data-v-21d39fba]{background:rgba(135,206,135,.2);color:#4caf50}.entry-status.disabled[data-v-21d39fba]{background:rgba(255,152,152,.2);color:#f44336}.entry-comment[data-v-21d39fba]{margin:0;font-size:var(--font-size-sm);color:var(--text-secondary);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.entry-action[data-v-21d39fba]{display:flex;align-items:center;justify-content:center;width:36px;height:36px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-muted);cursor:pointer;transition:all var(--transition-fast)}.entry-action[data-v-21d39fba]:hover{background:var(--secondary-bg);color:var(--text-primary)}.modal-overlay[data-v-21d39fba]{position:fixed;inset:0;background:var(--overlay-bg);display:flex;align-items:center;justify-content:center;z-index:var(--z-modal);padding:var(--spacing-md)}.modal-content[data-v-21d39fba]{background:var(--card-bg);border-radius:var(--radius-xl);box-shadow:0 20px 40px rgba(0,0,0,.2);max-width:600px;width:100%;max-height:80vh;display:flex;flex-direction:column}.modal-header[data-v-21d39fba]{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.modal-title[data-v-21d39fba]{font-family:var(--font-heading);font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin:0}.modal-close[data-v-21d39fba]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-muted);cursor:pointer}.modal-close[data-v-21d39fba]:hover{background:var(--secondary-bg);color:var(--text-primary)}.modal-body[data-v-21d39fba]{flex:1;padding:var(--spacing-lg);overflow-y:auto}.detail-item[data-v-21d39fba]{margin-bottom:var(--spacing-md)}.detail-item[data-v-21d39fba]:last-child{margin-bottom:0}.detail-label[data-v-21d39fba]{display:block;font-size:var(--font-size-sm);font-weight:500;color:var(--text-secondary);margin-bottom:var(--spacing-xs)}.detail-value[data-v-21d39fba]{color:var(--text-primary)}.detail-content[data-v-21d39fba]{background:var(--secondary-bg);padding:var(--spacing-md);border-radius:var(--radius-md);font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-primary);white-space:pre-wrap;word-break:break-word;margin:0;max-height:300px;overflow-y:auto}.modal-footer[data-v-21d39fba]{display:flex;justify-content:flex-end;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);border-top:1px solid var(--border-color)}.modal-enter-active[data-v-21d39fba],.modal-leave-active[data-v-21d39fba]{transition:opacity var(--transition-normal)}.modal-enter-active .modal-content[data-v-21d39fba],.modal-leave-active .modal-content[data-v-21d39fba]{transition:transform var(--transition-normal)}.modal-enter-from[data-v-21d39fba],.modal-leave-to[data-v-21d39fba]{opacity:0}.modal-enter-from .modal-content[data-v-21d39fba],.modal-leave-to .modal-content[data-v-21d39fba]{transform:scale(0.95)}
.settings-page[data-v-3724b6ef]{min-height:100vh;display:flex;flex-direction:column}.settings-header[data-v-3724b6ef]{display:flex;align-items:center;gap:var(--spacing-md);padding:var(--spacing-md);background:var(--card-bg);border-bottom:1px solid var(--border-color);position:sticky;top:0;z-index:var(--z-sticky)}.back-btn[data-v-3724b6ef]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;background:rgba(0,0,0,0);border:none;border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.back-btn[data-v-3724b6ef]:hover{background:var(--secondary-bg);color:var(--text-primary)}.header-title[data-v-3724b6ef]{font-family:var(--font-heading);font-size:var(--font-size-xl);font-weight:600;color:var(--text-primary);margin:0}.settings-content[data-v-3724b6ef]{flex:1;padding:var(--spacing-md);display:flex;flex-direction:column;gap:var(--spacing-lg)}.settings-section[data-v-3724b6ef]{background:var(--card-bg);border-radius:var(--radius-xl);border:1px solid var(--border-color);overflow:hidden}.section-title[data-v-3724b6ef]{display:flex;align-items:center;gap:var(--spacing-sm);padding:var(--spacing-md) var(--spacing-lg);margin:0;font-family:var(--font-heading);font-size:var(--font-size-md);font-weight:600;color:var(--text-primary);background:var(--secondary-bg);border-bottom:1px solid var(--border-color)}.section-title i[data-v-3724b6ef]{color:var(--accent-color)}.setting-item[data-v-3724b6ef]{display:flex;align-items:center;justify-content:space-between;padding:var(--spacing-md) var(--spacing-lg);border-bottom:1px solid var(--border-color)}.setting-item[data-v-3724b6ef]:last-child{border-bottom:none}.setting-info[data-v-3724b6ef]{display:flex;flex-direction:column;gap:var(--spacing-xs)}.setting-label[data-v-3724b6ef]{font-weight:500;color:var(--text-primary)}.setting-desc[data-v-3724b6ef]{font-size:var(--font-size-sm);color:var(--text-muted)}.setting-control[data-v-3724b6ef]{flex-shrink:0}.setting-select[data-v-3724b6ef]{padding:var(--spacing-sm) var(--spacing-md);background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);font-family:var(--font-ui);font-size:var(--font-size-sm);color:var(--text-primary);cursor:pointer;min-width:120px}.setting-select[data-v-3724b6ef]:focus{outline:none;border-color:var(--accent-color)}.toggle-switch[data-v-3724b6ef]{position:relative;display:inline-block;width:44px;height:24px}.toggle-switch input[data-v-3724b6ef]{opacity:0;width:0;height:0}.toggle-switch input:checked+.toggle-slider[data-v-3724b6ef]{background-color:var(--accent-color)}.toggle-switch input:checked+.toggle-slider[data-v-3724b6ef]::before{transform:translateX(20px)}.toggle-switch .toggle-slider[data-v-3724b6ef]{position:absolute;cursor:pointer;inset:0;background-color:var(--border-color);transition:all var(--transition-fast);border-radius:var(--radius-full)}.toggle-switch .toggle-slider[data-v-3724b6ef]::before{position:absolute;content:"";height:18px;width:18px;left:3px;bottom:3px;background-color:#fff;transition:all var(--transition-fast);border-radius:50%}.theme-options[data-v-3724b6ef]{display:flex;gap:var(--spacing-sm)}.theme-btn[data-v-3724b6ef]{display:flex;flex-direction:column;align-items:center;gap:var(--spacing-xs);padding:var(--spacing-sm);background:rgba(0,0,0,0);border:2px solid var(--border-color);border-radius:var(--radius-md);cursor:pointer;transition:all var(--transition-fast)}.theme-btn[data-v-3724b6ef]:hover{border-color:var(--text-muted)}.theme-btn.active[data-v-3724b6ef]{border-color:var(--accent-color);background:var(--secondary-bg)}.theme-preview[data-v-3724b6ef]{width:32px;height:32px;border-radius:var(--radius-full);border:1px solid var(--border-color)}.theme-name[data-v-3724b6ef]{font-size:var(--font-size-xs);color:var(--text-secondary)}.font-size-control[data-v-3724b6ef]{display:flex;align-items:center;gap:var(--spacing-sm)}.size-btn[data-v-3724b6ef]{display:flex;align-items:center;justify-content:center;width:32px;height:32px;background:var(--secondary-bg);border:1px solid var(--border-color);border-radius:var(--radius-md);color:var(--text-secondary);cursor:pointer;transition:all var(--transition-fast)}.size-btn[data-v-3724b6ef]:hover{background:var(--border-color);color:var(--text-primary)}.size-value[data-v-3724b6ef]{min-width:50px;text-align:center;font-weight:500;color:var(--text-primary)}.slider-control[data-v-3724b6ef]{display:flex;align-items:center;gap:var(--spacing-sm)}.setting-slider[data-v-3724b6ef]{width:120px;height:4px;background:var(--border-color);border-radius:var(--radius-full);-webkit-appearance:none;appearance:none;cursor:pointer}.setting-slider[data-v-3724b6ef]::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:16px;height:16px;background:var(--accent-color);border-radius:50%;cursor:pointer;-webkit-transition:transform var(--transition-fast);transition:transform var(--transition-fast)}.setting-slider[data-v-3724b6ef]::-webkit-slider-thumb:hover{transform:scale(1.2)}.slider-value[data-v-3724b6ef]{min-width:40px;font-size:var(--font-size-sm);color:var(--text-secondary)}.about-content[data-v-3724b6ef]{display:flex;align-items:center;gap:var(--spacing-lg);padding:var(--spacing-lg)}.about-logo[data-v-3724b6ef]{flex-shrink:0}.logo-placeholder[data-v-3724b6ef]{width:80px;height:80px;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,var(--accent-color),var(--accent-secondary));border-radius:var(--radius-lg);color:#fff;font-size:36px}.about-info[data-v-3724b6ef]{flex:1}.about-title[data-v-3724b6ef]{font-family:var(--font-heading);font-size:var(--font-size-lg);font-weight:600;color:var(--text-primary);margin:0 0 var(--spacing-xs) 0}.about-version[data-v-3724b6ef]{font-size:var(--font-size-sm);color:var(--text-muted);margin:0 0 var(--spacing-sm) 0}.about-desc[data-v-3724b6ef]{font-size:var(--font-size-sm);color:var(--text-secondary);margin:0;line-height:1.6}.settings-footer[data-v-3724b6ef]{display:flex;justify-content:center;padding:var(--spacing-lg)}.btn[data-v-3724b6ef]{display:inline-flex;align-items:center;justify-content:center;gap:var(--spacing-sm);padding:var(--spacing-sm) var(--spacing-lg);border:none;border-radius:var(--radius-lg);font-family:var(--font-ui);font-size:var(--font-size-sm);font-weight:500;cursor:pointer;transition:all var(--transition-fast)}.btn.btn-danger[data-v-3724b6ef]{background:rgba(239,68,68,.1);color:#ef4444}.btn.btn-danger[data-v-3724b6ef]:hover{background:rgba(239,68,68,.2)}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>